"use strict";var Il=Object.create;var Qn=Object.defineProperty;var Ml=Object.getOwnPropertyDescriptor;var Dl=Object.getOwnPropertyNames;var Bl=Object.getPrototypeOf,Kl=Object.prototype.hasOwnProperty;var w=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),so=(r,e)=>{for(var n in e)Qn(r,n,{get:e[n],enumerable:!0})},co=(r,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of Dl(e))!Kl.call(r,t)&&t!==n&&Qn(r,t,{get:()=>e[t],enumerable:!(i=Ml(e,t))||i.enumerable});return r};var Ll=(r,e,n)=>(n=r!=null?Il(Bl(r)):{},co(e||!r||!r.__esModule?Qn(n,"default",{value:r,enumerable:!0}):n,r)),Ol=r=>co(Qn({},"__esModule",{value:!0}),r);var ii=w(bo=>{"use strict";bo.parse=function(r,e){return new ri(r,e).parse()};var ri=class r{constructor(e,n){this.source=e,this.transform=n||im,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var e=this.source[this.position++];return e==="\\"?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}}record(e){this.recorded.push(e)}newEntry(e){var n;(this.recorded.length>0||e)&&(n=this.recorded.join(""),n==="NULL"&&!e&&(n=null),n!==null&&(n=this.transform(n)),this.entries.push(n),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var e=this.nextCharacter();if(e.value==="=")break}}parse(e){var n,i,t;for(this.consumeDimensions();!this.isEof();)if(n=this.nextCharacter(),n.value==="{"&&!t)this.dimension++,this.dimension>1&&(i=new r(this.source.substr(this.position-1),this.transform),this.entries.push(i.parse(!0)),this.position+=i.position-2);else if(n.value==="}"&&!t){if(this.dimension--,!this.dimension&&(this.newEntry(),e))return this.entries}else n.value==='"'&&!n.escaped?(t&&this.newEntry(!0),t=!t):n.value===","&&!t?this.newEntry():this.record(n.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};function im(r){return r}});var ti=w((uf,ko)=>{var tm=ii();ko.exports={create:function(r,e){return{parse:function(){return tm.parse(r,e)}}}}});var To=w((df,So)=>{"use strict";var am=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,om=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,sm=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,cm=/^-?infinity$/;So.exports=function(e){if(cm.test(e))return Number(e.replace("i","I"));var n=am.exec(e);if(!n)return lm(e)||null;var i=!!n[8],t=parseInt(n[1],10);i&&(t=wo(t));var a=parseInt(n[2],10)-1,o=n[3],s=parseInt(n[4],10),c=parseInt(n[5],10),m=parseInt(n[6],10),u=n[7];u=u?1e3*parseFloat(u):0;var p,h=mm(e);return h!=null?(p=new Date(Date.UTC(t,a,o,s,c,m,u)),ai(t)&&p.setUTCFullYear(t),h!==0&&p.setTime(p.getTime()-h)):(p=new Date(t,a,o,s,c,m,u),ai(t)&&p.setFullYear(t)),p};function lm(r){var e=om.exec(r);if(e){var n=parseInt(e[1],10),i=!!e[4];i&&(n=wo(n));var t=parseInt(e[2],10)-1,a=e[3],o=new Date(n,t,a);return ai(n)&&o.setFullYear(n),o}}function mm(r){if(r.endsWith("+00"))return 0;var e=sm.exec(r.split(" ")[1]);if(e){var n=e[1];if(n==="Z")return 0;var i=n==="-"?-1:1,t=parseInt(e[2],10)*3600+parseInt(e[3]||0,10)*60+parseInt(e[4]||0,10);return t*i*1e3}}function wo(r){return-(r-1)}function ai(r){return r>=0&&r<100}});var xo=w((pf,Ao)=>{Ao.exports=dm;var um=Object.prototype.hasOwnProperty;function dm(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)um.call(n,i)&&(r[i]=n[i])}return r}});var Po=w((hf,Eo)=>{"use strict";var pm=xo();Eo.exports=je;function je(r){if(!(this instanceof je))return new je(r);pm(this,Sm(r))}var hm=["seconds","minutes","hours","days","months","years"];je.prototype.toPostgres=function(){var r=hm.filter(this.hasOwnProperty,this);return this.milliseconds&&r.indexOf("seconds")<0&&r.push("seconds"),r.length===0?"0":r.map(function(e){var n=this[e]||0;return e==="seconds"&&this.milliseconds&&(n=(n+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),n+" "+e},this).join(" ")};var fm={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},vm=["years","months","days"],ym=["hours","minutes","seconds"];je.prototype.toISOString=je.prototype.toISO=function(){var r=vm.map(n,this).join(""),e=ym.map(n,this).join("");return"P"+r+"T"+e;function n(i){var t=this[i]||0;return i==="seconds"&&this.milliseconds&&(t=(t+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),t+fm[i]}};var oi="([+-]?\\d+)",gm=oi+"\\s+years?",Cm=oi+"\\s+mons?",zm=oi+"\\s+days?",Nm="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",bm=new RegExp([gm,Cm,zm,Nm].map(function(r){return"("+r+")?"}).join("\\s*")),_o={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},km=["hours","minutes","seconds","milliseconds"];function wm(r){var e=r+"000000".slice(r.length);return parseInt(e,10)/1e3}function Sm(r){if(!r)return{};var e=bm.exec(r),n=e[8]==="-";return Object.keys(_o).reduce(function(i,t){var a=_o[t],o=e[a];return!o||(o=t==="milliseconds"?wm(o):parseInt(o,10),!o)||(n&&~km.indexOf(t)&&(o*=-1),i[t]=o),i},{})}});var Do=w((ff,Mo)=>{"use strict";var Io=Buffer.from||Buffer;Mo.exports=function(e){if(/^\\x/.test(e))return Io(e.substr(2),"hex");for(var n="",i=0;i<e.length;)if(e[i]!=="\\")n+=e[i],++i;else if(/[0-7]{3}/.test(e.substr(i+1,3)))n+=String.fromCharCode(parseInt(e.substr(i+1,3),8)),i+=4;else{for(var t=1;i+t<e.length&&e[i+t]==="\\";)t++;for(var a=0;a<Math.floor(t/2);++a)n+="\\";i+=Math.floor(t/2)*2}return Io(n,"binary")}});var $o=w((vf,Ro)=>{var mn=ii(),un=ti(),sr=To(),Ko=Po(),Lo=Do();function cr(r){return function(n){return n===null?n:r(n)}}function Oo(r){return r===null?r:r==="TRUE"||r==="t"||r==="true"||r==="y"||r==="yes"||r==="on"||r==="1"}function Tm(r){return r?mn.parse(r,Oo):null}function Am(r){return parseInt(r,10)}function si(r){return r?mn.parse(r,cr(Am)):null}function xm(r){return r?mn.parse(r,cr(function(e){return qo(e).trim()})):null}var _m=function(r){if(!r)return null;var e=un.create(r,function(n){return n!==null&&(n=ui(n)),n});return e.parse()},ci=function(r){if(!r)return null;var e=un.create(r,function(n){return n!==null&&(n=parseFloat(n)),n});return e.parse()},me=function(r){if(!r)return null;var e=un.create(r);return e.parse()},li=function(r){if(!r)return null;var e=un.create(r,function(n){return n!==null&&(n=sr(n)),n});return e.parse()},Em=function(r){if(!r)return null;var e=un.create(r,function(n){return n!==null&&(n=Ko(n)),n});return e.parse()},Pm=function(r){return r?mn.parse(r,cr(Lo)):null},mi=function(r){return parseInt(r,10)},qo=function(r){var e=String(r);return/^\d+$/.test(e)?e:r},Bo=function(r){return r?mn.parse(r,cr(JSON.parse)):null},ui=function(r){return r[0]!=="("?null:(r=r.substring(1,r.length-1).split(","),{x:parseFloat(r[0]),y:parseFloat(r[1])})},Im=function(r){if(r[0]!=="<"&&r[1]!=="(")return null;for(var e="(",n="",i=!1,t=2;t<r.length-1;t++){if(i||(e+=r[t]),r[t]===")"){i=!0;continue}else if(!i)continue;r[t]!==","&&(n+=r[t])}var a=ui(e);return a.radius=parseFloat(n),a},Mm=function(r){r(20,qo),r(21,mi),r(23,mi),r(26,mi),r(700,parseFloat),r(701,parseFloat),r(16,Oo),r(1082,sr),r(1114,sr),r(1184,sr),r(600,ui),r(651,me),r(718,Im),r(1e3,Tm),r(1001,Pm),r(1005,si),r(1007,si),r(1028,si),r(1016,xm),r(1017,_m),r(1021,ci),r(1022,ci),r(1231,ci),r(1014,me),r(1015,me),r(1008,me),r(1009,me),r(1040,me),r(1041,me),r(1115,li),r(1182,li),r(1185,li),r(1186,Ko),r(1187,Em),r(17,Lo),r(114,JSON.parse.bind(JSON)),r(3802,JSON.parse.bind(JSON)),r(199,Bo),r(3807,Bo),r(3907,me),r(2951,me),r(791,me),r(1183,me),r(1270,me)};Ro.exports={init:Mm}});var Fo=w((yf,Qo)=>{"use strict";var ie=1e6;function Dm(r){var e=r.readInt32BE(0),n=r.readUInt32BE(4),i="";e<0&&(e=~e+(n===0),n=~n+1>>>0,i="-");var t="",a,o,s,c,m,u;{if(a=e%ie,e=e/ie>>>0,o=4294967296*a+n,n=o/ie>>>0,s=""+(o-ie*n),n===0&&e===0)return i+s+t;for(c="",m=6-s.length,u=0;u<m;u++)c+="0";t=c+s+t}{if(a=e%ie,e=e/ie>>>0,o=4294967296*a+n,n=o/ie>>>0,s=""+(o-ie*n),n===0&&e===0)return i+s+t;for(c="",m=6-s.length,u=0;u<m;u++)c+="0";t=c+s+t}{if(a=e%ie,e=e/ie>>>0,o=4294967296*a+n,n=o/ie>>>0,s=""+(o-ie*n),n===0&&e===0)return i+s+t;for(c="",m=6-s.length,u=0;u<m;u++)c+="0";t=c+s+t}return a=e%ie,o=4294967296*a+n,s=""+o%ie,i+s+t}Qo.exports=Dm});var Ho=w((gf,Go)=>{var Bm=Fo(),q=function(r,e,n,i,t){n=n||0,i=i||!1,t=t||function(z,S,k){return z*Math.pow(2,k)+S};var a=n>>3,o=function(z){return i?~z&255:z},s=255,c=8-n%8;e<c&&(s=255<<8-e&255,c=e),n&&(s=s>>n%8);var m=0;n%8+e>=8&&(m=t(0,o(r[a])&s,c));for(var u=e+n>>3,p=a+1;p<u;p++)m=t(m,o(r[p]),8);var h=(e+n)%8;return h>0&&(m=t(m,o(r[u])>>8-h,h)),m},Uo=function(r,e,n){var i=Math.pow(2,n-1)-1,t=q(r,1),a=q(r,n,1);if(a===0)return 0;var o=1,s=function(m,u,p){m===0&&(m=1);for(var h=1;h<=p;h++)o/=2,(u&1<<p-h)>0&&(m+=o);return m},c=q(r,e,n+1,!1,s);return a==Math.pow(2,n+1)-1?c===0?t===0?1/0:-1/0:NaN:(t===0?1:-1)*Math.pow(2,a-i)*c},Km=function(r){return q(r,1)==1?-1*(q(r,15,1,!0)+1):q(r,15,1)},jo=function(r){return q(r,1)==1?-1*(q(r,31,1,!0)+1):q(r,31,1)},Lm=function(r){return Uo(r,23,8)},Om=function(r){return Uo(r,52,11)},qm=function(r){var e=q(r,16,32);if(e==49152)return NaN;for(var n=Math.pow(1e4,q(r,16,16)),i=0,t=[],a=q(r,16),o=0;o<a;o++)i+=q(r,16,64+16*o)*n,n/=1e4;var s=Math.pow(10,q(r,16,48));return(e===0?1:-1)*Math.round(i*s)/s},Vo=function(r,e){var n=q(e,1),i=q(e,63,1),t=new Date((n===0?1:-1)*i/1e3+9466848e5);return r||t.setTime(t.getTime()+t.getTimezoneOffset()*6e4),t.usec=i%1e3,t.getMicroSeconds=function(){return this.usec},t.setMicroSeconds=function(a){this.usec=a},t.getUTCMicroSeconds=function(){return this.usec},t},dn=function(r){for(var e=q(r,32),n=q(r,32,32),i=q(r,32,64),t=96,a=[],o=0;o<e;o++)a[o]=q(r,32,t),t+=32,t+=32;var s=function(m){var u=q(r,32,t);if(t+=32,u==4294967295)return null;var p;if(m==23||m==20)return p=q(r,u*8,t),t+=u*8,p;if(m==25)return p=r.toString(this.encoding,t>>3,(t+=u<<3)>>3),p;console.log("ERROR: ElementType not implemented: "+m)},c=function(m,u){var p=[],h;if(m.length>1){var z=m.shift();for(h=0;h<z;h++)p[h]=c(m,u);m.unshift(z)}else for(h=0;h<m[0];h++)p[h]=s(u);return p};return c(a,i)},Rm=function(r){return r.toString("utf8")},$m=function(r){return r===null?null:q(r,8)>0},Qm=function(r){r(20,Bm),r(21,Km),r(23,jo),r(26,jo),r(1700,qm),r(700,Lm),r(701,Om),r(16,$m),r(1114,Vo.bind(null,!1)),r(1184,Vo.bind(null,!0)),r(1e3,dn),r(1007,dn),r(1016,dn),r(1008,dn),r(1009,dn),r(25,Rm)};Go.exports={init:Qm}});var Wo=w((Cf,Yo)=>{Yo.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}});var fn=w(hn=>{var Fm=$o(),jm=Ho(),Vm=ti(),Um=Wo();hn.getTypeParser=Gm;hn.setTypeParser=Hm;hn.arrayParser=Vm;hn.builtins=Um;var pn={text:{},binary:{}};function Jo(r){return String(r)}function Gm(r,e){return e=e||"text",pn[e]&&pn[e][r]||Jo}function Hm(r,e,n){typeof e=="function"&&(n=e,e="text"),pn[e][r]=n}Fm.init(function(r,e){pn.text[r]=e});jm.init(function(r,e){pn.binary[r]=e})});var vn=w((Nf,di)=>{"use strict";di.exports={host:"localhost",user:process.platform==="win32"?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var Ve=fn(),Ym=Ve.getTypeParser(20,"text"),Wm=Ve.getTypeParser(1016,"text");di.exports.__defineSetter__("parseInt8",function(r){Ve.setTypeParser(20,"text",r?Ve.getTypeParser(23,"text"):Ym),Ve.setTypeParser(1016,"text",r?Ve.getTypeParser(1007,"text"):Wm)})});var Ue=w((bf,es)=>{"use strict";var Jm=vn(),Xo=require("util"),{isDate:Xm}=Xo.types||Xo;function Zm(r){return'"'+r.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function Zo(r){let e="{";for(let n=0;n<r.length;n++)if(n>0&&(e=e+","),r[n]===null||typeof r[n]>"u")e=e+"NULL";else if(Array.isArray(r[n]))e=e+Zo(r[n]);else if(ArrayBuffer.isView(r[n])){let i=r[n];if(!(i instanceof Buffer)){let t=Buffer.from(i.buffer,i.byteOffset,i.byteLength);t.length===i.byteLength?i=t:i=t.slice(i.byteOffset,i.byteOffset+i.byteLength)}e+="\\\\x"+i.toString("hex")}else e+=Zm(lr(r[n]));return e=e+"}",e}var lr=function(r,e){if(r==null)return null;if(typeof r=="object"){if(r instanceof Buffer)return r;if(ArrayBuffer.isView(r)){let n=Buffer.from(r.buffer,r.byteOffset,r.byteLength);return n.length===r.byteLength?n:n.slice(r.byteOffset,r.byteOffset+r.byteLength)}return Xm(r)?Jm.parseInputDatesAsUTC?ru(r):nu(r):Array.isArray(r)?Zo(r):eu(r,e)}return r.toString()};function eu(r,e){if(r&&typeof r.toPostgres=="function"){if(e=e||[],e.indexOf(r)!==-1)throw new Error('circular reference detected while preparing "'+r+'" for query');return e.push(r),lr(r.toPostgres(lr),e)}return JSON.stringify(r)}function nu(r){let e=-r.getTimezoneOffset(),n=r.getFullYear(),i=n<1;i&&(n=Math.abs(n)+1);let t=String(n).padStart(4,"0")+"-"+String(r.getMonth()+1).padStart(2,"0")+"-"+String(r.getDate()).padStart(2,"0")+"T"+String(r.getHours()).padStart(2,"0")+":"+String(r.getMinutes()).padStart(2,"0")+":"+String(r.getSeconds()).padStart(2,"0")+"."+String(r.getMilliseconds()).padStart(3,"0");return e<0?(t+="-",e*=-1):t+="+",t+=String(Math.floor(e/60)).padStart(2,"0")+":"+String(e%60).padStart(2,"0"),i&&(t+=" BC"),t}function ru(r){let e=r.getUTCFullYear(),n=e<1;n&&(e=Math.abs(e)+1);let i=String(e).padStart(4,"0")+"-"+String(r.getUTCMonth()+1).padStart(2,"0")+"-"+String(r.getUTCDate()).padStart(2,"0")+"T"+String(r.getUTCHours()).padStart(2,"0")+":"+String(r.getUTCMinutes()).padStart(2,"0")+":"+String(r.getUTCSeconds()).padStart(2,"0")+"."+String(r.getUTCMilliseconds()).padStart(3,"0");return i+="+00:00",n&&(i+=" BC"),i}function iu(r,e,n){return r=typeof r=="string"?{text:r}:r,e&&(typeof e=="function"?r.callback=e:r.values=e),n&&(r.callback=n),r}var tu=function(r){return'"'+r.replace(/"/g,'""')+'"'},au=function(r){let e=!1,n="'";if(r==null||typeof r!="string")return"''";for(let i=0;i<r.length;i++){let t=r[i];t==="'"?n+=t+t:t==="\\"?(n+=t+t,e=!0):n+=t}return n+="'",e===!0&&(n=" E"+n),n};es.exports={prepareValue:function(e){return lr(e)},normalizeQueryConfig:iu,escapeIdentifier:tu,escapeLiteral:au}});var rs=w((kf,ns)=>{"use strict";var Ge=require("crypto");function pi(r){return Ge.createHash("md5").update(r,"utf-8").digest("hex")}function ou(r,e,n){let i=pi(e+r);return"md5"+pi(Buffer.concat([Buffer.from(i),n]))}function su(r){return Ge.createHash("sha256").update(r).digest()}function cu(r,e){return r=r.replace(/(\D)-/,"$1"),Ge.createHash(r).update(e).digest()}function lu(r,e){return Ge.createHmac("sha256",r).update(e).digest()}async function mu(r,e,n){return Ge.pbkdf2Sync(r,e,n,32,"sha256")}ns.exports={postgresMd5PasswordHash:ou,randomBytes:Ge.randomBytes,deriveKey:mu,sha256:su,hashByName:cu,hmacSha256:lu,md5:pi}});var os=w((wf,as)=>{var is=require("crypto");as.exports={postgresMd5PasswordHash:du,randomBytes:uu,deriveKey:vu,sha256:pu,hashByName:hu,hmacSha256:fu,md5:hi};var ts=is.webcrypto||globalThis.crypto,Be=ts.subtle,fi=new TextEncoder;function uu(r){return ts.getRandomValues(Buffer.alloc(r))}async function hi(r){try{return is.createHash("md5").update(r,"utf-8").digest("hex")}catch{let n=typeof r=="string"?fi.encode(r):r,i=await Be.digest("MD5",n);return Array.from(new Uint8Array(i)).map(t=>t.toString(16).padStart(2,"0")).join("")}}async function du(r,e,n){let i=await hi(e+r);return"md5"+await hi(Buffer.concat([Buffer.from(i),n]))}async function pu(r){return await Be.digest("SHA-256",r)}async function hu(r,e){return await Be.digest(r,e)}async function fu(r,e){let n=await Be.importKey("raw",r,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return await Be.sign("HMAC",n,fi.encode(e))}async function vu(r,e,n){let i=await Be.importKey("raw",fi.encode(r),"PBKDF2",!1,["deriveBits"]),t={name:"PBKDF2",hash:"SHA-256",salt:e,iterations:n};return await Be.deriveBits(t,i,32*8,["deriveBits"])}});var yi=w((Sf,vi)=>{"use strict";var yu=parseInt(process.versions&&process.versions.node&&process.versions.node.split(".")[0])<15;yu?vi.exports=rs():vi.exports=os()});var ls=w((Tf,cs)=>{function Ke(r,e){return new Error("SASL channel binding: "+r+" when parsing public certificate "+e.toString("base64"))}function gi(r,e){let n=r[e++];if(n<128)return{length:n,index:e};let i=n&127;if(i>4)throw Ke("bad length",r);n=0;for(let t=0;t<i;t++)n=n<<8|r[e++];return{length:n,index:e}}function ss(r,e){if(r[e++]!==6)throw Ke("non-OID data",r);let{length:n,index:i}=gi(r,e);e=i;let t=e+n,a=r[e++],o=(a/40>>0)+"."+a%40;for(;e<t;){let s=0;for(;e<t;){let c=r[e++];if(s=s<<7|c&127,c<128)break}o+="."+s}return{oid:o,index:e}}function yn(r,e){if(r[e++]!==48)throw Ke("non-sequence data",r);return gi(r,e)}function gu(r,e){e===void 0&&(e=0),e=yn(r,e).index;let{length:n,index:i}=yn(r,e);e=i+n,e=yn(r,e).index;let{oid:t,index:a}=ss(r,e);switch(t){case"1.2.840.113549.1.1.4":return"MD5";case"1.2.840.113549.1.1.5":return"SHA-1";case"1.2.840.113549.1.1.11":return"SHA-256";case"1.2.840.113549.1.1.12":return"SHA-384";case"1.2.840.113549.1.1.13":return"SHA-512";case"1.2.840.113549.1.1.14":return"SHA-224";case"1.2.840.113549.1.1.15":return"SHA512-224";case"1.2.840.113549.1.1.16":return"SHA512-256";case"1.2.840.10045.4.1":return"SHA-1";case"1.2.840.10045.4.3.1":return"SHA-224";case"1.2.840.10045.4.3.2":return"SHA-256";case"1.2.840.10045.4.3.3":return"SHA-384";case"1.2.840.10045.4.3.4":return"SHA-512";case"1.2.840.113549.1.1.10":{if(e=a,e=yn(r,e).index,r[e++]!==160)throw Ke("non-tag data",r);e=gi(r,e).index,e=yn(r,e).index;let{oid:o}=ss(r,e);switch(o){case"1.2.840.113549.2.5":return"MD5";case"1.3.14.3.2.26":return"SHA-1";case"2.16.840.1.101.3.4.2.1":return"SHA-256";case"2.16.840.1.101.3.4.2.2":return"SHA-384";case"2.16.840.1.101.3.4.2.3":return"SHA-512"}throw Ke("unknown hash OID "+o,r)}case"1.3.101.110":case"1.3.101.112":return"SHA-512";case"1.3.101.111":case"1.3.101.113":throw Ke("Ed448 certificate channel binding is not currently supported by Postgres")}throw Ke("unknown OID "+t,r)}cs.exports={signatureAlgorithmHashFromCertificate:gu}});var ps=w((Af,ds)=>{"use strict";var Ae=yi(),{signatureAlgorithmHashFromCertificate:Cu}=ls();function zu(r,e){let n=["SCRAM-SHA-256"];e&&n.unshift("SCRAM-SHA-256-PLUS");let i=n.find(o=>r.includes(o));if(!i)throw new Error("SASL: Only mechanism(s) "+n.join(" and ")+" are supported");if(i==="SCRAM-SHA-256-PLUS"&&typeof e.getPeerCertificate!="function")throw new Error("SASL: Mechanism SCRAM-SHA-256-PLUS requires a certificate");let t=Ae.randomBytes(18).toString("base64");return{mechanism:i,clientNonce:t,response:(i==="SCRAM-SHA-256-PLUS"?"p=tls-server-end-point":e?"y":"n")+",,n=*,r="+t,message:"SASLInitialResponse"}}async function Nu(r,e,n,i){if(r.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(e==="")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string");if(typeof n!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let t=wu(n);if(t.nonce.startsWith(r.clientNonce)){if(t.nonce.length===r.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");let a="n=*,r="+r.clientNonce,o="r="+t.nonce+",s="+t.salt+",i="+t.iteration,s=i?"eSws":"biws";if(r.mechanism==="SCRAM-SHA-256-PLUS"){let O=i.getPeerCertificate().raw,$=Cu(O);($==="MD5"||$==="SHA-1")&&($="SHA-256");let D=await Ae.hashByName($,O);s=Buffer.concat([Buffer.from("p=tls-server-end-point,,"),Buffer.from(D)]).toString("base64")}let c="c="+s+",r="+t.nonce,m=a+","+o+","+c,u=Buffer.from(t.salt,"base64"),p=await Ae.deriveKey(e,u,t.iteration),h=await Ae.hmacSha256(p,"Client Key"),z=await Ae.sha256(h),S=await Ae.hmacSha256(z,m),k=Tu(Buffer.from(h),Buffer.from(S)).toString("base64"),B=await Ae.hmacSha256(p,"Server Key"),_=await Ae.hmacSha256(B,m);r.message="SASLResponse",r.serverSignature=Buffer.from(_).toString("base64"),r.response=c+",p="+k}function bu(r,e){if(r.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:n}=Su(e);if(n!==r.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function ku(r){if(typeof r!="string")throw new TypeError("SASL: text must be a string");return r.split("").map((e,n)=>r.charCodeAt(n)).every(e=>e>=33&&e<=43||e>=45&&e<=126)}function ms(r){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(r)}function us(r){if(typeof r!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(r.split(",").map(e=>{if(!/^.=/.test(e))throw new Error("SASL: Invalid attribute pair entry");let n=e[0],i=e.substring(2);return[n,i]}))}function wu(r){let e=us(r),n=e.get("r");if(n){if(!ku(n))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let i=e.get("s");if(i){if(!ms(i))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let t=e.get("i");if(t){if(!/^[1-9][0-9]*$/.test(t))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let a=parseInt(t,10);return{nonce:n,salt:i,iteration:a}}function Su(r){let n=us(r).get("v");if(n){if(!ms(n))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:n}}function Tu(r,e){if(!Buffer.isBuffer(r))throw new TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(e))throw new TypeError("second argument must be a Buffer");if(r.length!==e.length)throw new Error("Buffer lengths must match");if(r.length===0)throw new Error("Buffers cannot be empty");return Buffer.from(r.map((n,i)=>r[i]^e[i]))}ds.exports={startSession:zu,continueSession:Nu,finalizeSession:bu}});var ur=w((xf,hs)=>{"use strict";var Au=fn();function mr(r){this._types=r||Au,this.text={},this.binary={}}mr.prototype.getOverrides=function(r){switch(r){case"text":return this.text;case"binary":return this.binary;default:return{}}};mr.prototype.setTypeParser=function(r,e,n){typeof e=="function"&&(n=e,e="text"),this.getOverrides(e)[r]=n};mr.prototype.getTypeParser=function(r,e){return e=e||"text",this.getOverrides(e)[r]||this._types.getTypeParser(r,e)};hs.exports=mr});var ys=w((_f,vs)=>{"use strict";function He(r,e={}){if(r.charAt(0)==="/"){let c=r.split(" ");return{host:c[0],database:c[1]}}let n={},i,t=!1;/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(r)&&(r=encodeURI(r).replace(/%25(\d\d)/g,"%$1"));try{try{i=new URL(r,"postgres://base")}catch{i=new URL(r.replace("@/","@___DUMMY___/"),"postgres://base"),t=!0}}catch(c){c.input&&(c.input="*****REDACTED*****")}for(let c of i.searchParams.entries())n[c[0]]=c[1];if(n.user=n.user||decodeURIComponent(i.username),n.password=n.password||decodeURIComponent(i.password),i.protocol=="socket:")return n.host=decodeURI(i.pathname),n.database=i.searchParams.get("db"),n.client_encoding=i.searchParams.get("encoding"),n;let a=t?"":i.hostname;n.host?a&&/^%2f/i.test(a)&&(i.pathname=a+i.pathname):n.host=decodeURIComponent(a),n.port||(n.port=i.port);let o=i.pathname.slice(1)||null;n.database=o?decodeURI(o):null,(n.ssl==="true"||n.ssl==="1")&&(n.ssl=!0),n.ssl==="0"&&(n.ssl=!1),(n.sslcert||n.sslkey||n.sslrootcert||n.sslmode)&&(n.ssl={});let s=n.sslcert||n.sslkey||n.sslrootcert?require("fs"):null;if(n.sslcert&&(n.ssl.cert=s.readFileSync(n.sslcert).toString()),n.sslkey&&(n.ssl.key=s.readFileSync(n.sslkey).toString()),n.sslrootcert&&(n.ssl.ca=s.readFileSync(n.sslrootcert).toString()),e.useLibpqCompat&&n.uselibpqcompat)throw new Error("Both useLibpqCompat and uselibpqcompat are set. Please use only one of them.");if(n.uselibpqcompat==="true"||e.useLibpqCompat)switch(n.sslmode){case"disable":{n.ssl=!1;break}case"prefer":{n.ssl.rejectUnauthorized=!1;break}case"require":{n.sslrootcert?n.ssl.checkServerIdentity=function(){}:n.ssl.rejectUnauthorized=!1;break}case"verify-ca":{if(!n.ssl.ca)throw new Error("SECURITY WARNING: Using sslmode=verify-ca requires specifying a CA with sslrootcert. If a public CA is used, verify-ca allows connections to a server that somebody else may have registered with the CA, making you vulnerable to Man-in-the-Middle attacks. Either specify a custom CA certificate with sslrootcert parameter or use sslmode=verify-full for proper security.");n.ssl.checkServerIdentity=function(){};break}case"verify-full":break}else switch(n.sslmode){case"disable":{n.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{n.ssl.rejectUnauthorized=!1;break}}return n}function xu(r){return Object.entries(r).reduce((n,[i,t])=>(t!=null&&(n[i]=t),n),{})}function fs(r){return Object.entries(r).reduce((n,[i,t])=>{if(i==="ssl"){let a=t;typeof a=="boolean"&&(n[i]=a),typeof a=="object"&&(n[i]=xu(a))}else if(t!=null)if(i==="port"){if(t!==""){let a=parseInt(t,10);if(isNaN(a))throw new Error(`Invalid ${i}: ${t}`);n[i]=a}}else n[i]=t;return n},{})}function _u(r){return fs(He(r))}vs.exports=He;He.parse=He;He.toClientConfig=fs;He.parseIntoClientConfig=_u});var zi=w((Ef,zs)=>{"use strict";var Eu=require("dns"),Cs=vn(),gs=ys().parse,Z=function(r,e,n){return n===void 0?n=process.env["PG"+r.toUpperCase()]:n===!1||(n=process.env[n]),e[r]||n||Cs[r]},Pu=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return Cs.ssl},Ye=function(r){return"'"+(""+r).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},ue=function(r,e,n){let i=e[n];i!=null&&r.push(n+"="+Ye(i))},Ci=class{constructor(e){e=typeof e=="string"?gs(e):e||{},e.connectionString&&(e=Object.assign({},e,gs(e.connectionString))),this.user=Z("user",e),this.database=Z("database",e),this.database===void 0&&(this.database=this.user),this.port=parseInt(Z("port",e),10),this.host=Z("host",e),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:Z("password",e)}),this.binary=Z("binary",e),this.options=Z("options",e),this.ssl=typeof e.ssl>"u"?Pu():e.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=Z("client_encoding",e),this.replication=Z("replication",e),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=Z("application_name",e,"PGAPPNAME"),this.fallback_application_name=Z("fallback_application_name",e,!1),this.statement_timeout=Z("statement_timeout",e,!1),this.lock_timeout=Z("lock_timeout",e,!1),this.idle_in_transaction_session_timeout=Z("idle_in_transaction_session_timeout",e,!1),this.query_timeout=Z("query_timeout",e,!1),e.connectionTimeoutMillis===void 0?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(e.connectionTimeoutMillis/1e3),e.keepAlive===!1?this.keepalives=0:e.keepAlive===!0&&(this.keepalives=1),typeof e.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(e.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(e){let n=[];ue(n,this,"user"),ue(n,this,"password"),ue(n,this,"port"),ue(n,this,"application_name"),ue(n,this,"fallback_application_name"),ue(n,this,"connect_timeout"),ue(n,this,"options");let i=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(ue(n,i,"sslmode"),ue(n,i,"sslca"),ue(n,i,"sslkey"),ue(n,i,"sslcert"),ue(n,i,"sslrootcert"),this.database&&n.push("dbname="+Ye(this.database)),this.replication&&n.push("replication="+Ye(this.replication)),this.host&&n.push("host="+Ye(this.host)),this.isDomainSocket)return e(null,n.join(" "));this.client_encoding&&n.push("client_encoding="+Ye(this.client_encoding)),Eu.lookup(this.host,function(t,a){return t?e(t,null):(n.push("hostaddr="+Ye(a)),e(null,n.join(" ")))})}};zs.exports=Ci});var bi=w((Pf,bs)=>{"use strict";var Iu=fn(),Ns=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,Ni=class{constructor(e,n){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=n,this.RowCtor=null,this.rowAsArray=e==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray),this._prebuiltEmptyResultObject=null}addCommandComplete(e){let n;e.text?n=Ns.exec(e.text):n=Ns.exec(e.command),n&&(this.command=n[1],n[3]?(this.oid=parseInt(n[2],10),this.rowCount=parseInt(n[3],10)):n[2]&&(this.rowCount=parseInt(n[2],10)))}_parseRowAsArray(e){let n=new Array(e.length);for(let i=0,t=e.length;i<t;i++){let a=e[i];a!==null?n[i]=this._parsers[i](a):n[i]=null}return n}parseRow(e){let n={...this._prebuiltEmptyResultObject};for(let i=0,t=e.length;i<t;i++){let a=e[i],o=this.fields[i].name;if(a!==null){let s=this.fields[i].format==="binary"?Buffer.from(a):a;n[o]=this._parsers[i](s)}else n[o]=null}return n}addRow(e){this.rows.push(e)}addFields(e){this.fields=e,this.fields.length&&(this._parsers=new Array(e.length));let n={};for(let i=0;i<e.length;i++){let t=e[i];n[t.name]=null,this._types?this._parsers[i]=this._types.getTypeParser(t.dataTypeID,t.format||"text"):this._parsers[i]=Iu.getTypeParser(t.dataTypeID,t.format||"text")}this._prebuiltEmptyResultObject={...n}}};bs.exports=Ni});var Ts=w((If,Ss)=>{"use strict";var{EventEmitter:Mu}=require("events"),ks=bi(),ws=Ue(),ki=class extends Mu{constructor(e,n,i){super(),e=ws.normalizeQueryConfig(e,n,i),this.text=e.text,this.values=e.values,this.rows=e.rows,this.types=e.types,this.name=e.name,this.queryMode=e.queryMode,this.binary=e.binary,this.portal=e.portal||"",this.callback=e.callback,this._rowMode=e.rowMode,process.domain&&e.callback&&(this.callback=process.domain.bind(e.callback)),this._result=new ks(this._rowMode,this.types),this._results=this._result,this._canceledDueToError=!1}requiresPreparation(){return this.queryMode==="extended"||this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new ks(this._rowMode,this._result._types),this._results.push(this._result))}handleRowDescription(e){this._checkForMultirow(),this._result.addFields(e.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(e){let n;if(!this._canceledDueToError){try{n=this._result.parseRow(e.fields)}catch(i){this._canceledDueToError=i;return}this.emit("row",n,this._result),this._accumulateRows&&this._result.addRow(n)}}handleCommandComplete(e,n){this._checkForMultirow(),this._result.addCommandComplete(e),this.rows&&n.sync()}handleEmptyQuery(e){this.rows&&e.sync()}handleError(e,n){if(this._canceledDueToError&&(e=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(e);this.emit("error",e)}handleReadyForQuery(e){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,e);if(this.callback)try{this.callback(null,this._results)}catch(n){process.nextTick(()=>{throw n})}this.emit("end",this._results)}submit(e){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let n=e.parsedStatements[this.name];if(this.text&&n&&this.text!==n)return new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);if(this.values&&!Array.isArray(this.values))return new Error("Query values must be an array");if(this.requiresPreparation()){e.stream.cork&&e.stream.cork();try{this.prepare(e)}finally{e.stream.uncork&&e.stream.uncork()}}else e.query(this.text);return null}hasBeenParsed(e){return this.name&&e.parsedStatements[this.name]}handlePortalSuspended(e){this._getRows(e,this.rows)}_getRows(e,n){e.execute({portal:this.portal,rows:n}),n?e.flush():e.sync()}prepare(e){this.hasBeenParsed(e)||e.parse({text:this.text,name:this.name,types:this.types});try{e.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:ws.prepareValue})}catch(n){this.handleError(n,e);return}e.describe({type:"P",name:this.portal||""}),this._getRows(e,this.rows)}handleCopyInResponse(e){e.sendCopyFail("No source stream defined")}handleCopyData(e,n){}};Ss.exports=ki});var Oi=w(b=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.NoticeMessage=b.DataRowMessage=b.CommandCompleteMessage=b.ReadyForQueryMessage=b.NotificationResponseMessage=b.BackendKeyDataMessage=b.AuthenticationMD5Password=b.ParameterStatusMessage=b.ParameterDescriptionMessage=b.RowDescriptionMessage=b.Field=b.CopyResponse=b.CopyDataMessage=b.DatabaseError=b.copyDone=b.emptyQuery=b.replicationStart=b.portalSuspended=b.noData=b.closeComplete=b.bindComplete=b.parseComplete=void 0;b.parseComplete={name:"parseComplete",length:5};b.bindComplete={name:"bindComplete",length:5};b.closeComplete={name:"closeComplete",length:5};b.noData={name:"noData",length:5};b.portalSuspended={name:"portalSuspended",length:5};b.replicationStart={name:"replicationStart",length:4};b.emptyQuery={name:"emptyQuery",length:4};b.copyDone={name:"copyDone",length:4};var wi=class extends Error{constructor(e,n,i){super(e),this.length=n,this.name=i}};b.DatabaseError=wi;var Si=class{constructor(e,n){this.length=e,this.chunk=n,this.name="copyData"}};b.CopyDataMessage=Si;var Ti=class{constructor(e,n,i,t){this.length=e,this.name=n,this.binary=i,this.columnTypes=new Array(t)}};b.CopyResponse=Ti;var Ai=class{constructor(e,n,i,t,a,o,s){this.name=e,this.tableID=n,this.columnID=i,this.dataTypeID=t,this.dataTypeSize=a,this.dataTypeModifier=o,this.format=s}};b.Field=Ai;var xi=class{constructor(e,n){this.length=e,this.fieldCount=n,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};b.RowDescriptionMessage=xi;var _i=class{constructor(e,n){this.length=e,this.parameterCount=n,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};b.ParameterDescriptionMessage=_i;var Ei=class{constructor(e,n,i){this.length=e,this.parameterName=n,this.parameterValue=i,this.name="parameterStatus"}};b.ParameterStatusMessage=Ei;var Pi=class{constructor(e,n){this.length=e,this.salt=n,this.name="authenticationMD5Password"}};b.AuthenticationMD5Password=Pi;var Ii=class{constructor(e,n,i){this.length=e,this.processID=n,this.secretKey=i,this.name="backendKeyData"}};b.BackendKeyDataMessage=Ii;var Mi=class{constructor(e,n,i,t){this.length=e,this.processId=n,this.channel=i,this.payload=t,this.name="notification"}};b.NotificationResponseMessage=Mi;var Di=class{constructor(e,n){this.length=e,this.status=n,this.name="readyForQuery"}};b.ReadyForQueryMessage=Di;var Bi=class{constructor(e,n){this.length=e,this.text=n,this.name="commandComplete"}};b.CommandCompleteMessage=Bi;var Ki=class{constructor(e,n){this.length=e,this.fields=n,this.name="dataRow",this.fieldCount=n.length}};b.DataRowMessage=Ki;var Li=class{constructor(e,n){this.length=e,this.message=n,this.name="notice"}};b.NoticeMessage=Li});var As=w(dr=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});dr.Writer=void 0;var qi=class{constructor(e=256){this.size=e,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(e)}ensure(e){if(this.buffer.length-this.offset<e){let i=this.buffer,t=i.length+(i.length>>1)+e;this.buffer=Buffer.allocUnsafe(t),i.copy(this.buffer)}}addInt32(e){return this.ensure(4),this.buffer[this.offset++]=e>>>24&255,this.buffer[this.offset++]=e>>>16&255,this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addInt16(e){return this.ensure(2),this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addCString(e){if(!e)this.ensure(1);else{let n=Buffer.byteLength(e);this.ensure(n+1),this.buffer.write(e,this.offset,"utf-8"),this.offset+=n}return this.buffer[this.offset++]=0,this}addString(e=""){let n=Buffer.byteLength(e);return this.ensure(n),this.buffer.write(e,this.offset),this.offset+=n,this}add(e){return this.ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this}join(e){if(e){this.buffer[this.headerPosition]=e;let n=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(n,this.headerPosition+1)}return this.buffer.slice(e?0:5,this.offset)}flush(e){let n=this.join(e);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),n}};dr.Writer=qi});var _s=w(hr=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});hr.serialize=void 0;var Ri=As(),L=new Ri.Writer,Du=r=>{L.addInt16(3).addInt16(0);for(let i of Object.keys(r))L.addCString(i).addCString(r[i]);L.addCString("client_encoding").addCString("UTF8");let e=L.addCString("").flush(),n=e.length+4;return new Ri.Writer().addInt32(n).add(e).flush()},Bu=()=>{let r=Buffer.allocUnsafe(8);return r.writeInt32BE(8,0),r.writeInt32BE(80877103,4),r},Ku=r=>L.addCString(r).flush(112),Lu=function(r,e){return L.addCString(r).addInt32(Buffer.byteLength(e)).addString(e),L.flush(112)},Ou=function(r){return L.addString(r).flush(112)},qu=r=>L.addCString(r).flush(81),xs=[],Ru=r=>{let e=r.name||"";e.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",e,e.length),console.error("This can cause conflicts and silent errors executing queries"));let n=r.types||xs,i=n.length,t=L.addCString(e).addCString(r.text).addInt16(i);for(let a=0;a<i;a++)t.addInt32(n[a]);return L.flush(80)},We=new Ri.Writer,$u=function(r,e){for(let n=0;n<r.length;n++){let i=e?e(r[n],n):r[n];i==null?(L.addInt16(0),We.addInt32(-1)):i instanceof Buffer?(L.addInt16(1),We.addInt32(i.length),We.add(i)):(L.addInt16(0),We.addInt32(Buffer.byteLength(i)),We.addString(i))}},Qu=(r={})=>{let e=r.portal||"",n=r.statement||"",i=r.binary||!1,t=r.values||xs,a=t.length;return L.addCString(e).addCString(n),L.addInt16(a),$u(t,r.valueMapper),L.addInt16(a),L.add(We.flush()),L.addInt16(1),L.addInt16(i?1:0),L.flush(66)},Fu=Buffer.from([69,0,0,0,9,0,0,0,0,0]),ju=r=>{if(!r||!r.portal&&!r.rows)return Fu;let e=r.portal||"",n=r.rows||0,i=Buffer.byteLength(e),t=4+i+1+4,a=Buffer.allocUnsafe(1+t);return a[0]=69,a.writeInt32BE(t,1),a.write(e,5,"utf-8"),a[i+5]=0,a.writeUInt32BE(n,a.length-4),a},Vu=(r,e)=>{let n=Buffer.allocUnsafe(16);return n.writeInt32BE(16,0),n.writeInt16BE(1234,4),n.writeInt16BE(5678,6),n.writeInt32BE(r,8),n.writeInt32BE(e,12),n},$i=(r,e)=>{let i=4+Buffer.byteLength(e)+1,t=Buffer.allocUnsafe(1+i);return t[0]=r,t.writeInt32BE(i,1),t.write(e,5,"utf-8"),t[i]=0,t},Uu=L.addCString("P").flush(68),Gu=L.addCString("S").flush(68),Hu=r=>r.name?$i(68,`${r.type}${r.name||""}`):r.type==="P"?Uu:Gu,Yu=r=>{let e=`${r.type}${r.name||""}`;return $i(67,e)},Wu=r=>L.add(r).flush(100),Ju=r=>$i(102,r),pr=r=>Buffer.from([r,0,0,0,4]),Xu=pr(72),Zu=pr(83),ed=pr(88),nd=pr(99),rd={startup:Du,password:Ku,requestSsl:Bu,sendSASLInitialResponseMessage:Lu,sendSCRAMClientFinalMessage:Ou,query:qu,parse:Ru,bind:Qu,execute:ju,describe:Hu,close:Yu,flush:()=>Xu,sync:()=>Zu,end:()=>ed,copyData:Wu,copyDone:()=>nd,copyFail:Ju,cancel:Vu};hr.serialize=rd});var Es=w(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.BufferReader=void 0;var id=Buffer.allocUnsafe(0),Qi=class{constructor(e=0){this.offset=e,this.buffer=id,this.encoding="utf-8"}setBuffer(e,n){this.offset=e,this.buffer=n}int16(){let e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}byte(){let e=this.buffer[this.offset];return this.offset++,e}int32(){let e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}uint32(){let e=this.buffer.readUInt32BE(this.offset);return this.offset+=4,e}string(e){let n=this.buffer.toString(this.encoding,this.offset,this.offset+e);return this.offset+=e,n}cstring(){let e=this.offset,n=e;for(;this.buffer[n++]!==0;);return this.offset=n,this.buffer.toString(this.encoding,e,n-1)}bytes(e){let n=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,n}};fr.BufferReader=Qi});var Ms=w(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});vr.Parser=void 0;var R=Oi(),td=Es(),Fi=1,ad=4,Ps=Fi+ad,Is=Buffer.allocUnsafe(0),ji=class{constructor(e){if(this.buffer=Is,this.bufferLength=0,this.bufferOffset=0,this.reader=new td.BufferReader,e?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=e?.mode||"text"}parse(e,n){this.mergeBuffer(e);let i=this.bufferOffset+this.bufferLength,t=this.bufferOffset;for(;t+Ps<=i;){let a=this.buffer[t],o=this.buffer.readUInt32BE(t+Fi),s=Fi+o;if(s+t<=i){let c=this.handlePacket(t+Ps,a,o,this.buffer);n(c),t+=s}else break}t===i?(this.buffer=Is,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=i-t,this.bufferOffset=t)}mergeBuffer(e){if(this.bufferLength>0){let n=this.bufferLength+e.byteLength;if(n+this.bufferOffset>this.buffer.byteLength){let t;if(n<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)t=this.buffer;else{let a=this.buffer.byteLength*2;for(;n>=a;)a*=2;t=Buffer.allocUnsafe(a)}this.buffer.copy(t,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=t,this.bufferOffset=0}e.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=n}else this.buffer=e,this.bufferOffset=0,this.bufferLength=e.byteLength}handlePacket(e,n,i,t){switch(n){case 50:return R.bindComplete;case 49:return R.parseComplete;case 51:return R.closeComplete;case 110:return R.noData;case 115:return R.portalSuspended;case 99:return R.copyDone;case 87:return R.replicationStart;case 73:return R.emptyQuery;case 68:return this.parseDataRowMessage(e,i,t);case 67:return this.parseCommandCompleteMessage(e,i,t);case 90:return this.parseReadyForQueryMessage(e,i,t);case 65:return this.parseNotificationMessage(e,i,t);case 82:return this.parseAuthenticationResponse(e,i,t);case 83:return this.parseParameterStatusMessage(e,i,t);case 75:return this.parseBackendKeyData(e,i,t);case 69:return this.parseErrorMessage(e,i,t,"error");case 78:return this.parseErrorMessage(e,i,t,"notice");case 84:return this.parseRowDescriptionMessage(e,i,t);case 116:return this.parseParameterDescriptionMessage(e,i,t);case 71:return this.parseCopyInMessage(e,i,t);case 72:return this.parseCopyOutMessage(e,i,t);case 100:return this.parseCopyData(e,i,t);default:return new R.DatabaseError("received invalid response: "+n.toString(16),i,"error")}}parseReadyForQueryMessage(e,n,i){this.reader.setBuffer(e,i);let t=this.reader.string(1);return new R.ReadyForQueryMessage(n,t)}parseCommandCompleteMessage(e,n,i){this.reader.setBuffer(e,i);let t=this.reader.cstring();return new R.CommandCompleteMessage(n,t)}parseCopyData(e,n,i){let t=i.slice(e,e+(n-4));return new R.CopyDataMessage(n,t)}parseCopyInMessage(e,n,i){return this.parseCopyMessage(e,n,i,"copyInResponse")}parseCopyOutMessage(e,n,i){return this.parseCopyMessage(e,n,i,"copyOutResponse")}parseCopyMessage(e,n,i,t){this.reader.setBuffer(e,i);let a=this.reader.byte()!==0,o=this.reader.int16(),s=new R.CopyResponse(n,t,a,o);for(let c=0;c<o;c++)s.columnTypes[c]=this.reader.int16();return s}parseNotificationMessage(e,n,i){this.reader.setBuffer(e,i);let t=this.reader.int32(),a=this.reader.cstring(),o=this.reader.cstring();return new R.NotificationResponseMessage(n,t,a,o)}parseRowDescriptionMessage(e,n,i){this.reader.setBuffer(e,i);let t=this.reader.int16(),a=new R.RowDescriptionMessage(n,t);for(let o=0;o<t;o++)a.fields[o]=this.parseField();return a}parseField(){let e=this.reader.cstring(),n=this.reader.uint32(),i=this.reader.int16(),t=this.reader.uint32(),a=this.reader.int16(),o=this.reader.int32(),s=this.reader.int16()===0?"text":"binary";return new R.Field(e,n,i,t,a,o,s)}parseParameterDescriptionMessage(e,n,i){this.reader.setBuffer(e,i);let t=this.reader.int16(),a=new R.ParameterDescriptionMessage(n,t);for(let o=0;o<t;o++)a.dataTypeIDs[o]=this.reader.int32();return a}parseDataRowMessage(e,n,i){this.reader.setBuffer(e,i);let t=this.reader.int16(),a=new Array(t);for(let o=0;o<t;o++){let s=this.reader.int32();a[o]=s===-1?null:this.reader.string(s)}return new R.DataRowMessage(n,a)}parseParameterStatusMessage(e,n,i){this.reader.setBuffer(e,i);let t=this.reader.cstring(),a=this.reader.cstring();return new R.ParameterStatusMessage(n,t,a)}parseBackendKeyData(e,n,i){this.reader.setBuffer(e,i);let t=this.reader.int32(),a=this.reader.int32();return new R.BackendKeyDataMessage(n,t,a)}parseAuthenticationResponse(e,n,i){this.reader.setBuffer(e,i);let t=this.reader.int32(),a={name:"authenticationOk",length:n};switch(t){case 0:break;case 3:a.length===8&&(a.name="authenticationCleartextPassword");break;case 5:if(a.length===12){a.name="authenticationMD5Password";let o=this.reader.bytes(4);return new R.AuthenticationMD5Password(n,o)}break;case 10:{a.name="authenticationSASL",a.mechanisms=[];let o;do o=this.reader.cstring(),o&&a.mechanisms.push(o);while(o)}break;case 11:a.name="authenticationSASLContinue",a.data=this.reader.string(n-8);break;case 12:a.name="authenticationSASLFinal",a.data=this.reader.string(n-8);break;default:throw new Error("Unknown authenticationOk message type "+t)}return a}parseErrorMessage(e,n,i,t){this.reader.setBuffer(e,i);let a={},o=this.reader.string(1);for(;o!=="\0";)a[o]=this.reader.cstring(),o=this.reader.string(1);let s=a.M,c=t==="notice"?new R.NoticeMessage(n,s):new R.DatabaseError(s,n,t);return c.severity=a.S,c.code=a.C,c.detail=a.D,c.hint=a.H,c.position=a.P,c.internalPosition=a.p,c.internalQuery=a.q,c.where=a.W,c.schema=a.s,c.table=a.t,c.column=a.c,c.dataType=a.d,c.constraint=a.n,c.file=a.F,c.line=a.L,c.routine=a.R,c}};vr.Parser=ji});var Vi=w(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.DatabaseError=xe.serialize=xe.parse=void 0;var od=Oi();Object.defineProperty(xe,"DatabaseError",{enumerable:!0,get:function(){return od.DatabaseError}});var sd=_s();Object.defineProperty(xe,"serialize",{enumerable:!0,get:function(){return sd.serialize}});var cd=Ms();function ld(r,e){let n=new cd.Parser;return r.on("data",i=>n.parse(i,e)),new Promise(i=>r.on("end",()=>i()))}xe.parse=ld});var Ds=w(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});Ui.default={}});var Ks=w((Rf,Bs)=>{var{getStream:md,getSecureStream:ud}=fd();Bs.exports={getStream:md,getSecureStream:ud};function dd(){function r(n){let i=require("net");return new i.Socket}function e(n){return require("tls").connect(n)}return{getStream:r,getSecureStream:e}}function pd(){function r(n){let{CloudflareSocket:i}=Ds();return new i(n)}function e(n){return n.socket.startTls(n),n.socket}return{getStream:r,getSecureStream:e}}function hd(){if(typeof navigator=="object"&&navigator!==null&&typeof navigator.userAgent=="string")return navigator.userAgent==="Cloudflare-Workers";if(typeof Response=="function"){let r=new Response(null,{cf:{thing:!0}});if(typeof r.cf=="object"&&r.cf!==null&&r.cf.thing)return!0}return!1}function fd(){return hd()?pd():dd()}});var Hi=w(($f,Ls)=>{"use strict";var vd=require("events").EventEmitter,{parse:yd,serialize:U}=Vi(),{getStream:gd,getSecureStream:Cd}=Ks(),zd=U.flush(),Nd=U.sync(),bd=U.end(),Gi=class extends vd{constructor(e){super(),e=e||{},this.stream=e.stream||gd(e.ssl),typeof this.stream=="function"&&(this.stream=this.stream(e)),this._keepAlive=e.keepAlive,this._keepAliveInitialDelayMillis=e.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=e.ssl||!1,this._ending=!1,this._emitMessage=!1;let n=this;this.on("newListener",function(i){i==="message"&&(n._emitMessage=!0)})}connect(e,n){let i=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(e,n),this.stream.once("connect",function(){i._keepAlive&&i.stream.setKeepAlive(!0,i._keepAliveInitialDelayMillis),i.emit("connect")});let t=function(a){i._ending&&(a.code==="ECONNRESET"||a.code==="EPIPE")||i.emit("error",a)};if(this.stream.on("error",t),this.stream.on("close",function(){i.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(a){switch(a.toString("utf8")){case"S":break;case"N":return i.stream.end(),i.emit("error",new Error("The server does not support SSL connections"));default:return i.stream.end(),i.emit("error",new Error("There was an error establishing an SSL connection"))}let s={socket:i.stream};i.ssl!==!0&&(Object.assign(s,i.ssl),"key"in i.ssl&&(s.key=i.ssl.key));let c=require("net");c.isIP&&c.isIP(n)===0&&(s.servername=n);try{i.stream=Cd(s)}catch(m){return i.emit("error",m)}i.attachListeners(i.stream),i.stream.on("error",t),i.emit("sslconnect")})}attachListeners(e){yd(e,n=>{let i=n.name==="error"?"errorMessage":n.name;this._emitMessage&&this.emit("message",n),this.emit(i,n)})}requestSsl(){this.stream.write(U.requestSsl())}startup(e){this.stream.write(U.startup(e))}cancel(e,n){this._send(U.cancel(e,n))}password(e){this._send(U.password(e))}sendSASLInitialResponseMessage(e,n){this._send(U.sendSASLInitialResponseMessage(e,n))}sendSCRAMClientFinalMessage(e){this._send(U.sendSCRAMClientFinalMessage(e))}_send(e){return this.stream.writable?this.stream.write(e):!1}query(e){this._send(U.query(e))}parse(e){this._send(U.parse(e))}bind(e){this._send(U.bind(e))}execute(e){this._send(U.execute(e))}flush(){this.stream.writable&&this.stream.write(zd)}sync(){this._ending=!0,this._send(Nd)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(bd,()=>{this.stream.end()})}close(e){this._send(U.close(e))}describe(e){this._send(U.describe(e))}sendCopyFromChunk(e){this._send(U.copyData(e))}endCopyFrom(){this._send(U.copyDone())}sendCopyFail(e){this._send(U.copyFail(e))}};Ls.exports=Gi});var $s=w((Qf,Rs)=>{"use strict";var{Transform:kd}=require("stream"),{StringDecoder:wd}=require("string_decoder"),_e=Symbol("last"),yr=Symbol("decoder");function Sd(r,e,n){let i;if(this.overflow){if(i=this[yr].write(r).split(this.matcher),i.length===1)return n();i.shift(),this.overflow=!1}else this[_e]+=this[yr].write(r),i=this[_e].split(this.matcher);this[_e]=i.pop();for(let t=0;t<i.length;t++)try{qs(this,this.mapper(i[t]))}catch(a){return n(a)}if(this.overflow=this[_e].length>this.maxLength,this.overflow&&!this.skipOverflow){n(new Error("maximum buffer reached"));return}n()}function Td(r){if(this[_e]+=this[yr].end(),this[_e])try{qs(this,this.mapper(this[_e]))}catch(e){return r(e)}r()}function qs(r,e){e!==void 0&&r.push(e)}function Os(r){return r}function Ad(r,e,n){switch(r=r||/\r?\n/,e=e||Os,n=n||{},arguments.length){case 1:typeof r=="function"?(e=r,r=/\r?\n/):typeof r=="object"&&!(r instanceof RegExp)&&!r[Symbol.split]&&(n=r,r=/\r?\n/);break;case 2:typeof r=="function"?(n=e,e=r,r=/\r?\n/):typeof e=="object"&&(n=e,e=Os)}n=Object.assign({},n),n.autoDestroy=!0,n.transform=Sd,n.flush=Td,n.readableObjectMode=!0;let i=new kd(n);return i[_e]="",i[yr]=new wd("utf8"),i.matcher=r,i.mapper=e,i.maxLength=n.maxLength,i.skipOverflow=n.skipOverflow||!1,i.overflow=!1,i._destroy=function(t,a){this._writableState.errorEmitted=!1,a(t)},i}Rs.exports=Ad});var js=w((Ff,ze)=>{"use strict";var Qs=require("path"),xd=require("stream").Stream,_d=$s(),Fs=require("util"),Ed=5432,gr=process.platform==="win32",gn=process.stderr,Pd=56,Id=7,Md=61440,Dd=32768;function Bd(r){return(r&Md)==Dd}var Je=["host","port","database","user","password"],Yi=Je.length,Kd=Je[Yi-1];function Wi(){var r=gn instanceof xd&&gn.writable===!0;if(r){var e=Array.prototype.slice.call(arguments).concat(`
`);gn.write(Fs.format.apply(Fs,e))}}Object.defineProperty(ze.exports,"isWin",{get:function(){return gr},set:function(r){gr=r}});ze.exports.warnTo=function(r){var e=gn;return gn=r,e};ze.exports.getFileName=function(r){var e=r||process.env,n=e.PGPASSFILE||(gr?Qs.join(e.APPDATA||"./","postgresql","pgpass.conf"):Qs.join(e.HOME||"./",".pgpass"));return n};ze.exports.usePgPass=function(r,e){return Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD")?!1:gr?!0:(e=e||"<unkn>",Bd(r.mode)?r.mode&(Pd|Id)?(Wi('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',e),!1):!0:(Wi('WARNING: password file "%s" is not a plain file',e),!1))};var Ld=ze.exports.match=function(r,e){return Je.slice(0,-1).reduce(function(n,i,t){return t==1&&Number(r[i]||Ed)===Number(e[i])?n&&!0:n&&(e[i]==="*"||e[i]===r[i])},!0)};ze.exports.getPassword=function(r,e,n){var i,t=e.pipe(_d());function a(c){var m=Od(c);m&&qd(m)&&Ld(r,m)&&(i=m[Kd],t.end())}var o=function(){e.destroy(),n(i)},s=function(c){e.destroy(),Wi("WARNING: error on reading file: %s",c),n(void 0)};e.on("error",s),t.on("data",a).on("end",o).on("error",s)};var Od=ze.exports.parseLine=function(r){if(r.length<11||r.match(/^\s+#/))return null;for(var e="",n="",i=0,t=0,a=0,o={},s=!1,c=function(u,p,h){var z=r.substring(p,h);Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE")||(z=z.replace(/\\([:\\])/g,"$1")),o[Je[u]]=z},m=0;m<r.length-1;m+=1){if(e=r.charAt(m+1),n=r.charAt(m),s=i==Yi-1,s){c(i,t);break}m>=0&&e==":"&&n!=="\\"&&(c(i,t,m+1),t=m+2,i+=1)}return o=Object.keys(o).length===Yi?o:null,o},qd=ze.exports.isValidEntry=function(r){for(var e={0:function(o){return o.length>0},1:function(o){return o==="*"?!0:(o=Number(o),isFinite(o)&&o>0&&o<9007199254740992&&Math.floor(o)===o)},2:function(o){return o.length>0},3:function(o){return o.length>0},4:function(o){return o.length>0}},n=0;n<Je.length;n+=1){var i=e[n],t=r[Je[n]]||"",a=i(t);if(!a)return!1}return!0}});var Us=w((Vf,Ji)=>{"use strict";var jf=require("path"),Vs=require("fs"),Cr=js();Ji.exports=function(r,e){var n=Cr.getFileName();Vs.stat(n,function(i,t){if(i||!Cr.usePgPass(t,n))return e(void 0);var a=Vs.createReadStream(n);Cr.getPassword(r,a,e)})};Ji.exports.warnTo=Cr.warnTo});var Ws=w((Uf,Ys)=>{"use strict";var Rd=require("events").EventEmitter,Gs=Ue(),Xi=ps(),$d=ur(),Qd=zi(),Hs=Ts(),Fd=vn(),jd=Hi(),Vd=yi(),zr=class extends Rd{constructor(e){super(),this.connectionParameters=new Qd(e),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;let n=e||{};this._Promise=n.Promise||global.Promise,this._types=new $d(n.types),this._ending=!1,this._ended=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.enableChannelBinding=!!n.enableChannelBinding,this.connection=n.connection||new jd({stream:n.stream,ssl:this.connectionParameters.ssl,keepAlive:n.keepAlive||!1,keepAliveInitialDelayMillis:n.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=n.binary||Fd.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=n.connectionTimeoutMillis||0}_errorAllQueries(e){let n=i=>{process.nextTick(()=>{i.handleError(e,this.connection)})};this.activeQuery&&(n(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(n),this.queryQueue.length=0}_connect(e){let n=this,i=this.connection;if(this._connectionCallback=e,this._connecting||this._connected){let t=new Error("Client has already been connected. You cannot reuse a client.");process.nextTick(()=>{e(t)});return}this._connecting=!0,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{i._ending=!0,i.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis),this.connectionTimeoutHandle.unref&&this.connectionTimeoutHandle.unref()),this.host&&this.host.indexOf("/")===0?i.connect(this.host+"/.s.PGSQL."+this.port):i.connect(this.port,this.host),i.on("connect",function(){n.ssl?i.requestSsl():i.startup(n.getStartupConf())}),i.on("sslconnect",function(){i.startup(n.getStartupConf())}),this._attachListeners(i),i.once("end",()=>{let t=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(t),this._ended=!0,this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(t):this._handleErrorEvent(t):this._connectionError||this._handleErrorEvent(t)),process.nextTick(()=>{this.emit("end")})})}connect(e){if(e){this._connect(e);return}return new this._Promise((n,i)=>{this._connect(t=>{t?i(t):n()})})}_attachListeners(e){e.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),e.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),e.on("authenticationSASL",this._handleAuthSASL.bind(this)),e.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),e.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),e.on("backendKeyData",this._handleBackendKeyData.bind(this)),e.on("error",this._handleErrorEvent.bind(this)),e.on("errorMessage",this._handleErrorMessage.bind(this)),e.on("readyForQuery",this._handleReadyForQuery.bind(this)),e.on("notice",this._handleNotice.bind(this)),e.on("rowDescription",this._handleRowDescription.bind(this)),e.on("dataRow",this._handleDataRow.bind(this)),e.on("portalSuspended",this._handlePortalSuspended.bind(this)),e.on("emptyQuery",this._handleEmptyQuery.bind(this)),e.on("commandComplete",this._handleCommandComplete.bind(this)),e.on("parseComplete",this._handleParseComplete.bind(this)),e.on("copyInResponse",this._handleCopyInResponse.bind(this)),e.on("copyData",this._handleCopyData.bind(this)),e.on("notification",this._handleNotification.bind(this))}_checkPgPass(e){let n=this.connection;if(typeof this.password=="function")this._Promise.resolve().then(()=>this.password()).then(i=>{if(i!==void 0){if(typeof i!="string"){n.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=i}else this.connectionParameters.password=this.password=null;e()}).catch(i=>{n.emit("error",i)});else if(this.password!==null)e();else try{Us()(this.connectionParameters,t=>{t!==void 0&&(this.connectionParameters.password=this.password=t),e()})}catch(i){this.emit("error",i)}}_handleAuthCleartextPassword(e){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(e){this._checkPgPass(async()=>{try{let n=await Vd.postgresMd5PasswordHash(this.user,this.password,e.salt);this.connection.password(n)}catch(n){this.emit("error",n)}})}_handleAuthSASL(e){this._checkPgPass(()=>{try{this.saslSession=Xi.startSession(e.mechanisms,this.enableChannelBinding&&this.connection.stream),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)}catch(n){this.connection.emit("error",n)}})}async _handleAuthSASLContinue(e){try{await Xi.continueSession(this.saslSession,this.password,e.data,this.enableChannelBinding&&this.connection.stream),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}catch(n){this.connection.emit("error",n)}}_handleAuthSASLFinal(e){try{Xi.finalizeSession(this.saslSession,e.data),this.saslSession=null}catch(n){this.connection.emit("error",n)}}_handleBackendKeyData(e){this.processID=e.processID,this.secretKey=e.secretKey}_handleReadyForQuery(e){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:n}=this;this.activeQuery=null,this.readyForQuery=!0,n&&n.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(e){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(e);this.emit("error",e)}}_handleErrorEvent(e){if(this._connecting)return this._handleErrorWhileConnecting(e);this._queryable=!1,this._errorAllQueries(e),this.emit("error",e)}_handleErrorMessage(e){if(this._connecting)return this._handleErrorWhileConnecting(e);let n=this.activeQuery;if(!n){this._handleErrorEvent(e);return}this.activeQuery=null,n.handleError(e,this.connection)}_handleRowDescription(e){this.activeQuery.handleRowDescription(e)}_handleDataRow(e){this.activeQuery.handleDataRow(e)}_handlePortalSuspended(e){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(e){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(e){if(this.activeQuery==null){let n=new Error("Received unexpected commandComplete message from backend.");this._handleErrorEvent(n);return}this.activeQuery.handleCommandComplete(e,this.connection)}_handleParseComplete(){if(this.activeQuery==null){let e=new Error("Received unexpected parseComplete message from backend.");this._handleErrorEvent(e);return}this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(e){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(e){this.activeQuery.handleCopyData(e,this.connection)}_handleNotification(e){this.emit("notification",e)}_handleNotice(e){this.emit("notice",e)}getStartupConf(){let e=this.connectionParameters,n={user:e.user,database:e.database},i=e.application_name||e.fallback_application_name;return i&&(n.application_name=i),e.replication&&(n.replication=""+e.replication),e.statement_timeout&&(n.statement_timeout=String(parseInt(e.statement_timeout,10))),e.lock_timeout&&(n.lock_timeout=String(parseInt(e.lock_timeout,10))),e.idle_in_transaction_session_timeout&&(n.idle_in_transaction_session_timeout=String(parseInt(e.idle_in_transaction_session_timeout,10))),e.options&&(n.options=e.options),n}cancel(e,n){if(e.activeQuery===n){let i=this.connection;this.host&&this.host.indexOf("/")===0?i.connect(this.host+"/.s.PGSQL."+this.port):i.connect(this.port,this.host),i.on("connect",function(){i.cancel(e.processID,e.secretKey)})}else e.queryQueue.indexOf(n)!==-1&&e.queryQueue.splice(e.queryQueue.indexOf(n),1)}setTypeParser(e,n,i){return this._types.setTypeParser(e,n,i)}getTypeParser(e,n){return this._types.getTypeParser(e,n)}escapeIdentifier(e){return Gs.escapeIdentifier(e)}escapeLiteral(e){return Gs.escapeLiteral(e)}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let e=this.activeQuery.submit(this.connection);e&&process.nextTick(()=>{this.activeQuery.handleError(e,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(e,n,i){let t,a,o,s,c;if(e==null)throw new TypeError("Client was passed a null or undefined query");return typeof e.submit=="function"?(o=e.query_timeout||this.connectionParameters.query_timeout,a=t=e,typeof n=="function"&&(t.callback=t.callback||n)):(o=e.query_timeout||this.connectionParameters.query_timeout,t=new Hs(e,n,i),t.callback||(a=new this._Promise((m,u)=>{t.callback=(p,h)=>p?u(p):m(h)}).catch(m=>{throw Error.captureStackTrace(m),m}))),o&&(c=t.callback,s=setTimeout(()=>{let m=new Error("Query read timeout");process.nextTick(()=>{t.handleError(m,this.connection)}),c(m),t.callback=()=>{};let u=this.queryQueue.indexOf(t);u>-1&&this.queryQueue.splice(u,1),this._pulseQueryQueue()},o),t.callback=(m,u)=>{clearTimeout(s),c(m,u)}),this.binary&&!t.binary&&(t.binary=!0),t._result&&!t._result._types&&(t._result._types=this._types),this._queryable?this._ending?(process.nextTick(()=>{t.handleError(new Error("Client was closed and is not queryable"),this.connection)}),a):(this.queryQueue.push(t),this._pulseQueryQueue(),a):(process.nextTick(()=>{t.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),a)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(e){if(this._ending=!0,!this.connection._connecting||this._ended)if(e)e();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),e)this.connection.once("end",e);else return new this._Promise(n=>{this.connection.once("end",n)})}};zr.Query=Hs;Ys.exports=zr});var ec=w((Gf,Zs)=>{"use strict";var Ud=require("events").EventEmitter,Js=function(){},Xs=(r,e)=>{let n=r.findIndex(e);return n===-1?void 0:r.splice(n,1)[0]},Zi=class{constructor(e,n,i){this.client=e,this.idleListener=n,this.timeoutId=i}},Xe=class{constructor(e){this.callback=e}};function Gd(){throw new Error("Release called on client which has already been released to the pool.")}function Nr(r,e){if(e)return{callback:e,result:void 0};let n,i,t=function(o,s){o?n(o):i(s)},a=new r(function(o,s){i=o,n=s}).catch(o=>{throw Error.captureStackTrace(o),o});return{callback:t,result:a}}function Hd(r,e){return function n(i){i.client=e,e.removeListener("error",n),e.on("error",()=>{r.log("additional client error after disconnection due to error",i)}),r._remove(e),r.emit("error",i,e)}}var et=class extends Ud{constructor(e,n){super(),this.options=Object.assign({},e),e!=null&&"password"in e&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),e!=null&&e.ssl&&e.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||n||nt().Client,this.Promise=this.options.Promise||global.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(n=>{this._remove(n.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let e=this._pendingQueue.shift();if(this._idle.length){let n=this._idle.pop();clearTimeout(n.timeoutId);let i=n.client;i.ref&&i.ref();let t=n.idleListener;return this._acquireClient(i,e,t,!1)}if(!this._isFull())return this.newClient(e);throw new Error("unexpected condition")}_remove(e,n){let i=Xs(this._idle,a=>a.client===e);i!==void 0&&clearTimeout(i.timeoutId),this._clients=this._clients.filter(a=>a!==e);let t=this;e.end(()=>{t.emit("remove",e),typeof n=="function"&&n()})}connect(e){if(this.ending){let t=new Error("Cannot use a pool after calling end on the pool");return e?e(t):this.Promise.reject(t)}let n=Nr(this.Promise,e),i=n.result;if(this._isFull()||this._idle.length){if(this._idle.length&&process.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new Xe(n.callback)),i;let t=(s,c,m)=>{clearTimeout(o),n.callback(s,c,m)},a=new Xe(t),o=setTimeout(()=>{Xs(this._pendingQueue,s=>s.callback===t),a.timedOut=!0,n.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return o.unref&&o.unref(),this._pendingQueue.push(a),i}return this.newClient(new Xe(n.callback)),i}newClient(e){let n=new this.Client(this.options);this._clients.push(n);let i=Hd(this,n);this.log("checking client timeout");let t,a=!1;this.options.connectionTimeoutMillis&&(t=setTimeout(()=>{this.log("ending client due to timeout"),a=!0,n.connection?n.connection.stream.destroy():n.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),n.connect(o=>{if(t&&clearTimeout(t),n.on("error",i),o)this.log("client failed to connect",o),this._clients=this._clients.filter(s=>s!==n),a&&(o=new Error("Connection terminated due to connection timeout",{cause:o})),this._pulseQueue(),e.timedOut||e.callback(o,void 0,Js);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let s=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(n),this._idle.findIndex(m=>m.client===n)!==-1&&this._acquireClient(n,new Xe((m,u,p)=>p()),i,!1)},this.options.maxLifetimeSeconds*1e3);s.unref(),n.once("end",()=>clearTimeout(s))}return this._acquireClient(n,e,i,!0)}})}_acquireClient(e,n,i,t){t&&this.emit("connect",e),this.emit("acquire",e),e.release=this._releaseOnce(e,i),e.removeListener("error",i),n.timedOut?t&&this.options.verify?this.options.verify(e,e.release):e.release():t&&this.options.verify?this.options.verify(e,a=>{if(a)return e.release(a),n.callback(a,void 0,Js);n.callback(void 0,e,e.release)}):n.callback(void 0,e,e.release)}_releaseOnce(e,n){let i=!1;return t=>{i&&Gd(),i=!0,this._release(e,n,t)}}_release(e,n,i){if(e.on("error",n),e._poolUseCount=(e._poolUseCount||0)+1,this.emit("release",i,e),i||this.ending||!e._queryable||e._ending||e._poolUseCount>=this.options.maxUses)return e._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(e,this._pulseQueue.bind(this));if(this._expired.has(e))return this.log("remove expired client"),this._expired.delete(e),this._remove(e,this._pulseQueue.bind(this));let a;this.options.idleTimeoutMillis&&this._isAboveMin()&&(a=setTimeout(()=>{this.log("remove idle client"),this._remove(e,this._pulseQueue.bind(this))},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&a.unref()),this.options.allowExitOnIdle&&e.unref(),this._idle.push(new Zi(e,n,a)),this._pulseQueue()}query(e,n,i){if(typeof e=="function"){let a=Nr(this.Promise,e);return setImmediate(function(){return a.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),a.result}typeof n=="function"&&(i=n,n=void 0);let t=Nr(this.Promise,i);return i=t.callback,this.connect((a,o)=>{if(a)return i(a);let s=!1,c=m=>{s||(s=!0,o.release(m),i(m))};o.once("error",c),this.log("dispatching query");try{o.query(e,n,(m,u)=>{if(this.log("query dispatched"),o.removeListener("error",c),!s)return s=!0,o.release(m),m?i(m):i(void 0,u)})}catch(m){return o.release(m),i(m)}}),t.result}end(e){if(this.log("ending"),this.ending){let i=new Error("Called end on pool more than once");return e?e(i):this.Promise.reject(i)}this.ending=!0;let n=Nr(this.Promise,e);return this._endCallback=n.callback,this._pulseQueue(),n.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((e,n)=>e+(this._expired.has(n)?1:0),0)}get totalCount(){return this._clients.length}};Zs.exports=et});var ic=w((Hf,rc)=>{"use strict";var nc=require("events").EventEmitter,Yd=require("util"),rt=Ue(),Ze=rc.exports=function(r,e,n){nc.call(this),r=rt.normalizeQueryConfig(r,e,n),this.text=r.text,this.values=r.values,this.name=r.name,this.queryMode=r.queryMode,this.callback=r.callback,this.state="new",this._arrayMode=r.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(i){i==="row"&&(this._emitRowEvents=!0)}.bind(this))};Yd.inherits(Ze,nc);var Wd={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};Ze.prototype.handleError=function(r){let e=this.native.pq.resultErrorFields();if(e)for(let n in e){let i=Wd[n]||n;r[i]=e[n]}this.callback?this.callback(r):this.emit("error",r),this.state="error"};Ze.prototype.then=function(r,e){return this._getPromise().then(r,e)};Ze.prototype.catch=function(r){return this._getPromise().catch(r)};Ze.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(r,e){this._once("end",r),this._once("error",e)}.bind(this)),this._promise)};Ze.prototype.submit=function(r){this.state="running";let e=this;this.native=r.native,r.native.arrayMode=this._arrayMode;let n=function(i,t,a){if(r.native.arrayMode=!1,setImmediate(function(){e.emit("_done")}),i)return e.handleError(i);e._emitRowEvents&&(a.length>1?t.forEach((o,s)=>{o.forEach(c=>{e.emit("row",c,a[s])})}):t.forEach(function(o){e.emit("row",o,a)})),e.state="end",e.emit("end",a),e.callback&&e.callback(null,a)};if(process.domain&&(n=process.domain.bind(n)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));let i=(this.values||[]).map(rt.prepareValue);if(r.namedQueries[this.name]){if(this.text&&r.namedQueries[this.name]!==this.text){let t=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return n(t)}return r.native.execute(this.name,i,n)}return r.native.prepare(this.name,this.text,i.length,function(t){return t?n(t):(r.namedQueries[e.name]=e.text,e.native.execute(e.name,i,n))})}else if(this.values){if(!Array.isArray(this.values)){let t=new Error("Query values must be an array");return n(t)}let i=this.values.map(rt.prepareValue);r.native.query(this.text,i,n)}else this.queryMode==="extended"?r.native.query(this.text,[],n):r.native.query(this.text,n)}});var cc=w((Yf,sc)=>{"use strict";var tc;try{tc=require("pg-native")}catch(r){throw r}var Jd=ur(),ac=require("events").EventEmitter,Xd=require("util"),Zd=zi(),oc=ic(),te=sc.exports=function(r){ac.call(this),r=r||{},this._Promise=r.Promise||global.Promise,this._types=new Jd(r.types),this.native=new tc({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;let e=this.connectionParameters=new Zd(r);r.nativeConnectionString&&(e.nativeConnectionString=r.nativeConnectionString),this.user=e.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),this.database=e.database,this.host=e.host,this.port=e.port,this.namedQueries={}};te.Query=oc;Xd.inherits(te,ac);te.prototype._errorAllQueries=function(r){let e=n=>{process.nextTick(()=>{n.native=this.native,n.handleError(r)})};this._hasActiveQuery()&&(e(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(e),this._queryQueue.length=0};te.prototype._connect=function(r){let e=this;if(this._connecting){process.nextTick(()=>r(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(n,i){if(e.connectionParameters.nativeConnectionString&&(i=e.connectionParameters.nativeConnectionString),n)return r(n);e.native.connect(i,function(t){if(t)return e.native.end(),r(t);e._connected=!0,e.native.on("error",function(a){e._queryable=!1,e._errorAllQueries(a),e.emit("error",a)}),e.native.on("notification",function(a){e.emit("notification",{channel:a.relname,payload:a.extra})}),e.emit("connect"),e._pulseQueryQueue(!0),r()})})};te.prototype.connect=function(r){if(r){this._connect(r);return}return new this._Promise((e,n)=>{this._connect(i=>{i?n(i):e()})})};te.prototype.query=function(r,e,n){let i,t,a,o,s;if(r==null)throw new TypeError("Client was passed a null or undefined query");if(typeof r.submit=="function")a=r.query_timeout||this.connectionParameters.query_timeout,t=i=r,typeof e=="function"&&(r.callback=e);else if(a=r.query_timeout||this.connectionParameters.query_timeout,i=new oc(r,e,n),!i.callback){let c,m;t=new this._Promise((u,p)=>{c=u,m=p}).catch(u=>{throw Error.captureStackTrace(u),u}),i.callback=(u,p)=>u?m(u):c(p)}return a&&(s=i.callback,o=setTimeout(()=>{let c=new Error("Query read timeout");process.nextTick(()=>{i.handleError(c,this.connection)}),s(c),i.callback=()=>{};let m=this._queryQueue.indexOf(i);m>-1&&this._queryQueue.splice(m,1),this._pulseQueryQueue()},a),i.callback=(c,m)=>{clearTimeout(o),s(c,m)}),this._queryable?this._ending?(i.native=this.native,process.nextTick(()=>{i.handleError(new Error("Client was closed and is not queryable"))}),t):(this._queryQueue.push(i),this._pulseQueryQueue(),t):(i.native=this.native,process.nextTick(()=>{i.handleError(new Error("Client has encountered a connection error and is not queryable"))}),t)};te.prototype.end=function(r){let e=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,r));let n;return r||(n=new this._Promise(function(i,t){r=a=>a?t(a):i()})),this.native.end(function(){e._errorAllQueries(new Error("Connection terminated")),process.nextTick(()=>{e.emit("end"),r&&r()})}),n};te.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"};te.prototype._pulseQueryQueue=function(r){if(!this._connected||this._hasActiveQuery())return;let e=this._queryQueue.shift();if(!e){r||this.emit("drain");return}this._activeQuery=e,e.submit(this);let n=this;e.once("_done",function(){n._pulseQueryQueue()})};te.prototype.cancel=function(r){this._activeQuery===r?this.native.cancel(function(){}):this._queryQueue.indexOf(r)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(r),1)};te.prototype.ref=function(){};te.prototype.unref=function(){};te.prototype.setTypeParser=function(r,e,n){return this._types.setTypeParser(r,e,n)};te.prototype.getTypeParser=function(r,e){return this._types.getTypeParser(r,e)}});var it=w((Wf,lc)=>{"use strict";lc.exports=cc()});var nt=w((Xf,Cn)=>{"use strict";var ep=Ws(),np=vn(),rp=Hi(),ip=bi(),tp=Ue(),ap=ec(),op=ur(),{DatabaseError:sp}=Vi(),{escapeIdentifier:cp,escapeLiteral:lp}=Ue(),mp=r=>class extends ap{constructor(n){super(n,r)}},tt=function(r){this.defaults=np,this.Client=r,this.Query=this.Client.Query,this.Pool=mp(this.Client),this._pools=[],this.Connection=rp,this.types=fn(),this.DatabaseError=sp,this.TypeOverrides=op,this.escapeIdentifier=cp,this.escapeLiteral=lp,this.Result=ip,this.utils=tp};typeof process.env.NODE_PG_FORCE_NATIVE<"u"?Cn.exports=new tt(it()):(Cn.exports=new tt(ep),Object.defineProperty(Cn.exports,"native",{configurable:!0,enumerable:!1,get(){let r=null;try{r=new tt(it())}catch(e){if(e.code!=="MODULE_NOT_FOUND")throw e}return Object.defineProperty(Cn.exports,"native",{value:r}),r}}))});var Dp={};so(Dp,{handler:()=>Mp});module.exports=Ol(Dp);function Fn(r){return{originalMessage:r,messageType:"UNKNOWN",mentionedLocations:[],phones:[],isUrgent:!1,urgencyIndicators:[],confidenceLevel:"VERY_LOW",confidenceScore:0,confidenceFactors:{},warnings:[]}}var lo=[{code:1,name:"Adana",normalized:"adana",region:"Akdeniz",aliases:[]},{code:2,name:"Adiyaman",normalized:"adiyaman",region:"Guneydogu Anadolu",aliases:[]},{code:3,name:"Afyonkarahisar",normalized:"afyonkarahisar",region:"Ege",aliases:["afyon"]},{code:4,name:"Agri",normalized:"agri",region:"Dogu Anadolu",aliases:[]},{code:5,name:"Amasya",normalized:"amasya",region:"Karadeniz",aliases:[]},{code:6,name:"Ankara",normalized:"ankara",region:"Ic Anadolu",aliases:["ank"]},{code:7,name:"Antalya",normalized:"antalya",region:"Akdeniz",aliases:[]},{code:8,name:"Artvin",normalized:"artvin",region:"Karadeniz",aliases:[]},{code:9,name:"Aydin",normalized:"aydin",region:"Ege",aliases:[]},{code:10,name:"Balikesir",normalized:"balikesir",region:"Marmara",aliases:[]},{code:11,name:"Bilecik",normalized:"bilecik",region:"Marmara",aliases:[]},{code:12,name:"Bingol",normalized:"bingol",region:"Dogu Anadolu",aliases:[]},{code:13,name:"Bitlis",normalized:"bitlis",region:"Dogu Anadolu",aliases:[]},{code:14,name:"Bolu",normalized:"bolu",region:"Karadeniz",aliases:[]},{code:15,name:"Burdur",normalized:"burdur",region:"Akdeniz",aliases:[]},{code:16,name:"Bursa",normalized:"bursa",region:"Marmara",aliases:[]},{code:17,name:"Canakkale",normalized:"canakkale",region:"Marmara",aliases:[]},{code:18,name:"Cankiri",normalized:"cankiri",region:"Ic Anadolu",aliases:[]},{code:19,name:"Corum",normalized:"corum",region:"Karadeniz",aliases:[]},{code:20,name:"Denizli",normalized:"denizli",region:"Ege",aliases:[]},{code:21,name:"Diyarbakir",normalized:"diyarbakir",region:"Guneydogu Anadolu",aliases:["diyarbekir"]},{code:22,name:"Edirne",normalized:"edirne",region:"Marmara",aliases:[]},{code:23,name:"Elazig",normalized:"elazig",region:"Dogu Anadolu",aliases:[]},{code:24,name:"Erzincan",normalized:"erzincan",region:"Dogu Anadolu",aliases:[]},{code:25,name:"Erzurum",normalized:"erzurum",region:"Dogu Anadolu",aliases:[]},{code:26,name:"Eskisehir",normalized:"eskisehir",region:"Ic Anadolu",aliases:[]},{code:27,name:"Gaziantep",normalized:"gaziantep",region:"Guneydogu Anadolu",aliases:["antep"]},{code:28,name:"Giresun",normalized:"giresun",region:"Karadeniz",aliases:[]},{code:29,name:"Gumushane",normalized:"gumushane",region:"Karadeniz",aliases:[]},{code:30,name:"Hakkari",normalized:"hakkari",region:"Dogu Anadolu",aliases:[]},{code:31,name:"Hatay",normalized:"hatay",region:"Akdeniz",aliases:["antakya"]},{code:32,name:"Isparta",normalized:"isparta",region:"Akdeniz",aliases:[]},{code:33,name:"Mersin",normalized:"mersin",region:"Akdeniz",aliases:["icel"]},{code:34,name:"Istanbul",normalized:"istanbul",region:"Marmara",aliases:["ist"]},{code:35,name:"Izmir",normalized:"izmir",region:"Ege",aliases:[]},{code:36,name:"Kars",normalized:"kars",region:"Dogu Anadolu",aliases:[]},{code:37,name:"Kastamonu",normalized:"kastamonu",region:"Karadeniz",aliases:[]},{code:38,name:"Kayseri",normalized:"kayseri",region:"Ic Anadolu",aliases:[]},{code:39,name:"Kirklareli",normalized:"kirklareli",region:"Marmara",aliases:[]},{code:40,name:"Kirsehir",normalized:"kirsehir",region:"Ic Anadolu",aliases:[]},{code:41,name:"Kocaeli",normalized:"kocaeli",region:"Marmara",aliases:["izmit"]},{code:42,name:"Konya",normalized:"konya",region:"Ic Anadolu",aliases:[]},{code:43,name:"Kutahya",normalized:"kutahya",region:"Ege",aliases:[]},{code:44,name:"Malatya",normalized:"malatya",region:"Dogu Anadolu",aliases:[]},{code:45,name:"Manisa",normalized:"manisa",region:"Ege",aliases:[]},{code:46,name:"Kahramanmaras",normalized:"kahramanmaras",region:"Akdeniz",aliases:["maras"]},{code:47,name:"Mardin",normalized:"mardin",region:"Guneydogu Anadolu",aliases:[]},{code:48,name:"Mugla",normalized:"mugla",region:"Ege",aliases:[]},{code:49,name:"Mus",normalized:"mus",region:"Dogu Anadolu",aliases:[]},{code:50,name:"Nevsehir",normalized:"nevsehir",region:"Ic Anadolu",aliases:[]},{code:51,name:"Nigde",normalized:"nigde",region:"Ic Anadolu",aliases:[]},{code:52,name:"Ordu",normalized:"ordu",region:"Karadeniz",aliases:[]},{code:53,name:"Rize",normalized:"rize",region:"Karadeniz",aliases:[]},{code:54,name:"Sakarya",normalized:"sakarya",region:"Marmara",aliases:["adapazari"]},{code:55,name:"Samsun",normalized:"samsun",region:"Karadeniz",aliases:[]},{code:56,name:"Siirt",normalized:"siirt",region:"Guneydogu Anadolu",aliases:[]},{code:57,name:"Sinop",normalized:"sinop",region:"Karadeniz",aliases:[]},{code:58,name:"Sivas",normalized:"sivas",region:"Ic Anadolu",aliases:[]},{code:59,name:"Tekirdag",normalized:"tekirdag",region:"Marmara",aliases:[]},{code:60,name:"Tokat",normalized:"tokat",region:"Karadeniz",aliases:[]},{code:61,name:"Trabzon",normalized:"trabzon",region:"Karadeniz",aliases:[]},{code:62,name:"Tunceli",normalized:"tunceli",region:"Dogu Anadolu",aliases:[]},{code:63,name:"Sanliurfa",normalized:"sanliurfa",region:"Guneydogu Anadolu",aliases:["urfa"]},{code:64,name:"Usak",normalized:"usak",region:"Ege",aliases:[]},{code:65,name:"Van",normalized:"van",region:"Dogu Anadolu",aliases:[]},{code:66,name:"Yozgat",normalized:"yozgat",region:"Ic Anadolu",aliases:[]},{code:67,name:"Zonguldak",normalized:"zonguldak",region:"Karadeniz",aliases:[]},{code:68,name:"Aksaray",normalized:"aksaray",region:"Ic Anadolu",aliases:[]},{code:69,name:"Bayburt",normalized:"bayburt",region:"Karadeniz",aliases:[]},{code:70,name:"Karaman",normalized:"karaman",region:"Ic Anadolu",aliases:[]},{code:71,name:"Kirikkale",normalized:"kirikkale",region:"Ic Anadolu",aliases:[]},{code:72,name:"Batman",normalized:"batman",region:"Guneydogu Anadolu",aliases:[]},{code:73,name:"Sirnak",normalized:"sirnak",region:"Guneydogu Anadolu",aliases:[]},{code:74,name:"Bartin",normalized:"bartin",region:"Karadeniz",aliases:[]},{code:75,name:"Ardahan",normalized:"ardahan",region:"Dogu Anadolu",aliases:[]},{code:76,name:"Igdir",normalized:"igdir",region:"Dogu Anadolu",aliases:[]},{code:77,name:"Yalova",normalized:"yalova",region:"Marmara",aliases:[]},{code:78,name:"Karabuk",normalized:"karabuk",region:"Karadeniz",aliases:[]},{code:79,name:"Kilis",normalized:"kilis",region:"Guneydogu Anadolu",aliases:[]},{code:80,name:"Osmaniye",normalized:"osmaniye",region:"Akdeniz",aliases:[]},{code:81,name:"Duzce",normalized:"duzce",region:"Karadeniz",aliases:[]}],ln=new Map,Jr=new Map;for(let r of lo){ln.set(r.normalized,r),Jr.set(r.code,r);for(let e of r.aliases)ln.set(e.toLowerCase(),r)}var ql=new Set(ln.keys());function De(r){return ln.get(r.toLowerCase())}function Xr(r){return Jr.get(r)}var mo=[{name:"Alada\u011F",normalized:"aladag",provinceCode:1,provinceName:"Adana"},{name:"Ceyhan",normalized:"ceyhan",provinceCode:1,provinceName:"Adana"},{name:"\xC7ukurova",normalized:"cukurova",provinceCode:1,provinceName:"Adana"},{name:"Feke",normalized:"feke",provinceCode:1,provinceName:"Adana"},{name:"I\u0307mamo\u011Flu",normalized:"imamoglu",provinceCode:1,provinceName:"Adana"},{name:"Karai\u0307sali",normalized:"karaisali",provinceCode:1,provinceName:"Adana"},{name:"Karata\u015F",normalized:"karatas",provinceCode:1,provinceName:"Adana"},{name:"Kozan",normalized:"kozan",provinceCode:1,provinceName:"Adana"},{name:"Pozanti",normalized:"pozanti",provinceCode:1,provinceName:"Adana"},{name:"Sai\u0307mbeyli\u0307",normalized:"saimbeyli",provinceCode:1,provinceName:"Adana"},{name:"Sari\xE7am",normalized:"saricam",provinceCode:1,provinceName:"Adana"},{name:"Seyhan",normalized:"seyhan",provinceCode:1,provinceName:"Adana"},{name:"Tufanbeyli\u0307",normalized:"tufanbeyli",provinceCode:1,provinceName:"Adana"},{name:"Yumurtalik",normalized:"yumurtalik",provinceCode:1,provinceName:"Adana"},{name:"Y\xFCre\u011Fi\u0307r",normalized:"yuregir",provinceCode:1,provinceName:"Adana"},{name:"Besni\u0307",normalized:"besni",provinceCode:2,provinceName:"Adiyaman"},{name:"\xC7eli\u0307khan",normalized:"celikhan",provinceCode:2,provinceName:"Adiyaman"},{name:"Gerger",normalized:"gerger",provinceCode:2,provinceName:"Adiyaman"},{name:"G\xF6lba\u015Fi",normalized:"golbasi",provinceCode:2,provinceName:"Adiyaman"},{name:"Kahta",normalized:"kahta",provinceCode:2,provinceName:"Adiyaman"},{name:"Samsat",normalized:"samsat",provinceCode:2,provinceName:"Adiyaman"},{name:"Si\u0307nci\u0307k",normalized:"sincik",provinceCode:2,provinceName:"Adiyaman"},{name:"Tut",normalized:"tut",provinceCode:2,provinceName:"Adiyaman"},{name:"Ba\u015Fmak\xE7i",normalized:"basmakci",provinceCode:3,provinceName:"Afyonkarahisar"},{name:"Bayat",normalized:"bayat",provinceCode:3,provinceName:"Afyonkarahisar"},{name:"Bolvadi\u0307n",normalized:"bolvadin",provinceCode:3,provinceName:"Afyonkarahisar"},{name:"\xC7ay",normalized:"cay",provinceCode:3,provinceName:"Afyonkarahisar"},{name:"\xC7obanlar",normalized:"cobanlar",provinceCode:3,provinceName:"Afyonkarahisar"},{name:"Dazkiri",normalized:"dazkiri",provinceCode:3,provinceName:"Afyonkarahisar"},{name:"Di\u0307nar",normalized:"dinar",provinceCode:3,provinceName:"Afyonkarahisar"},{name:"Emi\u0307rda\u011F",normalized:"emirdag",provinceCode:3,provinceName:"Afyonkarahisar"},{name:"Evci\u0307ler",normalized:"evciler",provinceCode:3,provinceName:"Afyonkarahisar"},{name:"Hocalar",normalized:"hocalar",provinceCode:3,provinceName:"Afyonkarahisar"},{name:"I\u0307hsani\u0307ye",normalized:"ihsaniye",provinceCode:3,provinceName:"Afyonkarahisar"},{name:"I\u0307scehi\u0307sar",normalized:"iscehisar",provinceCode:3,provinceName:"Afyonkarahisar"},{name:"Kizil\xF6ren",normalized:"kiziloren",provinceCode:3,provinceName:"Afyonkarahisar"},{name:"Sandikli",normalized:"sandikli",provinceCode:3,provinceName:"Afyonkarahisar"},{name:"Si\u0307nanpa\u015Fa",normalized:"sinanpasa",provinceCode:3,provinceName:"Afyonkarahisar"},{name:"Sultanda\u011Fi",normalized:"sultandagi",provinceCode:3,provinceName:"Afyonkarahisar"},{name:"\u015Euhut",normalized:"suhut",provinceCode:3,provinceName:"Afyonkarahisar"},{name:"Di\u0307yadi\u0307n",normalized:"diyadin",provinceCode:4,provinceName:"Agri"},{name:"Do\u011Fubayazit",normalized:"dogubayazit",provinceCode:4,provinceName:"Agri"},{name:"Ele\u015Fki\u0307rt",normalized:"eleskirt",provinceCode:4,provinceName:"Agri"},{name:"Hamur",normalized:"hamur",provinceCode:4,provinceName:"Agri"},{name:"Patnos",normalized:"patnos",provinceCode:4,provinceName:"Agri"},{name:"Ta\u015Fli\xE7ay",normalized:"taslicay",provinceCode:4,provinceName:"Agri"},{name:"Tutak",normalized:"tutak",provinceCode:4,provinceName:"Agri"},{name:"G\xF6yn\xFCcek",normalized:"goynucek",provinceCode:5,provinceName:"Amasya"},{name:"G\xFCm\xFC\u015Fhacik\xF6y",normalized:"gumushacikoy",provinceCode:5,provinceName:"Amasya"},{name:"Hamam\xF6z\xFC",normalized:"hamamozu",provinceCode:5,provinceName:"Amasya"},{name:"Merzi\u0307fon",normalized:"merzifon",provinceCode:5,provinceName:"Amasya"},{name:"Suluova",normalized:"suluova",provinceCode:5,provinceName:"Amasya"},{name:"Ta\u015Fova",normalized:"tasova",provinceCode:5,provinceName:"Amasya"},{name:"Akyurt",normalized:"akyurt",provinceCode:6,provinceName:"Ankara"},{name:"Altinda\u011F",normalized:"altindag",provinceCode:6,provinceName:"Ankara"},{name:"Aya\u015F",normalized:"ayas",provinceCode:6,provinceName:"Ankara"},{name:"Bala",normalized:"bala",provinceCode:6,provinceName:"Ankara"},{name:"Beypazari",normalized:"beypazari",provinceCode:6,provinceName:"Ankara"},{name:"\xC7amlidere",normalized:"camlidere",provinceCode:6,provinceName:"Ankara"},{name:"\xC7ankaya",normalized:"cankaya",provinceCode:6,provinceName:"Ankara"},{name:"\xC7ubuk",normalized:"cubuk",provinceCode:6,provinceName:"Ankara"},{name:"Elmada\u011F",normalized:"elmadag",provinceCode:6,provinceName:"Ankara"},{name:"Eti\u0307mesgut",normalized:"etimesgut",provinceCode:6,provinceName:"Ankara"},{name:"Evren",normalized:"evren",provinceCode:6,provinceName:"Ankara"},{name:"G\xF6lba\u015Fi",normalized:"golbasi",provinceCode:6,provinceName:"Ankara"},{name:"G\xFCd\xFCl",normalized:"gudul",provinceCode:6,provinceName:"Ankara"},{name:"Haymana",normalized:"haymana",provinceCode:6,provinceName:"Ankara"},{name:"Kahramankazan",normalized:"kahramankazan",provinceCode:6,provinceName:"Ankara"},{name:"Kaleci\u0307k",normalized:"kalecik",provinceCode:6,provinceName:"Ankara"},{name:"Ke\xE7i\u0307\xF6ren",normalized:"kecioren",provinceCode:6,provinceName:"Ankara"},{name:"Kizilcahamam",normalized:"kizilcahamam",provinceCode:6,provinceName:"Ankara"},{name:"Mamak",normalized:"mamak",provinceCode:6,provinceName:"Ankara"},{name:"Nallihan",normalized:"nallihan",provinceCode:6,provinceName:"Ankara"},{name:"Polatli",normalized:"polatli",provinceCode:6,provinceName:"Ankara"},{name:"Pursaklar",normalized:"pursaklar",provinceCode:6,provinceName:"Ankara"},{name:"Si\u0307ncan",normalized:"sincan",provinceCode:6,provinceName:"Ankara"},{name:"\u015Eerefli\u0307ko\xE7hi\u0307sar",normalized:"sereflikochisar",provinceCode:6,provinceName:"Ankara"},{name:"Yeni\u0307mahalle",normalized:"yenimahalle",provinceCode:6,provinceName:"Ankara"},{name:"Akseki\u0307",normalized:"akseki",provinceCode:7,provinceName:"Antalya"},{name:"Aksu",normalized:"aksu",provinceCode:7,provinceName:"Antalya"},{name:"Alanya",normalized:"alanya",provinceCode:7,provinceName:"Antalya"},{name:"Demre",normalized:"demre",provinceCode:7,provinceName:"Antalya"},{name:"D\xF6\u015Femealti",normalized:"dosemealti",provinceCode:7,provinceName:"Antalya"},{name:"Elmali",normalized:"elmali",provinceCode:7,provinceName:"Antalya"},{name:"Fi\u0307ni\u0307ke",normalized:"finike",provinceCode:7,provinceName:"Antalya"},{name:"Gazi\u0307pa\u015Fa",normalized:"gazipasa",provinceCode:7,provinceName:"Antalya"},{name:"G\xFCndo\u011Fmu\u015F",normalized:"gundogmus",provinceCode:7,provinceName:"Antalya"},{name:"I\u0307bradi",normalized:"ibradi",provinceCode:7,provinceName:"Antalya"},{name:"Ka\u015F",normalized:"kas",provinceCode:7,provinceName:"Antalya"},{name:"Kemer",normalized:"kemer",provinceCode:7,provinceName:"Antalya"},{name:"Kepez",normalized:"kepez",provinceCode:7,provinceName:"Antalya"},{name:"Konyaalti",normalized:"konyaalti",provinceCode:7,provinceName:"Antalya"},{name:"Korkuteli\u0307",normalized:"korkuteli",provinceCode:7,provinceName:"Antalya"},{name:"Kumluca",normalized:"kumluca",provinceCode:7,provinceName:"Antalya"},{name:"Manavgat",normalized:"manavgat",provinceCode:7,provinceName:"Antalya"},{name:"Muratpa\u015Fa",normalized:"muratpasa",provinceCode:7,provinceName:"Antalya"},{name:"Seri\u0307k",normalized:"serik",provinceCode:7,provinceName:"Antalya"},{name:"Ardanu\xE7",normalized:"ardanuc",provinceCode:8,provinceName:"Artvin"},{name:"Arhavi\u0307",normalized:"arhavi",provinceCode:8,provinceName:"Artvin"},{name:"Bor\xE7ka",normalized:"borcka",provinceCode:8,provinceName:"Artvin"},{name:"Hopa",normalized:"hopa",provinceCode:8,provinceName:"Artvin"},{name:"Kemalpa\u015Fa",normalized:"kemalpasa",provinceCode:8,provinceName:"Artvin"},{name:"Murgul",normalized:"murgul",provinceCode:8,provinceName:"Artvin"},{name:"\u015Eav\u015Fat",normalized:"savsat",provinceCode:8,provinceName:"Artvin"},{name:"Yusufeli\u0307",normalized:"yusufeli",provinceCode:8,provinceName:"Artvin"},{name:"Bozdo\u011Fan",normalized:"bozdogan",provinceCode:9,provinceName:"Aydin"},{name:"Buharkent",normalized:"buharkent",provinceCode:9,provinceName:"Aydin"},{name:"\xC7i\u0307ne",normalized:"cine",provinceCode:9,provinceName:"Aydin"},{name:"Di\u0307di\u0307m",normalized:"didim",provinceCode:9,provinceName:"Aydin"},{name:"Efeler",normalized:"efeler",provinceCode:9,provinceName:"Aydin"},{name:"Germenci\u0307k",normalized:"germencik",provinceCode:9,provinceName:"Aydin"},{name:"I\u0307nci\u0307rli\u0307ova",normalized:"incirliova",provinceCode:9,provinceName:"Aydin"},{name:"Karacasu",normalized:"karacasu",provinceCode:9,provinceName:"Aydin"},{name:"Karpuzlu",normalized:"karpuzlu",provinceCode:9,provinceName:"Aydin"},{name:"Ko\xE7arli",normalized:"kocarli",provinceCode:9,provinceName:"Aydin"},{name:"K\xF6\u015Fk",normalized:"kosk",provinceCode:9,provinceName:"Aydin"},{name:"Ku\u015Fadasi",normalized:"kusadasi",provinceCode:9,provinceName:"Aydin"},{name:"Kuyucak",normalized:"kuyucak",provinceCode:9,provinceName:"Aydin"},{name:"Nazi\u0307lli\u0307",normalized:"nazilli",provinceCode:9,provinceName:"Aydin"},{name:"S\xF6ke",normalized:"soke",provinceCode:9,provinceName:"Aydin"},{name:"Sultanhi\u0307sar",normalized:"sultanhisar",provinceCode:9,provinceName:"Aydin"},{name:"Yeni\u0307pazar",normalized:"yenipazar",provinceCode:9,provinceName:"Aydin"},{name:"Altieyl\xFCl",normalized:"altieylul",provinceCode:10,provinceName:"Balikesir"},{name:"Ayvalik",normalized:"ayvalik",provinceCode:10,provinceName:"Balikesir"},{name:"Balya",normalized:"balya",provinceCode:10,provinceName:"Balikesir"},{name:"Bandirma",normalized:"bandirma",provinceCode:10,provinceName:"Balikesir"},{name:"Bi\u0307gadi\u0307\xE7",normalized:"bigadic",provinceCode:10,provinceName:"Balikesir"},{name:"Burhani\u0307ye",normalized:"burhaniye",provinceCode:10,provinceName:"Balikesir"},{name:"Dursunbey",normalized:"dursunbey",provinceCode:10,provinceName:"Balikesir"},{name:"Edremi\u0307t",normalized:"edremit",provinceCode:10,provinceName:"Balikesir"},{name:"Erdek",normalized:"erdek",provinceCode:10,provinceName:"Balikesir"},{name:"G\xF6me\xE7",normalized:"gomec",provinceCode:10,provinceName:"Balikesir"},{name:"G\xF6nen",normalized:"gonen",provinceCode:10,provinceName:"Balikesir"},{name:"Havran",normalized:"havran",provinceCode:10,provinceName:"Balikesir"},{name:"I\u0307vri\u0307ndi\u0307",normalized:"ivrindi",provinceCode:10,provinceName:"Balikesir"},{name:"Karesi\u0307",normalized:"karesi",provinceCode:10,provinceName:"Balikesir"},{name:"Kepsut",normalized:"kepsut",provinceCode:10,provinceName:"Balikesir"},{name:"Manyas",normalized:"manyas",provinceCode:10,provinceName:"Balikesir"},{name:"Marmara",normalized:"marmara",provinceCode:10,provinceName:"Balikesir"},{name:"Sava\u015Ftepe",normalized:"savastepe",provinceCode:10,provinceName:"Balikesir"},{name:"Sindirgi",normalized:"sindirgi",provinceCode:10,provinceName:"Balikesir"},{name:"Susurluk",normalized:"susurluk",provinceCode:10,provinceName:"Balikesir"},{name:"Boz\xFCy\xFCk",normalized:"bozuyuk",provinceCode:11,provinceName:"Bilecik"},{name:"G\xF6lpazari",normalized:"golpazari",provinceCode:11,provinceName:"Bilecik"},{name:"I\u0307nhi\u0307sar",normalized:"inhisar",provinceCode:11,provinceName:"Bilecik"},{name:"Osmaneli\u0307",normalized:"osmaneli",provinceCode:11,provinceName:"Bilecik"},{name:"Pazaryeri\u0307",normalized:"pazaryeri",provinceCode:11,provinceName:"Bilecik"},{name:"S\xF6\u011F\xFCt",normalized:"sogut",provinceCode:11,provinceName:"Bilecik"},{name:"Yeni\u0307pazar",normalized:"yenipazar",provinceCode:11,provinceName:"Bilecik"},{name:"Adakli",normalized:"adakli",provinceCode:12,provinceName:"Bingol"},{name:"Gen\xE7",normalized:"genc",provinceCode:12,provinceName:"Bingol"},{name:"Karliova",normalized:"karliova",provinceCode:12,provinceName:"Bingol"},{name:"Ki\u0307\u011Fi",normalized:"kigi",provinceCode:12,provinceName:"Bingol"},{name:"Solhan",normalized:"solhan",provinceCode:12,provinceName:"Bingol"},{name:"Yayladere",normalized:"yayladere",provinceCode:12,provinceName:"Bingol"},{name:"Yedi\u0307su",normalized:"yedisu",provinceCode:12,provinceName:"Bingol"},{name:"Adi\u0307lcevaz",normalized:"adilcevaz",provinceCode:13,provinceName:"Bitlis"},{name:"Ahlat",normalized:"ahlat",provinceCode:13,provinceName:"Bitlis"},{name:"G\xFCroymak",normalized:"guroymak",provinceCode:13,provinceName:"Bitlis"},{name:"Hi\u0307zan",normalized:"hizan",provinceCode:13,provinceName:"Bitlis"},{name:"Mutki\u0307",normalized:"mutki",provinceCode:13,provinceName:"Bitlis"},{name:"Tatvan",normalized:"tatvan",provinceCode:13,provinceName:"Bitlis"},{name:"D\xF6rtdi\u0307van",normalized:"dortdivan",provinceCode:14,provinceName:"Bolu"},{name:"Gerede",normalized:"gerede",provinceCode:14,provinceName:"Bolu"},{name:"G\xF6yn\xFCk",normalized:"goynuk",provinceCode:14,provinceName:"Bolu"},{name:"Kibriscik",normalized:"kibriscik",provinceCode:14,provinceName:"Bolu"},{name:"Mengen",normalized:"mengen",provinceCode:14,provinceName:"Bolu"},{name:"Mudurnu",normalized:"mudurnu",provinceCode:14,provinceName:"Bolu"},{name:"Seben",normalized:"seben",provinceCode:14,provinceName:"Bolu"},{name:"Yeni\u0307\xE7a\u011Fa",normalized:"yenicaga",provinceCode:14,provinceName:"Bolu"},{name:"A\u011Flasun",normalized:"aglasun",provinceCode:15,provinceName:"Burdur"},{name:"Altinyayla",normalized:"altinyayla",provinceCode:15,provinceName:"Burdur"},{name:"Bucak",normalized:"bucak",provinceCode:15,provinceName:"Burdur"},{name:"\xC7avdir",normalized:"cavdir",provinceCode:15,provinceName:"Burdur"},{name:"\xC7elti\u0307k\xE7i\u0307",normalized:"celtikci",provinceCode:15,provinceName:"Burdur"},{name:"G\xF6lhi\u0307sar",normalized:"golhisar",provinceCode:15,provinceName:"Burdur"},{name:"Karamanli",normalized:"karamanli",provinceCode:15,provinceName:"Burdur"},{name:"Kemer",normalized:"kemer",provinceCode:15,provinceName:"Burdur"},{name:"Tefenni\u0307",normalized:"tefenni",provinceCode:15,provinceName:"Burdur"},{name:"Ye\u015Fi\u0307lova",normalized:"yesilova",provinceCode:15,provinceName:"Burdur"},{name:"B\xFCy\xFCkorhan",normalized:"buyukorhan",provinceCode:16,provinceName:"Bursa"},{name:"Gemli\u0307k",normalized:"gemlik",provinceCode:16,provinceName:"Bursa"},{name:"G\xFCrsu",normalized:"gursu",provinceCode:16,provinceName:"Bursa"},{name:"Harmancik",normalized:"harmancik",provinceCode:16,provinceName:"Bursa"},{name:"I\u0307neg\xF6l",normalized:"inegol",provinceCode:16,provinceName:"Bursa"},{name:"I\u0307zni\u0307k",normalized:"iznik",provinceCode:16,provinceName:"Bursa"},{name:"Karacabey",normalized:"karacabey",provinceCode:16,provinceName:"Bursa"},{name:"Keles",normalized:"keles",provinceCode:16,provinceName:"Bursa"},{name:"Kestel",normalized:"kestel",provinceCode:16,provinceName:"Bursa"},{name:"Mudanya",normalized:"mudanya",provinceCode:16,provinceName:"Bursa"},{name:"Mustafakemalpa\u015Fa",normalized:"mustafakemalpasa",provinceCode:16,provinceName:"Bursa"},{name:"Ni\u0307l\xFCfer",normalized:"nilufer",provinceCode:16,provinceName:"Bursa"},{name:"Orhaneli\u0307",normalized:"orhaneli",provinceCode:16,provinceName:"Bursa"},{name:"Orhangazi\u0307",normalized:"orhangazi",provinceCode:16,provinceName:"Bursa"},{name:"Osmangazi\u0307",normalized:"osmangazi",provinceCode:16,provinceName:"Bursa"},{name:"Yeni\u0307\u015Fehi\u0307r",normalized:"yenisehir",provinceCode:16,provinceName:"Bursa"},{name:"Yildirim",normalized:"yildirim",provinceCode:16,provinceName:"Bursa"},{name:"Ayvacik",normalized:"ayvacik",provinceCode:17,provinceName:"Canakkale"},{name:"Bayrami\u0307\xE7",normalized:"bayramic",provinceCode:17,provinceName:"Canakkale"},{name:"Bi\u0307ga",normalized:"biga",provinceCode:17,provinceName:"Canakkale"},{name:"Bozcaada",normalized:"bozcaada",provinceCode:17,provinceName:"Canakkale"},{name:"\xC7an",normalized:"can",provinceCode:17,provinceName:"Canakkale"},{name:"Eceabat",normalized:"eceabat",provinceCode:17,provinceName:"Canakkale"},{name:"Ezi\u0307ne",normalized:"ezine",provinceCode:17,provinceName:"Canakkale"},{name:"Geli\u0307bolu",normalized:"gelibolu",provinceCode:17,provinceName:"Canakkale"},{name:"G\xF6k\xE7eada",normalized:"gokceada",provinceCode:17,provinceName:"Canakkale"},{name:"Lapseki\u0307",normalized:"lapseki",provinceCode:17,provinceName:"Canakkale"},{name:"Yeni\u0307ce",normalized:"yenice",provinceCode:17,provinceName:"Canakkale"},{name:"Atkaracalar",normalized:"atkaracalar",provinceCode:18,provinceName:"Cankiri"},{name:"Bayram\xF6ren",normalized:"bayramoren",provinceCode:18,provinceName:"Cankiri"},{name:"\xC7erke\u015F",normalized:"cerkes",provinceCode:18,provinceName:"Cankiri"},{name:"Eldi\u0307van",normalized:"eldivan",provinceCode:18,provinceName:"Cankiri"},{name:"Ilgaz",normalized:"ilgaz",provinceCode:18,provinceName:"Cankiri"},{name:"Kizilirmak",normalized:"kizilirmak",provinceCode:18,provinceName:"Cankiri"},{name:"Korgun",normalized:"korgun",provinceCode:18,provinceName:"Cankiri"},{name:"Kur\u015Funlu",normalized:"kursunlu",provinceCode:18,provinceName:"Cankiri"},{name:"Orta",normalized:"orta",provinceCode:18,provinceName:"Cankiri"},{name:"\u015Eaban\xF6z\xFC",normalized:"sabanozu",provinceCode:18,provinceName:"Cankiri"},{name:"Yaprakli",normalized:"yaprakli",provinceCode:18,provinceName:"Cankiri"},{name:"Alaca",normalized:"alaca",provinceCode:19,provinceName:"Corum"},{name:"Bayat",normalized:"bayat",provinceCode:19,provinceName:"Corum"},{name:"Bo\u011Fazkale",normalized:"bogazkale",provinceCode:19,provinceName:"Corum"},{name:"Dodurga",normalized:"dodurga",provinceCode:19,provinceName:"Corum"},{name:"I\u0307ski\u0307li\u0307p",normalized:"iskilip",provinceCode:19,provinceName:"Corum"},{name:"Kargi",normalized:"kargi",provinceCode:19,provinceName:"Corum"},{name:"La\xE7i\u0307n",normalized:"lacin",provinceCode:19,provinceName:"Corum"},{name:"Meci\u0307t\xF6z\xFC",normalized:"mecitozu",provinceCode:19,provinceName:"Corum"},{name:"O\u011Fuzlar",normalized:"oguzlar",provinceCode:19,provinceName:"Corum"},{name:"Ortak\xF6y",normalized:"ortakoy",provinceCode:19,provinceName:"Corum"},{name:"Osmancik",normalized:"osmancik",provinceCode:19,provinceName:"Corum"},{name:"Sungurlu",normalized:"sungurlu",provinceCode:19,provinceName:"Corum"},{name:"U\u011Furluda\u011F",normalized:"ugurludag",provinceCode:19,provinceName:"Corum"},{name:"Acipayam",normalized:"acipayam",provinceCode:20,provinceName:"Denizli"},{name:"Babada\u011F",normalized:"babadag",provinceCode:20,provinceName:"Denizli"},{name:"Baklan",normalized:"baklan",provinceCode:20,provinceName:"Denizli"},{name:"Beki\u0307lli\u0307",normalized:"bekilli",provinceCode:20,provinceName:"Denizli"},{name:"Beya\u011Fa\xE7",normalized:"beyagac",provinceCode:20,provinceName:"Denizli"},{name:"Bozkurt",normalized:"bozkurt",provinceCode:20,provinceName:"Denizli"},{name:"Buldan",normalized:"buldan",provinceCode:20,provinceName:"Denizli"},{name:"\xC7al",normalized:"cal",provinceCode:20,provinceName:"Denizli"},{name:"\xC7ameli\u0307",normalized:"cameli",provinceCode:20,provinceName:"Denizli"},{name:"\xC7ardak",normalized:"cardak",provinceCode:20,provinceName:"Denizli"},{name:"\xC7i\u0307vri\u0307l",normalized:"civril",provinceCode:20,provinceName:"Denizli"},{name:"G\xFCney",normalized:"guney",provinceCode:20,provinceName:"Denizli"},{name:"Honaz",normalized:"honaz",provinceCode:20,provinceName:"Denizli"},{name:"Kale",normalized:"kale",provinceCode:20,provinceName:"Denizli"},{name:"Merkezefendi\u0307",normalized:"merkezefendi",provinceCode:20,provinceName:"Denizli"},{name:"Pamukkale",normalized:"pamukkale",provinceCode:20,provinceName:"Denizli"},{name:"Sarayk\xF6y",normalized:"saraykoy",provinceCode:20,provinceName:"Denizli"},{name:"Seri\u0307nhi\u0307sar",normalized:"serinhisar",provinceCode:20,provinceName:"Denizli"},{name:"Tavas",normalized:"tavas",provinceCode:20,provinceName:"Denizli"},{name:"Ba\u011Flar",normalized:"baglar",provinceCode:21,provinceName:"Diyarbakir"},{name:"Bi\u0307smi\u0307l",normalized:"bismil",provinceCode:21,provinceName:"Diyarbakir"},{name:"\xC7ermi\u0307k",normalized:"cermik",provinceCode:21,provinceName:"Diyarbakir"},{name:"\xC7inar",normalized:"cinar",provinceCode:21,provinceName:"Diyarbakir"},{name:"\xC7\xFCng\xFC\u015F",normalized:"cungus",provinceCode:21,provinceName:"Diyarbakir"},{name:"Di\u0307cle",normalized:"dicle",provinceCode:21,provinceName:"Diyarbakir"},{name:"E\u011Fi\u0307l",normalized:"egil",provinceCode:21,provinceName:"Diyarbakir"},{name:"Ergani\u0307",normalized:"ergani",provinceCode:21,provinceName:"Diyarbakir"},{name:"Hani\u0307",normalized:"hani",provinceCode:21,provinceName:"Diyarbakir"},{name:"Hazro",normalized:"hazro",provinceCode:21,provinceName:"Diyarbakir"},{name:"Kayapinar",normalized:"kayapinar",provinceCode:21,provinceName:"Diyarbakir"},{name:"Kocak\xF6y",normalized:"kocakoy",provinceCode:21,provinceName:"Diyarbakir"},{name:"Kulp",normalized:"kulp",provinceCode:21,provinceName:"Diyarbakir"},{name:"Li\u0307ce",normalized:"lice",provinceCode:21,provinceName:"Diyarbakir"},{name:"Si\u0307lvan",normalized:"silvan",provinceCode:21,provinceName:"Diyarbakir"},{name:"Sur",normalized:"sur",provinceCode:21,provinceName:"Diyarbakir"},{name:"Yeni\u0307\u015Fehi\u0307r",normalized:"yenisehir",provinceCode:21,provinceName:"Diyarbakir"},{name:"Enez",normalized:"enez",provinceCode:22,provinceName:"Edirne"},{name:"Havsa",normalized:"havsa",provinceCode:22,provinceName:"Edirne"},{name:"I\u0307psala",normalized:"ipsala",provinceCode:22,provinceName:"Edirne"},{name:"Ke\u015Fan",normalized:"kesan",provinceCode:22,provinceName:"Edirne"},{name:"Lalapa\u015Fa",normalized:"lalapasa",provinceCode:22,provinceName:"Edirne"},{name:"Meri\u0307\xE7",normalized:"meric",provinceCode:22,provinceName:"Edirne"},{name:"S\xFClo\u011Flu",normalized:"suloglu",provinceCode:22,provinceName:"Edirne"},{name:"Uzunk\xF6pr\xFC",normalized:"uzunkopru",provinceCode:22,provinceName:"Edirne"},{name:"A\u011Fin",normalized:"agin",provinceCode:23,provinceName:"Elazig"},{name:"Alacakaya",normalized:"alacakaya",provinceCode:23,provinceName:"Elazig"},{name:"Aricak",normalized:"aricak",provinceCode:23,provinceName:"Elazig"},{name:"Baski\u0307l",normalized:"baskil",provinceCode:23,provinceName:"Elazig"},{name:"Karako\xE7an",normalized:"karakocan",provinceCode:23,provinceName:"Elazig"},{name:"Keban",normalized:"keban",provinceCode:23,provinceName:"Elazig"},{name:"Kovancilar",normalized:"kovancilar",provinceCode:23,provinceName:"Elazig"},{name:"Maden",normalized:"maden",provinceCode:23,provinceName:"Elazig"},{name:"Palu",normalized:"palu",provinceCode:23,provinceName:"Elazig"},{name:"Si\u0307vri\u0307ce",normalized:"sivrice",provinceCode:23,provinceName:"Elazig"},{name:"\xC7ayirli",normalized:"cayirli",provinceCode:24,provinceName:"Erzincan"},{name:"I\u0307li\u0307\xE7",normalized:"ilic",provinceCode:24,provinceName:"Erzincan"},{name:"Kemah",normalized:"kemah",provinceCode:24,provinceName:"Erzincan"},{name:"Kemali\u0307ye",normalized:"kemaliye",provinceCode:24,provinceName:"Erzincan"},{name:"Otlukbeli\u0307",normalized:"otlukbeli",provinceCode:24,provinceName:"Erzincan"},{name:"Refahi\u0307ye",normalized:"refahiye",provinceCode:24,provinceName:"Erzincan"},{name:"Tercan",normalized:"tercan",provinceCode:24,provinceName:"Erzincan"},{name:"\xDCz\xFCml\xFC",normalized:"uzumlu",provinceCode:24,provinceName:"Erzincan"},{name:"A\u015Fkale",normalized:"askale",provinceCode:25,provinceName:"Erzurum"},{name:"Azi\u0307zi\u0307ye",normalized:"aziziye",provinceCode:25,provinceName:"Erzurum"},{name:"\xC7at",normalized:"cat",provinceCode:25,provinceName:"Erzurum"},{name:"Hinis",normalized:"hinis",provinceCode:25,provinceName:"Erzurum"},{name:"Horasan",normalized:"horasan",provinceCode:25,provinceName:"Erzurum"},{name:"I\u0307spi\u0307r",normalized:"ispir",provinceCode:25,provinceName:"Erzurum"},{name:"Kara\xE7oban",normalized:"karacoban",provinceCode:25,provinceName:"Erzurum"},{name:"Karayazi",normalized:"karayazi",provinceCode:25,provinceName:"Erzurum"},{name:"K\xF6pr\xFCk\xF6y",normalized:"koprukoy",provinceCode:25,provinceName:"Erzurum"},{name:"Narman",normalized:"narman",provinceCode:25,provinceName:"Erzurum"},{name:"Oltu",normalized:"oltu",provinceCode:25,provinceName:"Erzurum"},{name:"Olur",normalized:"olur",provinceCode:25,provinceName:"Erzurum"},{name:"Paland\xF6ken",normalized:"palandoken",provinceCode:25,provinceName:"Erzurum"},{name:"Pasi\u0307nler",normalized:"pasinler",provinceCode:25,provinceName:"Erzurum"},{name:"Pazaryolu",normalized:"pazaryolu",provinceCode:25,provinceName:"Erzurum"},{name:"\u015Eenkaya",normalized:"senkaya",provinceCode:25,provinceName:"Erzurum"},{name:"Tekman",normalized:"tekman",provinceCode:25,provinceName:"Erzurum"},{name:"Tortum",normalized:"tortum",provinceCode:25,provinceName:"Erzurum"},{name:"Uzundere",normalized:"uzundere",provinceCode:25,provinceName:"Erzurum"},{name:"Yakuti\u0307ye",normalized:"yakutiye",provinceCode:25,provinceName:"Erzurum"},{name:"Alpu",normalized:"alpu",provinceCode:26,provinceName:"Eskisehir"},{name:"Beyli\u0307kova",normalized:"beylikova",provinceCode:26,provinceName:"Eskisehir"},{name:"\xC7i\u0307fteler",normalized:"cifteler",provinceCode:26,provinceName:"Eskisehir"},{name:"G\xFCny\xFCz\xFC",normalized:"gunyuzu",provinceCode:26,provinceName:"Eskisehir"},{name:"Han",normalized:"han",provinceCode:26,provinceName:"Eskisehir"},{name:"I\u0307n\xF6n\xFC",normalized:"inonu",provinceCode:26,provinceName:"Eskisehir"},{name:"Mahmudi\u0307ye",normalized:"mahmudiye",provinceCode:26,provinceName:"Eskisehir"},{name:"Mi\u0307halgazi\u0307",normalized:"mihalgazi",provinceCode:26,provinceName:"Eskisehir"},{name:"Mi\u0307hali\xE7\xE7ik",normalized:"mihaliccik",provinceCode:26,provinceName:"Eskisehir"},{name:"Odunpazari",normalized:"odunpazari",provinceCode:26,provinceName:"Eskisehir"},{name:"Saricakaya",normalized:"saricakaya",provinceCode:26,provinceName:"Eskisehir"},{name:"Seyi\u0307tgazi\u0307",normalized:"seyitgazi",provinceCode:26,provinceName:"Eskisehir"},{name:"Si\u0307vri\u0307hi\u0307sar",normalized:"sivrihisar",provinceCode:26,provinceName:"Eskisehir"},{name:"Tepeba\u015Fi",normalized:"tepebasi",provinceCode:26,provinceName:"Eskisehir"},{name:"Araban",normalized:"araban",provinceCode:27,provinceName:"Gaziantep"},{name:"I\u0307slahi\u0307ye",normalized:"islahiye",provinceCode:27,provinceName:"Gaziantep"},{name:"Karkami\u015F",normalized:"karkamis",provinceCode:27,provinceName:"Gaziantep"},{name:"Ni\u0307zi\u0307p",normalized:"nizip",provinceCode:27,provinceName:"Gaziantep"},{name:"Nurda\u011Fi",normalized:"nurdagi",provinceCode:27,provinceName:"Gaziantep"},{name:"O\u011Fuzeli\u0307",normalized:"oguzeli",provinceCode:27,provinceName:"Gaziantep"},{name:"\u015Eahi\u0307nbey",normalized:"sahinbey",provinceCode:27,provinceName:"Gaziantep"},{name:"\u015Eehi\u0307tkami\u0307l",normalized:"sehitkamil",provinceCode:27,provinceName:"Gaziantep"},{name:"Yavuzeli\u0307",normalized:"yavuzeli",provinceCode:27,provinceName:"Gaziantep"},{name:"Alucra",normalized:"alucra",provinceCode:28,provinceName:"Giresun"},{name:"Bulancak",normalized:"bulancak",provinceCode:28,provinceName:"Giresun"},{name:"\xC7amoluk",normalized:"camoluk",provinceCode:28,provinceName:"Giresun"},{name:"\xC7anak\xE7i",normalized:"canakci",provinceCode:28,provinceName:"Giresun"},{name:"Dereli\u0307",normalized:"dereli",provinceCode:28,provinceName:"Giresun"},{name:"Do\u011Fankent",normalized:"dogankent",provinceCode:28,provinceName:"Giresun"},{name:"Espi\u0307ye",normalized:"espiye",provinceCode:28,provinceName:"Giresun"},{name:"Eynesi\u0307l",normalized:"eynesil",provinceCode:28,provinceName:"Giresun"},{name:"G\xF6rele",normalized:"gorele",provinceCode:28,provinceName:"Giresun"},{name:"G\xFCce",normalized:"guce",provinceCode:28,provinceName:"Giresun"},{name:"Ke\u015Fap",normalized:"kesap",provinceCode:28,provinceName:"Giresun"},{name:"Pi\u0307razi\u0307z",normalized:"piraziz",provinceCode:28,provinceName:"Giresun"},{name:"\u015Eebi\u0307nkarahi\u0307sar",normalized:"sebinkarahisar",provinceCode:28,provinceName:"Giresun"},{name:"Ti\u0307rebolu",normalized:"tirebolu",provinceCode:28,provinceName:"Giresun"},{name:"Ya\u011Flidere",normalized:"yaglidere",provinceCode:28,provinceName:"Giresun"},{name:"Kelki\u0307t",normalized:"kelkit",provinceCode:29,provinceName:"Gumushane"},{name:"K\xF6se",normalized:"kose",provinceCode:29,provinceName:"Gumushane"},{name:"K\xFCrt\xFCn",normalized:"kurtun",provinceCode:29,provinceName:"Gumushane"},{name:"\u015Ei\u0307ran",normalized:"siran",provinceCode:29,provinceName:"Gumushane"},{name:"Torul",normalized:"torul",provinceCode:29,provinceName:"Gumushane"},{name:"\xC7ukurca",normalized:"cukurca",provinceCode:30,provinceName:"Hakkari"},{name:"Dereci\u0307k",normalized:"derecik",provinceCode:30,provinceName:"Hakkari"},{name:"\u015Eemdi\u0307nli\u0307",normalized:"semdinli",provinceCode:30,provinceName:"Hakkari"},{name:"Y\xFCksekova",normalized:"yuksekova",provinceCode:30,provinceName:"Hakkari"},{name:"Altin\xF6z\xFC",normalized:"altinozu",provinceCode:31,provinceName:"Hatay"},{name:"Antakya",normalized:"antakya",provinceCode:31,provinceName:"Hatay"},{name:"Arsuz",normalized:"arsuz",provinceCode:31,provinceName:"Hatay"},{name:"Belen",normalized:"belen",provinceCode:31,provinceName:"Hatay"},{name:"Defne",normalized:"defne",provinceCode:31,provinceName:"Hatay"},{name:"D\xF6rtyol",normalized:"dortyol",provinceCode:31,provinceName:"Hatay"},{name:"Erzi\u0307n",normalized:"erzin",provinceCode:31,provinceName:"Hatay"},{name:"Hassa",normalized:"hassa",provinceCode:31,provinceName:"Hatay"},{name:"I\u0307skenderun",normalized:"iskenderun",provinceCode:31,provinceName:"Hatay"},{name:"Kirikhan",normalized:"kirikhan",provinceCode:31,provinceName:"Hatay"},{name:"Kumlu",normalized:"kumlu",provinceCode:31,provinceName:"Hatay"},{name:"Payas",normalized:"payas",provinceCode:31,provinceName:"Hatay"},{name:"Reyhanli",normalized:"reyhanli",provinceCode:31,provinceName:"Hatay"},{name:"Samanda\u011F",normalized:"samandag",provinceCode:31,provinceName:"Hatay"},{name:"Yaylada\u011Fi",normalized:"yayladagi",provinceCode:31,provinceName:"Hatay"},{name:"Aksu",normalized:"aksu",provinceCode:32,provinceName:"Isparta"},{name:"Atabey",normalized:"atabey",provinceCode:32,provinceName:"Isparta"},{name:"E\u011Fi\u0307rdi\u0307r",normalized:"egirdir",provinceCode:32,provinceName:"Isparta"},{name:"Gelendost",normalized:"gelendost",provinceCode:32,provinceName:"Isparta"},{name:"G\xF6nen",normalized:"gonen",provinceCode:32,provinceName:"Isparta"},{name:"Ke\xE7i\u0307borlu",normalized:"keciborlu",provinceCode:32,provinceName:"Isparta"},{name:"Seni\u0307rkent",normalized:"senirkent",provinceCode:32,provinceName:"Isparta"},{name:"S\xFCt\xE7\xFCler",normalized:"sutculer",provinceCode:32,provinceName:"Isparta"},{name:"\u015Earki\u0307karaa\u011Fa\xE7",normalized:"sarkikaraagac",provinceCode:32,provinceName:"Isparta"},{name:"Uluborlu",normalized:"uluborlu",provinceCode:32,provinceName:"Isparta"},{name:"Yalva\xE7",normalized:"yalvac",provinceCode:32,provinceName:"Isparta"},{name:"Yeni\u0307\u015Farbademli\u0307",normalized:"yenisarbademli",provinceCode:32,provinceName:"Isparta"},{name:"Akdeni\u0307z",normalized:"akdeniz",provinceCode:33,provinceName:"Mersin"},{name:"Anamur",normalized:"anamur",provinceCode:33,provinceName:"Mersin"},{name:"Aydincik",normalized:"aydincik",provinceCode:33,provinceName:"Mersin"},{name:"Bozyazi",normalized:"bozyazi",provinceCode:33,provinceName:"Mersin"},{name:"\xC7amliyayla",normalized:"camliyayla",provinceCode:33,provinceName:"Mersin"},{name:"Erdemli\u0307",normalized:"erdemli",provinceCode:33,provinceName:"Mersin"},{name:"G\xFClnar",normalized:"gulnar",provinceCode:33,provinceName:"Mersin"},{name:"Mezi\u0307tli\u0307",normalized:"mezitli",provinceCode:33,provinceName:"Mersin"},{name:"Mut",normalized:"mut",provinceCode:33,provinceName:"Mersin"},{name:"Si\u0307li\u0307fke",normalized:"silifke",provinceCode:33,provinceName:"Mersin"},{name:"Tarsus",normalized:"tarsus",provinceCode:33,provinceName:"Mersin"},{name:"Toroslar",normalized:"toroslar",provinceCode:33,provinceName:"Mersin"},{name:"Yeni\u0307\u015Fehi\u0307r",normalized:"yenisehir",provinceCode:33,provinceName:"Mersin"},{name:"Adalar",normalized:"adalar",provinceCode:34,provinceName:"Istanbul"},{name:"Arnavutk\xF6y",normalized:"arnavutkoy",provinceCode:34,provinceName:"Istanbul"},{name:"Ata\u015Fehi\u0307r",normalized:"atasehir",provinceCode:34,provinceName:"Istanbul"},{name:"Avcilar",normalized:"avcilar",provinceCode:34,provinceName:"Istanbul"},{name:"Ba\u011Fcilar",normalized:"bagcilar",provinceCode:34,provinceName:"Istanbul"},{name:"Bah\xE7eli\u0307evler",normalized:"bahcelievler",provinceCode:34,provinceName:"Istanbul"},{name:"Bakirk\xF6y",normalized:"bakirkoy",provinceCode:34,provinceName:"Istanbul"},{name:"Ba\u015Fak\u015Fehi\u0307r",normalized:"basaksehir",provinceCode:34,provinceName:"Istanbul"},{name:"Bayrampa\u015Fa",normalized:"bayrampasa",provinceCode:34,provinceName:"Istanbul"},{name:"Be\u015Fi\u0307kta\u015F",normalized:"besiktas",provinceCode:34,provinceName:"Istanbul"},{name:"Beykoz",normalized:"beykoz",provinceCode:34,provinceName:"Istanbul"},{name:"Beyli\u0307kd\xFCz\xFC",normalized:"beylikduzu",provinceCode:34,provinceName:"Istanbul"},{name:"Beyo\u011Flu",normalized:"beyoglu",provinceCode:34,provinceName:"Istanbul"},{name:"B\xFCy\xFCk\xE7ekmece",normalized:"buyukcekmece",provinceCode:34,provinceName:"Istanbul"},{name:"\xC7atalca",normalized:"catalca",provinceCode:34,provinceName:"Istanbul"},{name:"\xC7ekmek\xF6y",normalized:"cekmekoy",provinceCode:34,provinceName:"Istanbul"},{name:"Esenler",normalized:"esenler",provinceCode:34,provinceName:"Istanbul"},{name:"Esenyurt",normalized:"esenyurt",provinceCode:34,provinceName:"Istanbul"},{name:"Ey\xFCpsultan",normalized:"eyupsultan",provinceCode:34,provinceName:"Istanbul"},{name:"Fati\u0307h",normalized:"fatih",provinceCode:34,provinceName:"Istanbul"},{name:"Gazi\u0307osmanpa\u015Fa",normalized:"gaziosmanpasa",provinceCode:34,provinceName:"Istanbul"},{name:"G\xFCng\xF6ren",normalized:"gungoren",provinceCode:34,provinceName:"Istanbul"},{name:"Kadik\xF6y",normalized:"kadikoy",provinceCode:34,provinceName:"Istanbul"},{name:"Ka\u011Fithane",normalized:"kagithane",provinceCode:34,provinceName:"Istanbul"},{name:"Kartal",normalized:"kartal",provinceCode:34,provinceName:"Istanbul"},{name:"K\xFC\xE7\xFCk\xE7ekmece",normalized:"kucukcekmece",provinceCode:34,provinceName:"Istanbul"},{name:"Maltepe",normalized:"maltepe",provinceCode:34,provinceName:"Istanbul"},{name:"Pendi\u0307k",normalized:"pendik",provinceCode:34,provinceName:"Istanbul"},{name:"Sancaktepe",normalized:"sancaktepe",provinceCode:34,provinceName:"Istanbul"},{name:"Sariyer",normalized:"sariyer",provinceCode:34,provinceName:"Istanbul"},{name:"Si\u0307li\u0307vri\u0307",normalized:"silivri",provinceCode:34,provinceName:"Istanbul"},{name:"Sultanbeyli\u0307",normalized:"sultanbeyli",provinceCode:34,provinceName:"Istanbul"},{name:"Sultangazi\u0307",normalized:"sultangazi",provinceCode:34,provinceName:"Istanbul"},{name:"\u015Ei\u0307le",normalized:"sile",provinceCode:34,provinceName:"Istanbul"},{name:"\u015Ei\u0307\u015Fli\u0307",normalized:"sisli",provinceCode:34,provinceName:"Istanbul"},{name:"Tuzla",normalized:"tuzla",provinceCode:34,provinceName:"Istanbul"},{name:"\xDCmrani\u0307ye",normalized:"umraniye",provinceCode:34,provinceName:"Istanbul"},{name:"\xDCsk\xFCdar",normalized:"uskudar",provinceCode:34,provinceName:"Istanbul"},{name:"Zeyti\u0307nburnu",normalized:"zeytinburnu",provinceCode:34,provinceName:"Istanbul"},{name:"Ali\u0307a\u011Fa",normalized:"aliaga",provinceCode:35,provinceName:"Izmir"},{name:"Bal\xE7ova",normalized:"balcova",provinceCode:35,provinceName:"Izmir"},{name:"Bayindir",normalized:"bayindir",provinceCode:35,provinceName:"Izmir"},{name:"Bayrakli",normalized:"bayrakli",provinceCode:35,provinceName:"Izmir"},{name:"Bergama",normalized:"bergama",provinceCode:35,provinceName:"Izmir"},{name:"Beyda\u011F",normalized:"beydag",provinceCode:35,provinceName:"Izmir"},{name:"Bornova",normalized:"bornova",provinceCode:35,provinceName:"Izmir"},{name:"Buca",normalized:"buca",provinceCode:35,provinceName:"Izmir"},{name:"\xC7e\u015Fme",normalized:"cesme",provinceCode:35,provinceName:"Izmir"},{name:"\xC7i\u0307\u011Fli\u0307",normalized:"cigli",provinceCode:35,provinceName:"Izmir"},{name:"Di\u0307ki\u0307li\u0307",normalized:"dikili",provinceCode:35,provinceName:"Izmir"},{name:"Fo\xE7a",normalized:"foca",provinceCode:35,provinceName:"Izmir"},{name:"Gazi\u0307emi\u0307r",normalized:"gaziemir",provinceCode:35,provinceName:"Izmir"},{name:"G\xFCzelbah\xE7e",normalized:"guzelbahce",provinceCode:35,provinceName:"Izmir"},{name:"Karaba\u011Flar",normalized:"karabaglar",provinceCode:35,provinceName:"Izmir"},{name:"Karaburun",normalized:"karaburun",provinceCode:35,provinceName:"Izmir"},{name:"Kar\u015Fiyaka",normalized:"karsiyaka",provinceCode:35,provinceName:"Izmir"},{name:"Kemalpa\u015Fa",normalized:"kemalpasa",provinceCode:35,provinceName:"Izmir"},{name:"Kinik",normalized:"kinik",provinceCode:35,provinceName:"Izmir"},{name:"Ki\u0307raz",normalized:"kiraz",provinceCode:35,provinceName:"Izmir"},{name:"Konak",normalized:"konak",provinceCode:35,provinceName:"Izmir"},{name:"Menderes",normalized:"menderes",provinceCode:35,provinceName:"Izmir"},{name:"Menemen",normalized:"menemen",provinceCode:35,provinceName:"Izmir"},{name:"Narlidere",normalized:"narlidere",provinceCode:35,provinceName:"Izmir"},{name:"\xD6demi\u0307\u015F",normalized:"odemis",provinceCode:35,provinceName:"Izmir"},{name:"Seferi\u0307hi\u0307sar",normalized:"seferihisar",provinceCode:35,provinceName:"Izmir"},{name:"Sel\xE7uk",normalized:"selcuk",provinceCode:35,provinceName:"Izmir"},{name:"Ti\u0307re",normalized:"tire",provinceCode:35,provinceName:"Izmir"},{name:"Torbali",normalized:"torbali",provinceCode:35,provinceName:"Izmir"},{name:"Urla",normalized:"urla",provinceCode:35,provinceName:"Izmir"},{name:"Akyaka",normalized:"akyaka",provinceCode:36,provinceName:"Kars"},{name:"Arpa\xE7ay",normalized:"arpacay",provinceCode:36,provinceName:"Kars"},{name:"Di\u0307gor",normalized:"digor",provinceCode:36,provinceName:"Kars"},{name:"Ka\u011Fizman",normalized:"kagizman",provinceCode:36,provinceName:"Kars"},{name:"Sarikami\u015F",normalized:"sarikamis",provinceCode:36,provinceName:"Kars"},{name:"Seli\u0307m",normalized:"selim",provinceCode:36,provinceName:"Kars"},{name:"Susuz",normalized:"susuz",provinceCode:36,provinceName:"Kars"},{name:"Abana",normalized:"abana",provinceCode:37,provinceName:"Kastamonu"},{name:"A\u011Fli",normalized:"agli",provinceCode:37,provinceName:"Kastamonu"},{name:"Ara\xE7",normalized:"arac",provinceCode:37,provinceName:"Kastamonu"},{name:"Azdavay",normalized:"azdavay",provinceCode:37,provinceName:"Kastamonu"},{name:"Bozkurt",normalized:"bozkurt",provinceCode:37,provinceName:"Kastamonu"},{name:"Ci\u0307de",normalized:"cide",provinceCode:37,provinceName:"Kastamonu"},{name:"\xC7atalzeyti\u0307n",normalized:"catalzeytin",provinceCode:37,provinceName:"Kastamonu"},{name:"Daday",normalized:"daday",provinceCode:37,provinceName:"Kastamonu"},{name:"Devrekani\u0307",normalized:"devrekani",provinceCode:37,provinceName:"Kastamonu"},{name:"Do\u011Fanyurt",normalized:"doganyurt",provinceCode:37,provinceName:"Kastamonu"},{name:"Han\xF6n\xFC",normalized:"hanonu",provinceCode:37,provinceName:"Kastamonu"},{name:"I\u0307hsangazi\u0307",normalized:"ihsangazi",provinceCode:37,provinceName:"Kastamonu"},{name:"I\u0307nebolu",normalized:"inebolu",provinceCode:37,provinceName:"Kastamonu"},{name:"K\xFCre",normalized:"kure",provinceCode:37,provinceName:"Kastamonu"},{name:"Pinarba\u015Fi",normalized:"pinarbasi",provinceCode:37,provinceName:"Kastamonu"},{name:"Seydi\u0307ler",normalized:"seydiler",provinceCode:37,provinceName:"Kastamonu"},{name:"\u015Eenpazar",normalized:"senpazar",provinceCode:37,provinceName:"Kastamonu"},{name:"Ta\u015Fk\xF6pr\xFC",normalized:"taskopru",provinceCode:37,provinceName:"Kastamonu"},{name:"Tosya",normalized:"tosya",provinceCode:37,provinceName:"Kastamonu"},{name:"Akki\u015Fla",normalized:"akkisla",provinceCode:38,provinceName:"Kayseri"},{name:"B\xFCnyan",normalized:"bunyan",provinceCode:38,provinceName:"Kayseri"},{name:"Develi\u0307",normalized:"develi",provinceCode:38,provinceName:"Kayseri"},{name:"Felahi\u0307ye",normalized:"felahiye",provinceCode:38,provinceName:"Kayseri"},{name:"Hacilar",normalized:"hacilar",provinceCode:38,provinceName:"Kayseri"},{name:"I\u0307ncesu",normalized:"incesu",provinceCode:38,provinceName:"Kayseri"},{name:"Kocasi\u0307nan",normalized:"kocasinan",provinceCode:38,provinceName:"Kayseri"},{name:"Meli\u0307kgazi\u0307",normalized:"melikgazi",provinceCode:38,provinceName:"Kayseri"},{name:"\xD6zvatan",normalized:"ozvatan",provinceCode:38,provinceName:"Kayseri"},{name:"Pinarba\u015Fi",normalized:"pinarbasi",provinceCode:38,provinceName:"Kayseri"},{name:"Sario\u011Flan",normalized:"sarioglan",provinceCode:38,provinceName:"Kayseri"},{name:"Sariz",normalized:"sariz",provinceCode:38,provinceName:"Kayseri"},{name:"Talas",normalized:"talas",provinceCode:38,provinceName:"Kayseri"},{name:"Tomarza",normalized:"tomarza",provinceCode:38,provinceName:"Kayseri"},{name:"Yahyali",normalized:"yahyali",provinceCode:38,provinceName:"Kayseri"},{name:"Ye\u015Fi\u0307lhi\u0307sar",normalized:"yesilhisar",provinceCode:38,provinceName:"Kayseri"},{name:"Babaeski\u0307",normalized:"babaeski",provinceCode:39,provinceName:"Kirklareli"},{name:"Demi\u0307rk\xF6y",normalized:"demirkoy",provinceCode:39,provinceName:"Kirklareli"},{name:"Kof\xE7az",normalized:"kofcaz",provinceCode:39,provinceName:"Kirklareli"},{name:"L\xFCleburgaz",normalized:"luleburgaz",provinceCode:39,provinceName:"Kirklareli"},{name:"Pehli\u0307vank\xF6y",normalized:"pehlivankoy",provinceCode:39,provinceName:"Kirklareli"},{name:"Pinarhi\u0307sar",normalized:"pinarhisar",provinceCode:39,provinceName:"Kirklareli"},{name:"Vi\u0307ze",normalized:"vize",provinceCode:39,provinceName:"Kirklareli"},{name:"Ak\xE7akent",normalized:"akcakent",provinceCode:40,provinceName:"Kirsehir"},{name:"Akpinar",normalized:"akpinar",provinceCode:40,provinceName:"Kirsehir"},{name:"Boztepe",normalized:"boztepe",provinceCode:40,provinceName:"Kirsehir"},{name:"\xC7i\u0307\xE7ekda\u011Fi",normalized:"cicekdagi",provinceCode:40,provinceName:"Kirsehir"},{name:"Kaman",normalized:"kaman",provinceCode:40,provinceName:"Kirsehir"},{name:"Mucur",normalized:"mucur",provinceCode:40,provinceName:"Kirsehir"},{name:"Ba\u015Fi\u0307skele",normalized:"basiskele",provinceCode:41,provinceName:"Kocaeli"},{name:"\xC7ayirova",normalized:"cayirova",provinceCode:41,provinceName:"Kocaeli"},{name:"Darica",normalized:"darica",provinceCode:41,provinceName:"Kocaeli"},{name:"Deri\u0307nce",normalized:"derince",provinceCode:41,provinceName:"Kocaeli"},{name:"Di\u0307lovasi",normalized:"dilovasi",provinceCode:41,provinceName:"Kocaeli"},{name:"Gebze",normalized:"gebze",provinceCode:41,provinceName:"Kocaeli"},{name:"G\xF6lc\xFCk",normalized:"golcuk",provinceCode:41,provinceName:"Kocaeli"},{name:"I\u0307zmi\u0307t",normalized:"izmit",provinceCode:41,provinceName:"Kocaeli"},{name:"Kandira",normalized:"kandira",provinceCode:41,provinceName:"Kocaeli"},{name:"Karam\xFCrsel",normalized:"karamursel",provinceCode:41,provinceName:"Kocaeli"},{name:"Kartepe",normalized:"kartepe",provinceCode:41,provinceName:"Kocaeli"},{name:"K\xF6rfez",normalized:"korfez",provinceCode:41,provinceName:"Kocaeli"},{name:"Ahirli",normalized:"ahirli",provinceCode:42,provinceName:"Konya"},{name:"Ak\xF6ren",normalized:"akoren",provinceCode:42,provinceName:"Konya"},{name:"Ak\u015Fehi\u0307r",normalized:"aksehir",provinceCode:42,provinceName:"Konya"},{name:"Altineki\u0307n",normalized:"altinekin",provinceCode:42,provinceName:"Konya"},{name:"Bey\u015Fehi\u0307r",normalized:"beysehir",provinceCode:42,provinceName:"Konya"},{name:"Bozkir",normalized:"bozkir",provinceCode:42,provinceName:"Konya"},{name:"Ci\u0307hanbeyli\u0307",normalized:"cihanbeyli",provinceCode:42,provinceName:"Konya"},{name:"\xC7elti\u0307k",normalized:"celtik",provinceCode:42,provinceName:"Konya"},{name:"\xC7umra",normalized:"cumra",provinceCode:42,provinceName:"Konya"},{name:"Derbent",normalized:"derbent",provinceCode:42,provinceName:"Konya"},{name:"Derebucak",normalized:"derebucak",provinceCode:42,provinceName:"Konya"},{name:"Do\u011Fanhi\u0307sar",normalized:"doganhisar",provinceCode:42,provinceName:"Konya"},{name:"Emi\u0307rgazi\u0307",normalized:"emirgazi",provinceCode:42,provinceName:"Konya"},{name:"Ere\u011Fli\u0307",normalized:"eregli",provinceCode:42,provinceName:"Konya"},{name:"G\xFCneysinir",normalized:"guneysinir",provinceCode:42,provinceName:"Konya"},{name:"Hadi\u0307m",normalized:"hadim",provinceCode:42,provinceName:"Konya"},{name:"Halkapinar",normalized:"halkapinar",provinceCode:42,provinceName:"Konya"},{name:"H\xFCy\xFCk",normalized:"huyuk",provinceCode:42,provinceName:"Konya"},{name:"Ilgin",normalized:"ilgin",provinceCode:42,provinceName:"Konya"},{name:"Kadinhani",normalized:"kadinhani",provinceCode:42,provinceName:"Konya"},{name:"Karapinar",normalized:"karapinar",provinceCode:42,provinceName:"Konya"},{name:"Karatay",normalized:"karatay",provinceCode:42,provinceName:"Konya"},{name:"Kulu",normalized:"kulu",provinceCode:42,provinceName:"Konya"},{name:"Meram",normalized:"meram",provinceCode:42,provinceName:"Konya"},{name:"Saray\xF6n\xFC",normalized:"sarayonu",provinceCode:42,provinceName:"Konya"},{name:"Sel\xE7uklu",normalized:"selcuklu",provinceCode:42,provinceName:"Konya"},{name:"Seydi\u0307\u015Fehi\u0307r",normalized:"seydisehir",provinceCode:42,provinceName:"Konya"},{name:"Ta\u015Fkent",normalized:"taskent",provinceCode:42,provinceName:"Konya"},{name:"Tuzluk\xE7u",normalized:"tuzlukcu",provinceCode:42,provinceName:"Konya"},{name:"Yalih\xFCy\xFCk",normalized:"yalihuyuk",provinceCode:42,provinceName:"Konya"},{name:"Yunak",normalized:"yunak",provinceCode:42,provinceName:"Konya"},{name:"Altinta\u015F",normalized:"altintas",provinceCode:43,provinceName:"Kutahya"},{name:"Aslanapa",normalized:"aslanapa",provinceCode:43,provinceName:"Kutahya"},{name:"\xC7avdarhi\u0307sar",normalized:"cavdarhisar",provinceCode:43,provinceName:"Kutahya"},{name:"Domani\u0307\xE7",normalized:"domanic",provinceCode:43,provinceName:"Kutahya"},{name:"Dumlupinar",normalized:"dumlupinar",provinceCode:43,provinceName:"Kutahya"},{name:"Emet",normalized:"emet",provinceCode:43,provinceName:"Kutahya"},{name:"Gedi\u0307z",normalized:"gediz",provinceCode:43,provinceName:"Kutahya"},{name:"Hi\u0307sarcik",normalized:"hisarcik",provinceCode:43,provinceName:"Kutahya"},{name:"Pazarlar",normalized:"pazarlar",provinceCode:43,provinceName:"Kutahya"},{name:"Si\u0307mav",normalized:"simav",provinceCode:43,provinceName:"Kutahya"},{name:"\u015Eaphane",normalized:"saphane",provinceCode:43,provinceName:"Kutahya"},{name:"Tav\u015Fanli",normalized:"tavsanli",provinceCode:43,provinceName:"Kutahya"},{name:"Ak\xE7ada\u011F",normalized:"akcadag",provinceCode:44,provinceName:"Malatya"},{name:"Arapgi\u0307r",normalized:"arapgir",provinceCode:44,provinceName:"Malatya"},{name:"Arguvan",normalized:"arguvan",provinceCode:44,provinceName:"Malatya"},{name:"Battalgazi\u0307",normalized:"battalgazi",provinceCode:44,provinceName:"Malatya"},{name:"Darende",normalized:"darende",provinceCode:44,provinceName:"Malatya"},{name:"Do\u011Fan\u015Fehi\u0307r",normalized:"dogansehir",provinceCode:44,provinceName:"Malatya"},{name:"Do\u011Fanyol",normalized:"doganyol",provinceCode:44,provinceName:"Malatya"},{name:"Heki\u0307mhan",normalized:"hekimhan",provinceCode:44,provinceName:"Malatya"},{name:"Kale",normalized:"kale",provinceCode:44,provinceName:"Malatya"},{name:"Kuluncak",normalized:"kuluncak",provinceCode:44,provinceName:"Malatya"},{name:"P\xFCt\xFCrge",normalized:"puturge",provinceCode:44,provinceName:"Malatya"},{name:"Yazihan",normalized:"yazihan",provinceCode:44,provinceName:"Malatya"},{name:"Ye\u015Fi\u0307lyurt",normalized:"yesilyurt",provinceCode:44,provinceName:"Malatya"},{name:"Ahmetli\u0307",normalized:"ahmetli",provinceCode:45,provinceName:"Manisa"},{name:"Akhi\u0307sar",normalized:"akhisar",provinceCode:45,provinceName:"Manisa"},{name:"Ala\u015Fehi\u0307r",normalized:"alasehir",provinceCode:45,provinceName:"Manisa"},{name:"Demi\u0307rci\u0307",normalized:"demirci",provinceCode:45,provinceName:"Manisa"},{name:"G\xF6lmarmara",normalized:"golmarmara",provinceCode:45,provinceName:"Manisa"},{name:"G\xF6rdes",normalized:"gordes",provinceCode:45,provinceName:"Manisa"},{name:"Kirka\u011Fa\xE7",normalized:"kirkagac",provinceCode:45,provinceName:"Manisa"},{name:"K\xF6pr\xFCba\u015Fi",normalized:"koprubasi",provinceCode:45,provinceName:"Manisa"},{name:"Kula",normalized:"kula",provinceCode:45,provinceName:"Manisa"},{name:"Sali\u0307hli\u0307",normalized:"salihli",provinceCode:45,provinceName:"Manisa"},{name:"Sarig\xF6l",normalized:"sarigol",provinceCode:45,provinceName:"Manisa"},{name:"Saruhanli",normalized:"saruhanli",provinceCode:45,provinceName:"Manisa"},{name:"Selendi\u0307",normalized:"selendi",provinceCode:45,provinceName:"Manisa"},{name:"Soma",normalized:"soma",provinceCode:45,provinceName:"Manisa"},{name:"\u015Eehzadeler",normalized:"sehzadeler",provinceCode:45,provinceName:"Manisa"},{name:"Turgutlu",normalized:"turgutlu",provinceCode:45,provinceName:"Manisa"},{name:"Yunusemre",normalized:"yunusemre",provinceCode:45,provinceName:"Manisa"},{name:"Af\u015Fi\u0307n",normalized:"afsin",provinceCode:46,provinceName:"Kahramanmaras"},{name:"Andirin",normalized:"andirin",provinceCode:46,provinceName:"Kahramanmaras"},{name:"\xC7a\u011Flayanceri\u0307t",normalized:"caglayancerit",provinceCode:46,provinceName:"Kahramanmaras"},{name:"Dulkadi\u0307ro\u011Flu",normalized:"dulkadiroglu",provinceCode:46,provinceName:"Kahramanmaras"},{name:"Eki\u0307n\xF6z\xFC",normalized:"ekinozu",provinceCode:46,provinceName:"Kahramanmaras"},{name:"Elbi\u0307stan",normalized:"elbistan",provinceCode:46,provinceName:"Kahramanmaras"},{name:"G\xF6ksun",normalized:"goksun",provinceCode:46,provinceName:"Kahramanmaras"},{name:"Nurhak",normalized:"nurhak",provinceCode:46,provinceName:"Kahramanmaras"},{name:"Oni\u0307ki\u0307\u015Fubat",normalized:"onikisubat",provinceCode:46,provinceName:"Kahramanmaras"},{name:"Pazarcik",normalized:"pazarcik",provinceCode:46,provinceName:"Kahramanmaras"},{name:"T\xFCrko\u011Flu",normalized:"turkoglu",provinceCode:46,provinceName:"Kahramanmaras"},{name:"Artuklu",normalized:"artuklu",provinceCode:47,provinceName:"Mardin"},{name:"Darge\xE7i\u0307t",normalized:"dargecit",provinceCode:47,provinceName:"Mardin"},{name:"Deri\u0307k",normalized:"derik",provinceCode:47,provinceName:"Mardin"},{name:"Kiziltepe",normalized:"kiziltepe",provinceCode:47,provinceName:"Mardin"},{name:"Mazida\u011Fi",normalized:"mazidagi",provinceCode:47,provinceName:"Mardin"},{name:"Mi\u0307dyat",normalized:"midyat",provinceCode:47,provinceName:"Mardin"},{name:"Nusaybi\u0307n",normalized:"nusaybin",provinceCode:47,provinceName:"Mardin"},{name:"\xD6merli\u0307",normalized:"omerli",provinceCode:47,provinceName:"Mardin"},{name:"Savur",normalized:"savur",provinceCode:47,provinceName:"Mardin"},{name:"Ye\u015Fi\u0307lli\u0307",normalized:"yesilli",provinceCode:47,provinceName:"Mardin"},{name:"Bodrum",normalized:"bodrum",provinceCode:48,provinceName:"Mugla"},{name:"Dalaman",normalized:"dalaman",provinceCode:48,provinceName:"Mugla"},{name:"Dat\xE7a",normalized:"datca",provinceCode:48,provinceName:"Mugla"},{name:"Fethi\u0307ye",normalized:"fethiye",provinceCode:48,provinceName:"Mugla"},{name:"Kavaklidere",normalized:"kavaklidere",provinceCode:48,provinceName:"Mugla"},{name:"K\xF6yce\u011Fi\u0307z",normalized:"koycegiz",provinceCode:48,provinceName:"Mugla"},{name:"Marmari\u0307s",normalized:"marmaris",provinceCode:48,provinceName:"Mugla"},{name:"Mente\u015Fe",normalized:"mentese",provinceCode:48,provinceName:"Mugla"},{name:"Mi\u0307las",normalized:"milas",provinceCode:48,provinceName:"Mugla"},{name:"Ortaca",normalized:"ortaca",provinceCode:48,provinceName:"Mugla"},{name:"Seydi\u0307kemer",normalized:"seydikemer",provinceCode:48,provinceName:"Mugla"},{name:"Ula",normalized:"ula",provinceCode:48,provinceName:"Mugla"},{name:"Yata\u011Fan",normalized:"yatagan",provinceCode:48,provinceName:"Mugla"},{name:"Bulanik",normalized:"bulanik",provinceCode:49,provinceName:"Mus"},{name:"Hask\xF6y",normalized:"haskoy",provinceCode:49,provinceName:"Mus"},{name:"Korkut",normalized:"korkut",provinceCode:49,provinceName:"Mus"},{name:"Malazgi\u0307rt",normalized:"malazgirt",provinceCode:49,provinceName:"Mus"},{name:"Varto",normalized:"varto",provinceCode:49,provinceName:"Mus"},{name:"Acig\xF6l",normalized:"acigol",provinceCode:50,provinceName:"Nevsehir"},{name:"Avanos",normalized:"avanos",provinceCode:50,provinceName:"Nevsehir"},{name:"Deri\u0307nkuyu",normalized:"derinkuyu",provinceCode:50,provinceName:"Nevsehir"},{name:"G\xFCl\u015Fehi\u0307r",normalized:"gulsehir",provinceCode:50,provinceName:"Nevsehir"},{name:"Hacibekta\u015F",normalized:"hacibektas",provinceCode:50,provinceName:"Nevsehir"},{name:"Kozakli",normalized:"kozakli",provinceCode:50,provinceName:"Nevsehir"},{name:"\xDCrg\xFCp",normalized:"urgup",provinceCode:50,provinceName:"Nevsehir"},{name:"Altunhi\u0307sar",normalized:"altunhisar",provinceCode:51,provinceName:"Nigde"},{name:"Bor",normalized:"bor",provinceCode:51,provinceName:"Nigde"},{name:"\xC7amardi",normalized:"camardi",provinceCode:51,provinceName:"Nigde"},{name:"\xC7i\u0307ftli\u0307k",normalized:"ciftlik",provinceCode:51,provinceName:"Nigde"},{name:"Uluki\u015Fla",normalized:"ulukisla",provinceCode:51,provinceName:"Nigde"},{name:"Akku\u015F",normalized:"akkus",provinceCode:52,provinceName:"Ordu"},{name:"Altinordu",normalized:"altinordu",provinceCode:52,provinceName:"Ordu"},{name:"Aybasti",normalized:"aybasti",provinceCode:52,provinceName:"Ordu"},{name:"\xC7ama\u015F",normalized:"camas",provinceCode:52,provinceName:"Ordu"},{name:"\xC7atalpinar",normalized:"catalpinar",provinceCode:52,provinceName:"Ordu"},{name:"\xC7ayba\u015Fi",normalized:"caybasi",provinceCode:52,provinceName:"Ordu"},{name:"Fatsa",normalized:"fatsa",provinceCode:52,provinceName:"Ordu"},{name:"G\xF6lk\xF6y",normalized:"golkoy",provinceCode:52,provinceName:"Ordu"},{name:"G\xFClyali",normalized:"gulyali",provinceCode:52,provinceName:"Ordu"},{name:"G\xFCrgentepe",normalized:"gurgentepe",provinceCode:52,provinceName:"Ordu"},{name:"I\u0307ki\u0307zce",normalized:"ikizce",provinceCode:52,provinceName:"Ordu"},{name:"Kabad\xFCz",normalized:"kabaduz",provinceCode:52,provinceName:"Ordu"},{name:"Kabata\u015F",normalized:"kabatas",provinceCode:52,provinceName:"Ordu"},{name:"Korgan",normalized:"korgan",provinceCode:52,provinceName:"Ordu"},{name:"Kumru",normalized:"kumru",provinceCode:52,provinceName:"Ordu"},{name:"Mesudi\u0307ye",normalized:"mesudiye",provinceCode:52,provinceName:"Ordu"},{name:"Per\u015Fembe",normalized:"persembe",provinceCode:52,provinceName:"Ordu"},{name:"Ulubey",normalized:"ulubey",provinceCode:52,provinceName:"Ordu"},{name:"\xDCnye",normalized:"unye",provinceCode:52,provinceName:"Ordu"},{name:"Arde\u015Fen",normalized:"ardesen",provinceCode:53,provinceName:"Rize"},{name:"\xC7amlihem\u015Fi\u0307n",normalized:"camlihemsin",provinceCode:53,provinceName:"Rize"},{name:"\xC7ayeli\u0307",normalized:"cayeli",provinceCode:53,provinceName:"Rize"},{name:"Derepazari",normalized:"derepazari",provinceCode:53,provinceName:"Rize"},{name:"Findikli",normalized:"findikli",provinceCode:53,provinceName:"Rize"},{name:"G\xFCneysu",normalized:"guneysu",provinceCode:53,provinceName:"Rize"},{name:"Hem\u015Fi\u0307n",normalized:"hemsin",provinceCode:53,provinceName:"Rize"},{name:"I\u0307ki\u0307zdere",normalized:"ikizdere",provinceCode:53,provinceName:"Rize"},{name:"I\u0307yi\u0307dere",normalized:"iyidere",provinceCode:53,provinceName:"Rize"},{name:"Kalkandere",normalized:"kalkandere",provinceCode:53,provinceName:"Rize"},{name:"Pazar",normalized:"pazar",provinceCode:53,provinceName:"Rize"},{name:"Adapazari",normalized:"adapazari",provinceCode:54,provinceName:"Sakarya"},{name:"Akyazi",normalized:"akyazi",provinceCode:54,provinceName:"Sakarya"},{name:"Ari\u0307fi\u0307ye",normalized:"arifiye",provinceCode:54,provinceName:"Sakarya"},{name:"Erenler",normalized:"erenler",provinceCode:54,provinceName:"Sakarya"},{name:"Feri\u0307zli\u0307",normalized:"ferizli",provinceCode:54,provinceName:"Sakarya"},{name:"Geyve",normalized:"geyve",provinceCode:54,provinceName:"Sakarya"},{name:"Hendek",normalized:"hendek",provinceCode:54,provinceName:"Sakarya"},{name:"Karap\xFCr\xE7ek",normalized:"karapurcek",provinceCode:54,provinceName:"Sakarya"},{name:"Karasu",normalized:"karasu",provinceCode:54,provinceName:"Sakarya"},{name:"Kaynarca",normalized:"kaynarca",provinceCode:54,provinceName:"Sakarya"},{name:"Kocaali\u0307",normalized:"kocaali",provinceCode:54,provinceName:"Sakarya"},{name:"Pamukova",normalized:"pamukova",provinceCode:54,provinceName:"Sakarya"},{name:"Sapanca",normalized:"sapanca",provinceCode:54,provinceName:"Sakarya"},{name:"Serdi\u0307van",normalized:"serdivan",provinceCode:54,provinceName:"Sakarya"},{name:"S\xF6\u011F\xFCtl\xFC",normalized:"sogutlu",provinceCode:54,provinceName:"Sakarya"},{name:"Tarakli",normalized:"tarakli",provinceCode:54,provinceName:"Sakarya"},{name:"19 Mayis",normalized:"19 mayis",provinceCode:55,provinceName:"Samsun"},{name:"Ala\xE7am",normalized:"alacam",provinceCode:55,provinceName:"Samsun"},{name:"Asarcik",normalized:"asarcik",provinceCode:55,provinceName:"Samsun"},{name:"Atakum",normalized:"atakum",provinceCode:55,provinceName:"Samsun"},{name:"Ayvacik",normalized:"ayvacik",provinceCode:55,provinceName:"Samsun"},{name:"Bafra",normalized:"bafra",provinceCode:55,provinceName:"Samsun"},{name:"Cani\u0307k",normalized:"canik",provinceCode:55,provinceName:"Samsun"},{name:"\xC7ar\u015Famba",normalized:"carsamba",provinceCode:55,provinceName:"Samsun"},{name:"Havza",normalized:"havza",provinceCode:55,provinceName:"Samsun"},{name:"I\u0307lkadim",normalized:"ilkadim",provinceCode:55,provinceName:"Samsun"},{name:"Kavak",normalized:"kavak",provinceCode:55,provinceName:"Samsun"},{name:"Ladi\u0307k",normalized:"ladik",provinceCode:55,provinceName:"Samsun"},{name:"Salipazari",normalized:"salipazari",provinceCode:55,provinceName:"Samsun"},{name:"Tekkek\xF6y",normalized:"tekkekoy",provinceCode:55,provinceName:"Samsun"},{name:"Terme",normalized:"terme",provinceCode:55,provinceName:"Samsun"},{name:"Vezi\u0307rk\xF6pr\xFC",normalized:"vezirkopru",provinceCode:55,provinceName:"Samsun"},{name:"Yakakent",normalized:"yakakent",provinceCode:55,provinceName:"Samsun"},{name:"Baykan",normalized:"baykan",provinceCode:56,provinceName:"Siirt"},{name:"Eruh",normalized:"eruh",provinceCode:56,provinceName:"Siirt"},{name:"Kurtalan",normalized:"kurtalan",provinceCode:56,provinceName:"Siirt"},{name:"Pervari\u0307",normalized:"pervari",provinceCode:56,provinceName:"Siirt"},{name:"\u015Ei\u0307rvan",normalized:"sirvan",provinceCode:56,provinceName:"Siirt"},{name:"Ti\u0307llo",normalized:"tillo",provinceCode:56,provinceName:"Siirt"},{name:"Ayancik",normalized:"ayancik",provinceCode:57,provinceName:"Sinop"},{name:"Boyabat",normalized:"boyabat",provinceCode:57,provinceName:"Sinop"},{name:"Di\u0307kmen",normalized:"dikmen",provinceCode:57,provinceName:"Sinop"},{name:"Dura\u011Fan",normalized:"duragan",provinceCode:57,provinceName:"Sinop"},{name:"Erfelek",normalized:"erfelek",provinceCode:57,provinceName:"Sinop"},{name:"Gerze",normalized:"gerze",provinceCode:57,provinceName:"Sinop"},{name:"Sarayd\xFCz\xFC",normalized:"sarayduzu",provinceCode:57,provinceName:"Sinop"},{name:"T\xFCrkeli\u0307",normalized:"turkeli",provinceCode:57,provinceName:"Sinop"},{name:"Akincilar",normalized:"akincilar",provinceCode:58,provinceName:"Sivas"},{name:"Altinyayla",normalized:"altinyayla",provinceCode:58,provinceName:"Sivas"},{name:"Di\u0307vri\u0307\u011Fi\u0307",normalized:"divrigi",provinceCode:58,provinceName:"Sivas"},{name:"Do\u011Fan\u015Far",normalized:"dogansar",provinceCode:58,provinceName:"Sivas"},{name:"Gemerek",normalized:"gemerek",provinceCode:58,provinceName:"Sivas"},{name:"G\xF6lova",normalized:"golova",provinceCode:58,provinceName:"Sivas"},{name:"G\xFCr\xFCn",normalized:"gurun",provinceCode:58,provinceName:"Sivas"},{name:"Hafi\u0307k",normalized:"hafik",provinceCode:58,provinceName:"Sivas"},{name:"I\u0307mranli",normalized:"imranli",provinceCode:58,provinceName:"Sivas"},{name:"Kangal",normalized:"kangal",provinceCode:58,provinceName:"Sivas"},{name:"Koyulhi\u0307sar",normalized:"koyulhisar",provinceCode:58,provinceName:"Sivas"},{name:"Su\u015Fehri\u0307",normalized:"susehri",provinceCode:58,provinceName:"Sivas"},{name:"\u015Earki\u015Fla",normalized:"sarkisla",provinceCode:58,provinceName:"Sivas"},{name:"Ula\u015F",normalized:"ulas",provinceCode:58,provinceName:"Sivas"},{name:"Yildizeli\u0307",normalized:"yildizeli",provinceCode:58,provinceName:"Sivas"},{name:"Zara",normalized:"zara",provinceCode:58,provinceName:"Sivas"},{name:"\xC7erkezk\xF6y",normalized:"cerkezkoy",provinceCode:59,provinceName:"Tekirdag"},{name:"\xC7orlu",normalized:"corlu",provinceCode:59,provinceName:"Tekirdag"},{name:"Ergene",normalized:"ergene",provinceCode:59,provinceName:"Tekirdag"},{name:"Hayrabolu",normalized:"hayrabolu",provinceCode:59,provinceName:"Tekirdag"},{name:"Kapakli",normalized:"kapakli",provinceCode:59,provinceName:"Tekirdag"},{name:"Malkara",normalized:"malkara",provinceCode:59,provinceName:"Tekirdag"},{name:"Marmaraere\u011Fli\u0307si\u0307",normalized:"marmaraereglisi",provinceCode:59,provinceName:"Tekirdag"},{name:"Muratli",normalized:"muratli",provinceCode:59,provinceName:"Tekirdag"},{name:"Saray",normalized:"saray",provinceCode:59,provinceName:"Tekirdag"},{name:"S\xFCleymanpa\u015Fa",normalized:"suleymanpasa",provinceCode:59,provinceName:"Tekirdag"},{name:"\u015Eark\xF6y",normalized:"sarkoy",provinceCode:59,provinceName:"Tekirdag"},{name:"Almus",normalized:"almus",provinceCode:60,provinceName:"Tokat"},{name:"Artova",normalized:"artova",provinceCode:60,provinceName:"Tokat"},{name:"Ba\u015F\xE7i\u0307ftli\u0307k",normalized:"basciftlik",provinceCode:60,provinceName:"Tokat"},{name:"Erbaa",normalized:"erbaa",provinceCode:60,provinceName:"Tokat"},{name:"Ni\u0307ksar",normalized:"niksar",provinceCode:60,provinceName:"Tokat"},{name:"Pazar",normalized:"pazar",provinceCode:60,provinceName:"Tokat"},{name:"Re\u015Fadi\u0307ye",normalized:"resadiye",provinceCode:60,provinceName:"Tokat"},{name:"Sulusaray",normalized:"sulusaray",provinceCode:60,provinceName:"Tokat"},{name:"Turhal",normalized:"turhal",provinceCode:60,provinceName:"Tokat"},{name:"Ye\u015Fi\u0307lyurt",normalized:"yesilyurt",provinceCode:60,provinceName:"Tokat"},{name:"Zi\u0307le",normalized:"zile",provinceCode:60,provinceName:"Tokat"},{name:"Ak\xE7aabat",normalized:"akcaabat",provinceCode:61,provinceName:"Trabzon"},{name:"Arakli",normalized:"arakli",provinceCode:61,provinceName:"Trabzon"},{name:"Arsi\u0307n",normalized:"arsin",provinceCode:61,provinceName:"Trabzon"},{name:"Be\u015Fi\u0307kd\xFCz\xFC",normalized:"besikduzu",provinceCode:61,provinceName:"Trabzon"},{name:"\xC7ar\u015Fiba\u015Fi",normalized:"carsibasi",provinceCode:61,provinceName:"Trabzon"},{name:"\xC7aykara",normalized:"caykara",provinceCode:61,provinceName:"Trabzon"},{name:"Dernekpazari",normalized:"dernekpazari",provinceCode:61,provinceName:"Trabzon"},{name:"D\xFCzk\xF6y",normalized:"duzkoy",provinceCode:61,provinceName:"Trabzon"},{name:"Hayrat",normalized:"hayrat",provinceCode:61,provinceName:"Trabzon"},{name:"K\xF6pr\xFCba\u015Fi",normalized:"koprubasi",provinceCode:61,provinceName:"Trabzon"},{name:"Ma\xE7ka",normalized:"macka",provinceCode:61,provinceName:"Trabzon"},{name:"Of",normalized:"of",provinceCode:61,provinceName:"Trabzon"},{name:"Ortahi\u0307sar",normalized:"ortahisar",provinceCode:61,provinceName:"Trabzon"},{name:"S\xFCrmene",normalized:"surmene",provinceCode:61,provinceName:"Trabzon"},{name:"\u015Ealpazari",normalized:"salpazari",provinceCode:61,provinceName:"Trabzon"},{name:"Tonya",normalized:"tonya",provinceCode:61,provinceName:"Trabzon"},{name:"Vakfikebi\u0307r",normalized:"vakfikebir",provinceCode:61,provinceName:"Trabzon"},{name:"Yomra",normalized:"yomra",provinceCode:61,provinceName:"Trabzon"},{name:"\xC7emi\u0307\u015Fgezek",normalized:"cemisgezek",provinceCode:62,provinceName:"Tunceli"},{name:"Hozat",normalized:"hozat",provinceCode:62,provinceName:"Tunceli"},{name:"Mazgi\u0307rt",normalized:"mazgirt",provinceCode:62,provinceName:"Tunceli"},{name:"Nazimi\u0307ye",normalized:"nazimiye",provinceCode:62,provinceName:"Tunceli"},{name:"Ovacik",normalized:"ovacik",provinceCode:62,provinceName:"Tunceli"},{name:"Pertek",normalized:"pertek",provinceCode:62,provinceName:"Tunceli"},{name:"P\xFCl\xFCm\xFCr",normalized:"pulumur",provinceCode:62,provinceName:"Tunceli"},{name:"Ak\xE7akale",normalized:"akcakale",provinceCode:63,provinceName:"Sanliurfa"},{name:"Bi\u0307reci\u0307k",normalized:"birecik",provinceCode:63,provinceName:"Sanliurfa"},{name:"Bozova",normalized:"bozova",provinceCode:63,provinceName:"Sanliurfa"},{name:"Ceylanpinar",normalized:"ceylanpinar",provinceCode:63,provinceName:"Sanliurfa"},{name:"Eyy\xFCbi\u0307ye",normalized:"eyyubiye",provinceCode:63,provinceName:"Sanliurfa"},{name:"Halfeti\u0307",normalized:"halfeti",provinceCode:63,provinceName:"Sanliurfa"},{name:"Hali\u0307li\u0307ye",normalized:"haliliye",provinceCode:63,provinceName:"Sanliurfa"},{name:"Harran",normalized:"harran",provinceCode:63,provinceName:"Sanliurfa"},{name:"Hi\u0307lvan",normalized:"hilvan",provinceCode:63,provinceName:"Sanliurfa"},{name:"Karak\xF6pr\xFC",normalized:"karakopru",provinceCode:63,provinceName:"Sanliurfa"},{name:"Si\u0307verek",normalized:"siverek",provinceCode:63,provinceName:"Sanliurfa"},{name:"Suru\xE7",normalized:"suruc",provinceCode:63,provinceName:"Sanliurfa"},{name:"Vi\u0307ran\u015Fehi\u0307r",normalized:"viransehir",provinceCode:63,provinceName:"Sanliurfa"},{name:"Banaz",normalized:"banaz",provinceCode:64,provinceName:"Usak"},{name:"E\u015Fme",normalized:"esme",provinceCode:64,provinceName:"Usak"},{name:"Karahalli",normalized:"karahalli",provinceCode:64,provinceName:"Usak"},{name:"Si\u0307vasli",normalized:"sivasli",provinceCode:64,provinceName:"Usak"},{name:"Ulubey",normalized:"ulubey",provinceCode:64,provinceName:"Usak"},{name:"Bah\xE7esaray",normalized:"bahcesaray",provinceCode:65,provinceName:"Van"},{name:"Ba\u015Fkale",normalized:"baskale",provinceCode:65,provinceName:"Van"},{name:"\xC7aldiran",normalized:"caldiran",provinceCode:65,provinceName:"Van"},{name:"\xC7atak",normalized:"catak",provinceCode:65,provinceName:"Van"},{name:"Edremi\u0307t",normalized:"edremit",provinceCode:65,provinceName:"Van"},{name:"Erci\u0307\u015F",normalized:"ercis",provinceCode:65,provinceName:"Van"},{name:"Geva\u015F",normalized:"gevas",provinceCode:65,provinceName:"Van"},{name:"G\xFCrpinar",normalized:"gurpinar",provinceCode:65,provinceName:"Van"},{name:"I\u0307pekyolu",normalized:"ipekyolu",provinceCode:65,provinceName:"Van"},{name:"Muradi\u0307ye",normalized:"muradiye",provinceCode:65,provinceName:"Van"},{name:"\xD6zalp",normalized:"ozalp",provinceCode:65,provinceName:"Van"},{name:"Saray",normalized:"saray",provinceCode:65,provinceName:"Van"},{name:"Tu\u015Fba",normalized:"tusba",provinceCode:65,provinceName:"Van"},{name:"Akda\u011Fmadeni\u0307",normalized:"akdagmadeni",provinceCode:66,provinceName:"Yozgat"},{name:"Aydincik",normalized:"aydincik",provinceCode:66,provinceName:"Yozgat"},{name:"Bo\u011Fazliyan",normalized:"bogazliyan",provinceCode:66,provinceName:"Yozgat"},{name:"\xC7andir",normalized:"candir",provinceCode:66,provinceName:"Yozgat"},{name:"\xC7ayiralan",normalized:"cayiralan",provinceCode:66,provinceName:"Yozgat"},{name:"\xC7ekerek",normalized:"cekerek",provinceCode:66,provinceName:"Yozgat"},{name:"Kadi\u015Fehri\u0307",normalized:"kadisehri",provinceCode:66,provinceName:"Yozgat"},{name:"Saraykent",normalized:"saraykent",provinceCode:66,provinceName:"Yozgat"},{name:"Sarikaya",normalized:"sarikaya",provinceCode:66,provinceName:"Yozgat"},{name:"Sorgun",normalized:"sorgun",provinceCode:66,provinceName:"Yozgat"},{name:"\u015Eefaatli\u0307",normalized:"sefaatli",provinceCode:66,provinceName:"Yozgat"},{name:"Yeni\u0307fakili",normalized:"yenifakili",provinceCode:66,provinceName:"Yozgat"},{name:"Yerk\xF6y",normalized:"yerkoy",provinceCode:66,provinceName:"Yozgat"},{name:"Alapli",normalized:"alapli",provinceCode:67,provinceName:"Zonguldak"},{name:"\xC7aycuma",normalized:"caycuma",provinceCode:67,provinceName:"Zonguldak"},{name:"Devrek",normalized:"devrek",provinceCode:67,provinceName:"Zonguldak"},{name:"Ere\u011Fli\u0307",normalized:"eregli",provinceCode:67,provinceName:"Zonguldak"},{name:"G\xF6k\xE7ebey",normalized:"gokcebey",provinceCode:67,provinceName:"Zonguldak"},{name:"Ki\u0307li\u0307mli\u0307",normalized:"kilimli",provinceCode:67,provinceName:"Zonguldak"},{name:"Kozlu",normalized:"kozlu",provinceCode:67,provinceName:"Zonguldak"},{name:"A\u011Fa\xE7\xF6ren",normalized:"agacoren",provinceCode:68,provinceName:"Aksaray"},{name:"Eski\u0307l",normalized:"eskil",provinceCode:68,provinceName:"Aksaray"},{name:"G\xFCla\u011Fa\xE7",normalized:"gulagac",provinceCode:68,provinceName:"Aksaray"},{name:"G\xFCzelyurt",normalized:"guzelyurt",provinceCode:68,provinceName:"Aksaray"},{name:"Ortak\xF6y",normalized:"ortakoy",provinceCode:68,provinceName:"Aksaray"},{name:"Sariyah\u015Fi\u0307",normalized:"sariyahsi",provinceCode:68,provinceName:"Aksaray"},{name:"Sultanhani",normalized:"sultanhani",provinceCode:68,provinceName:"Aksaray"},{name:"Aydintepe",normalized:"aydintepe",provinceCode:69,provinceName:"Bayburt"},{name:"Demi\u0307r\xF6z\xFC",normalized:"demirozu",provinceCode:69,provinceName:"Bayburt"},{name:"Ayranci",normalized:"ayranci",provinceCode:70,provinceName:"Karaman"},{name:"Ba\u015Fyayla",normalized:"basyayla",provinceCode:70,provinceName:"Karaman"},{name:"Ermenek",normalized:"ermenek",provinceCode:70,provinceName:"Karaman"},{name:"Kazimkarabeki\u0307r",normalized:"kazimkarabekir",provinceCode:70,provinceName:"Karaman"},{name:"Sariveli\u0307ler",normalized:"sariveliler",provinceCode:70,provinceName:"Karaman"},{name:"Bah\u015Fili",normalized:"bahsili",provinceCode:71,provinceName:"Kirikkale"},{name:"Bali\u015Feyh",normalized:"baliseyh",provinceCode:71,provinceName:"Kirikkale"},{name:"\xC7elebi\u0307",normalized:"celebi",provinceCode:71,provinceName:"Kirikkale"},{name:"Deli\u0307ce",normalized:"delice",provinceCode:71,provinceName:"Kirikkale"},{name:"Karake\xE7i\u0307li\u0307",normalized:"karakecili",provinceCode:71,provinceName:"Kirikkale"},{name:"Keski\u0307n",normalized:"keskin",provinceCode:71,provinceName:"Kirikkale"},{name:"Sulakyurt",normalized:"sulakyurt",provinceCode:71,provinceName:"Kirikkale"},{name:"Yah\u015Fi\u0307han",normalized:"yahsihan",provinceCode:71,provinceName:"Kirikkale"},{name:"Be\u015Fi\u0307ri\u0307",normalized:"besiri",provinceCode:72,provinceName:"Batman"},{name:"Gerc\xFC\u015F",normalized:"gercus",provinceCode:72,provinceName:"Batman"},{name:"Hasankeyf",normalized:"hasankeyf",provinceCode:72,provinceName:"Batman"},{name:"Kozluk",normalized:"kozluk",provinceCode:72,provinceName:"Batman"},{name:"Sason",normalized:"sason",provinceCode:72,provinceName:"Batman"},{name:"Beyt\xFC\u015F\u015Febap",normalized:"beytussebap",provinceCode:73,provinceName:"Sirnak"},{name:"Ci\u0307zre",normalized:"cizre",provinceCode:73,provinceName:"Sirnak"},{name:"G\xFC\xE7l\xFCkonak",normalized:"guclukonak",provinceCode:73,provinceName:"Sirnak"},{name:"I\u0307di\u0307l",normalized:"idil",provinceCode:73,provinceName:"Sirnak"},{name:"Si\u0307lopi\u0307",normalized:"silopi",provinceCode:73,provinceName:"Sirnak"},{name:"Uludere",normalized:"uludere",provinceCode:73,provinceName:"Sirnak"},{name:"Amasra",normalized:"amasra",provinceCode:74,provinceName:"Bartin"},{name:"Kuruca\u015Fi\u0307le",normalized:"kurucasile",provinceCode:74,provinceName:"Bartin"},{name:"Ulus",normalized:"ulus",provinceCode:74,provinceName:"Bartin"},{name:"\xC7ildir",normalized:"cildir",provinceCode:75,provinceName:"Ardahan"},{name:"Damal",normalized:"damal",provinceCode:75,provinceName:"Ardahan"},{name:"G\xF6le",normalized:"gole",provinceCode:75,provinceName:"Ardahan"},{name:"Hanak",normalized:"hanak",provinceCode:75,provinceName:"Ardahan"},{name:"Posof",normalized:"posof",provinceCode:75,provinceName:"Ardahan"},{name:"Aralik",normalized:"aralik",provinceCode:76,provinceName:"Igdir"},{name:"Karakoyunlu",normalized:"karakoyunlu",provinceCode:76,provinceName:"Igdir"},{name:"Tuzluca",normalized:"tuzluca",provinceCode:76,provinceName:"Igdir"},{name:"Altinova",normalized:"altinova",provinceCode:77,provinceName:"Yalova"},{name:"Armutlu",normalized:"armutlu",provinceCode:77,provinceName:"Yalova"},{name:"\xC7inarcik",normalized:"cinarcik",provinceCode:77,provinceName:"Yalova"},{name:"\xC7i\u0307ftli\u0307kk\xF6y",normalized:"ciftlikkoy",provinceCode:77,provinceName:"Yalova"},{name:"Termal",normalized:"termal",provinceCode:77,provinceName:"Yalova"},{name:"Eflani\u0307",normalized:"eflani",provinceCode:78,provinceName:"Karabuk"},{name:"Eski\u0307pazar",normalized:"eskipazar",provinceCode:78,provinceName:"Karabuk"},{name:"Ovacik",normalized:"ovacik",provinceCode:78,provinceName:"Karabuk"},{name:"Safranbolu",normalized:"safranbolu",provinceCode:78,provinceName:"Karabuk"},{name:"Yeni\u0307ce",normalized:"yenice",provinceCode:78,provinceName:"Karabuk"},{name:"Elbeyli\u0307",normalized:"elbeyli",provinceCode:79,provinceName:"Kilis"},{name:"Musabeyli\u0307",normalized:"musabeyli",provinceCode:79,provinceName:"Kilis"},{name:"Polateli\u0307",normalized:"polateli",provinceCode:79,provinceName:"Kilis"},{name:"Bah\xE7e",normalized:"bahce",provinceCode:80,provinceName:"Osmaniye"},{name:"D\xFCzi\u0307\xE7i\u0307",normalized:"duzici",provinceCode:80,provinceName:"Osmaniye"},{name:"Hasanbeyli\u0307",normalized:"hasanbeyli",provinceCode:80,provinceName:"Osmaniye"},{name:"Kadi\u0307rli\u0307",normalized:"kadirli",provinceCode:80,provinceName:"Osmaniye"},{name:"Sumbas",normalized:"sumbas",provinceCode:80,provinceName:"Osmaniye"},{name:"Toprakkale",normalized:"toprakkale",provinceCode:80,provinceName:"Osmaniye"},{name:"Ak\xE7akoca",normalized:"akcakoca",provinceCode:81,provinceName:"Duzce"},{name:"Cumayeri\u0307",normalized:"cumayeri",provinceCode:81,provinceName:"Duzce"},{name:"\xC7i\u0307li\u0307mli\u0307",normalized:"cilimli",provinceCode:81,provinceName:"Duzce"},{name:"G\xF6lyaka",normalized:"golyaka",provinceCode:81,provinceName:"Duzce"},{name:"G\xFCm\xFC\u015Fova",normalized:"gumusova",provinceCode:81,provinceName:"Duzce"},{name:"Kayna\u015Fli",normalized:"kaynasli",provinceCode:81,provinceName:"Duzce"},{name:"Yi\u011Filca",normalized:"yigilca",provinceCode:81,provinceName:"Duzce"}],$e=new Map;for(let r of mo){let e=$e.get(r.normalized)||[];e.push(r),$e.set(r.normalized,e)}var Rl=new Set($e.keys()),$l=new Set([...$e.entries()].filter(([r,e])=>e.length>1).map(([r,e])=>r));function Qe(r){return $e.get(r.toLowerCase())||[]}var jn=[{key:"TIR",name:"TIR",patterns:["tir","tirci","t\u0131rci","t\u0131r"],description:"Large semi-trailer truck (international road transport)"},{key:"KAMYON",name:"Kamyon",patterns:["kamyon","kamyoncu"],description:"Standard truck"},{key:"KAMYONET",name:"Kamyonet",patterns:["kamyonet","kamyonetci"],description:"Small truck/van"},{key:"TREYLER",name:"Treyler",patterns:["treyler","trailer"],description:"Trailer"},{key:"DORSE",name:"Dorse",patterns:["dorse","dorseci"],description:"Semi-trailer"},{key:"TANKER",name:"Tanker",patterns:["tanker","tankerci"],description:"Tanker truck"},{key:"LOWBED",name:"Lowbed",patterns:["lowbed","low bed","low-bed","al\xE7ak"],description:"Low-bed trailer (for heavy machinery)"},{key:"MEGA",name:"Mega",patterns:["mega","mega tir","mega dorse"],description:"Mega trailer (100m3 capacity)"},{key:"JUMBO",name:"Jumbo",patterns:["jumbo","jumbo tir"],description:"Jumbo trailer (extra-large)"},{key:"KONTEYNER",name:"Konteyner",patterns:["konteyner","container","kontainer"],description:"Container carrier"}],Vn=[{key:"TENTELI",name:"Tenteli",patterns:["tenteli","tente","tenteli tir","tenteli kamyon"],description:"Tarpaulin/curtainside cover",isRefrigerated:!1},{key:"ACIK_KASA",name:"Acik Kasa",patterns:["acik kasa","ac\u0131k kasa","acik","a\xE7\u0131k","acik tir","a\xE7\u0131k t\u0131r"],description:"Open/flatbed truck",isRefrigerated:!1},{key:"KAPALI_KASA",name:"Kapali Kasa",patterns:["kapali kasa","kapal\u0131 kasa","kapali","kapal\u0131"],description:"Closed box truck",isRefrigerated:!1},{key:"FRIGO",name:"Frigo",patterns:["frigo","frigorifik","termokin","termokinli","sogutuculu","so\u011Futuculu","sogutmali","so\u011Futmal\u0131","soguk","so\u011Fuk","frigolu"],description:"Refrigerated truck",isRefrigerated:!0},{key:"IZOLELI",name:"Izoleli",patterns:["izoleli","izole","izotermal"],description:"Insulated (not actively cooled)",isRefrigerated:!1},{key:"SAC_KASA",name:"Sac Kasa",patterns:["sac kasa","sa\xE7 kasa","sac kasali","sa\xE7 kasal\u0131"],description:"Sheet metal body",isRefrigerated:!1},{key:"DAMPERLI",name:"Damperli",patterns:["damperli","damper","damperli kamyon"],description:"Dump truck/tipper",isRefrigerated:!1},{key:"PLATFORM",name:"Platform",patterns:["platform","platform dorse","platformlu"],description:"Platform/flatbed trailer",isRefrigerated:!1}],uo=new Map,po=new Map;for(let r of jn)for(let e of r.patterns)uo.set(e.toLowerCase(),r);for(let r of Vn)for(let e of r.patterns)po.set(e.toLowerCase(),r);var Ql={\u00E7:"c",\u011F:"g",\u0131:"i",i:"i",\u00F6:"o",\u015F:"s",\u00FC:"u",\u00C7:"c",\u011E:"g",I:"i",\u0130:"i",\u00D6:"o",\u015E:"s",\u00DC:"u"},ho=["dan","den","tan","ten","ndan","nden"],fo=["a","e","ya","ye","na","ne"],ah=[...ho,...fo];function E(r){let e="";for(let n of r)e+=Ql[n]??n;return e.toLowerCase()}function Fe(r){let e=r.toLowerCase().replace(/[''`']/g,"");for(let n of ho.sort((i,t)=>t.length-i.length))if(e.endsWith(n)&&e.length>n.length+2)return{stem:e.slice(0,-n.length),suffix:n,isOrigin:!0,isDestination:!1};for(let n of fo.sort((i,t)=>t.length-i.length))if(e.endsWith(n)&&e.length>n.length+2)return{stem:e.slice(0,-n.length),suffix:n,isOrigin:!1,isDestination:!0};return{stem:e,suffix:"",isOrigin:!1,isDestination:!1}}var Fl=[/\+90\s*5\d{2}[\s\-\.]*\d{3}[\s\-\.]*\d{2}[\s\-\.]*\d{2}/g,/05\d{2}[\s\-\.]*\d{3}[\s\-\.]*\d{2}[\s\-\.]*\d{2}/g,/(?<!\d)5\d{2}[\s\-\.]*\d{3}[\s\-\.]*\d{2}[\s\-\.]*\d{2}/g,/05\d{9}/g,/(?<!\d)5\d{9}/g,/05[xX\d]{2}[\s\-\.]*[xX\d]{3}[\s\-\.]*[xX\d]{2}[\s\-\.]*[xX\d]{2}/g];function Zr(r){let e=[],n=new Set;for(let i of Fl){i.lastIndex=0;let t;for(;(t=i.exec(r))!==null;){let a=`${t.index}-${t.index+t[0].length}`,o=!1;for(let s of n){let[c,m]=s.split("-").map(Number);if(t.index>=c&&t.index<m||t.index+t[0].length>c&&t.index+t[0].length<=m){o=!0;break}}if(!o){let s=t[0],c=vo(s),m=/[xX]/.test(s);e.push({original:s,normalized:c,start:t.index,end:t.index+t[0].length,isMobile:c.startsWith("05")||c.startsWith("5"),isMasked:m}),n.add(a)}}}return e.sort((i,t)=>i.start-t.start)}function vo(r){let e=r.replace(/[^\dxX]/g,"");return e.startsWith("90")&&e.length>=12&&(e="0"+e.slice(2)),e.startsWith("5")&&!e.startsWith("05")&&(e="0"+e),e.toLowerCase()}var Co=new Set(["arac","alan","bey","ova"]);function jl(r,e){let n=E(e).toLowerCase(),t=new RegExp(`(^|[^0-9])${r}([^0-9]|$)`).exec(n);if(!t)return!0;let a=t.index+(t[1]?.length||0),o=Math.max(0,a-15),s=Math.min(n.length,a+r.length+15),c=n.slice(o,s);return!(new RegExp(`${r}:\\d{2}|\\d{1,2}:${r}`).test(c)||new RegExp(`${r}\\s*(km|m|ton|kg|lt|saat|dakika|gun|arac|tir)`).test(c)||new RegExp(`${r}\\s*(tl|lira|euro|dolar|\\$|\u20AC)`).test(c)||new RegExp(`saat\\s*${r}`).test(c)||new RegExp(`${r}\\s*[-\u2013\u2014]\\s*\\d|\\d\\s*[-\u2013\u2014]\\s*${r}`).test(c))}var Vl=[/(\S+)\s*[-]\s*(\S+)/g,/(\S+)\s*>+\s*(\S+)/g,/(\S+)[''']?dan\s+(\S+)[''']?[aye]a?/gi,/(\S+)[''']?den\s+(\S+)[''']?[eye]e?/gi,/(\S+)[''']?tan\s+(\S+)[''']?[aye]a?/gi,/(\S+)[''']?ten\s+(\S+)[''']?[eye]e?/gi];function Gn(r){let e=[],n=new Set,i=E(r);for(let a of Vl){a.lastIndex=0;let o;for(;(o=a.exec(i))!==null;)for(let s=1;s<=2;s++){let c=o[s];if(c){let m=yo(c,r);m&&!n.has(m.provinceName)&&(e.push(m),n.add(m.provinceName))}}}let t=i.split(/[\s,;:\-\>\<\(\)\[\]\/\+\.''`']+/);for(let a of t){if(a.length<2)continue;let o=yo(a,r);o&&!n.has(o.provinceName)&&(e.push(o),n.add(o.provinceName))}return e}function yo(r,e){let n=E(r).toLowerCase();if(Co.has(n))return null;let i=De(n);if(i)return{originalText:Un(r,e),provinceName:i.name,provinceCode:i.code,isDistrict:!1,confidence:1};let t=Qe(n);if(t.length>0){let[s]=t,c=t.length>1,m=c?t.map(u=>({provinceName:u.provinceName,provinceCode:u.provinceCode})):void 0;return{originalText:Un(r,e),provinceName:s.provinceName,provinceCode:s.provinceCode,districtName:s.name,isDistrict:!0,confidence:c?.7:.9,isAmbiguous:c,possibleProvinces:m}}let{stem:a}=Fe(n);if(a!==n){let s=De(a);if(s)return{originalText:Un(r,e),provinceName:s.name,provinceCode:s.code,isDistrict:!1,confidence:.95};let c=Qe(a);if(c.length>0){let[m]=c,u=c.length>1,p=u?c.map(h=>({provinceName:h.provinceName,provinceCode:h.provinceCode})):void 0;return{originalText:Un(r,e),provinceName:m.provinceName,provinceCode:m.provinceCode,districtName:m.name,isDistrict:!0,confidence:u?.6:.85,isAmbiguous:u,possibleProvinces:p}}}let o=parseInt(n,10);if(!isNaN(o)&&o>=1&&o<=81&&jl(r,e)){let s=Xr(o);if(s)return{originalText:r,provinceName:s.name,provinceCode:s.code,isDistrict:!1,confidence:.8}}return null}function Un(r,e){let n=new RegExp(zo(r),"i"),i=e.match(n);return i?i[0]:r}function zo(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function go(r){if(Co.has(r))return null;let e=De(r);if(e)return{provinceName:e.name,provinceCode:e.code};let n=Qe(r);if(n.length>0){let t=n[0];return{provinceName:t.provinceName,provinceCode:t.provinceCode}}let{stem:i}=Fe(r);if(i!==r){let t=De(i);if(t)return{provinceName:t.name,provinceCode:t.code};let a=Qe(i);if(a.length>0){let o=a[0];return{provinceName:o.provinceName,provinceCode:o.provinceCode}}}return null}function Hn(r){let e=[],n=new Set,i=E(r),t=[/([A-Z\u00C0-\u017F]+)\s*>+\s*([A-Z\u00C0-\u017F]+)(?:\s+(TIR|KAMYON|KAMYONET|TIRLA|10\s*TEKER|8\s*TEKER|6\s*TEKER))?(?:\s+(DAMPERI?L[I\u0130]|TENTELI|KAPALI|ACIK|FR[I\u0130]GO))?/gi,/([A-Z\u00C0-\u017F]+)\s*[-]\s*([A-Z\u00C0-\u017F]+)(?:\s+(TIR|KAMYON|KAMYONET))?/gi,/([A-Z\u00C0-\u017F]+)[''']?(?:DAN|DEN|TAN|TEN)\s+([A-Z\u00C0-\u017F]+)[''']?(?:YA|YE|A|E)/gi,/([A-Z\u00C0-\u017F]+)\s*[]+\s*([A-Z\u00C0-\u017F]+)(?:\s+(TIR|KAMYON|KAMYONET))?(?:\s+(DAMPERI?L[I\u0130]|TENTELI|DAMPER))?/gi];for(let a of t){a.lastIndex=0;let o;for(;(o=a.exec(i))!==null;){let s=o[1],c=o[2],m=o[3],u=o[4];if(!s||!c)continue;let p=go(s.toLowerCase()),h=go(c.toLowerCase());if(p&&h&&p.provinceName!==h.provinceName){let z=`${p.provinceName}-${h.provinceName}`;if(!n.has(z)){n.add(z);let S={origin:p.provinceName,destination:h.provinceName,originCode:p.provinceCode,destinationCode:h.provinceCode};if(m){let k=m.toUpperCase();k.includes("TIR")||k.includes("TIRLA")?S.vehicle="TIR":k.includes("KAMYONET")?S.vehicle="KAMYONET":k.includes("KAMYON")?S.vehicle="KAMYON":k.includes("TEKER")&&(S.vehicle=k)}if(u){let k=u.toUpperCase();k.includes("DAMPER")?S.bodyType="DAMPERLI":k.includes("TENTE")?S.bodyType="TENTELI":k.includes("KAPALI")?S.bodyType="KAPALI":k.includes("ACIK")?S.bodyType="ACIK":(k.includes("FRIGO")||k.includes("FRI"))&&(S.bodyType="FRIGO")}e.push(S)}}}}return e}function Yn(r,e){if(r.length===0)return{};if(r.length===1){let a=E(e),{isOrigin:o,isDestination:s}=Fe(a);return s?{destination:r[0]}:{origin:r[0]}}let n,i;for(let a of r){let o=new RegExp(`\\b${zo(a.originalText)}\\S*`,"i"),s=e.match(o);if(s){let c=E(s[0]),{stem:m,isOrigin:u,isDestination:p}=Fe(c),h=E(a.provinceName),z=m===h||a.districtName&&m===E(a.districtName);u&&z&&!n?n=a:p&&z&&!i&&(i=a)}}let t=r.filter(a=>a!==n&&a!==i);return!n&&t.length>0&&(n=t.shift()),!i&&t.length>0&&(i=t.pop()),!n&&!i&&r.length>=2&&(n=r[0],i=r[r.length-1]),{origin:n,destination:i}}function Wn(r){let n=E(r).toLowerCase(),i,t,a=!1,o=[];for(let s of jn){for(let c of s.patterns){let m=E(c).toLowerCase();if(n.includes(m)){i=s.key,o.push(c);break}}if(i)break}for(let s of Vn){for(let c of s.patterns){let m=E(c).toLowerCase();if(n.includes(m)){t=s.key,a=s.isRefrigerated,o.push(c);break}}if(t)break}return!i&&!t?null:{vehicleType:i,bodyType:t,originalText:o.join(" "),isRefrigerated:a}}function Jn(r){let e=E(r).toLowerCase();return["araniyor","aran\u0131yor","lazim","laz\u0131m","gerek","gerekli","istiyorum","isteniyor","bulmak","bulunuyor","ihtiyaci","ihtiyac\u0131","ihtiyac var","ihtiya\xE7 var"].some(i=>e.includes(E(i)))}function Xn(r){let e=E(r).toLowerCase();return["bos arac","bo\u015F ara\xE7","bos tir","bo\u015F t\u0131r","bos kamyon","bo\u015F kamyon","musait","m\xFCsait","uygun","mevcut"].some(i=>e.includes(E(i)))}function Zn(r){return Zr(r).map(n=>({original:n.original,normalized:n.normalized,isMasked:n.isMasked}))}var Ul=[/(\d+(?:[.,]\d+)?)\s*(?:ton|TON|Ton)/gi,/(\d+(?:[.,]\d+)?)\s*T(?!\w)/gi,/(\d+(?:[.,]\d+)?)\s*tonluk/gi,/(\d+(?:[.,]\d+)?)\s*(?:kg|KG|Kg)/gi,/(\d{1,3}(?:\.\d{3})*)\s*(?:kg|KG)/gi];function er(r){let e=r;for(let n of Ul){n.lastIndex=0;let i=n.exec(e);if(i){let t=i[1];if(t.includes(".")&&!t.includes(",")){let u=t.split(".");u.length>1&&u[u.length-1].length===3&&(t=t.replace(/\./g,""))}t=t.replace(",",".");let a=parseFloat(t);if(isNaN(a))continue;let o=i[0].toLowerCase(),s="ton";o.includes("kg")&&(s="kg");let c=a,m=s;return s==="kg"&&a>=1e3&&(c=a/1e3,m="ton"),{value:c,unit:m,originalText:i[0]}}}return null}var No=["bey","hanim","han\u0131m","abi","abla","hoca","usta"],Gl=[/([A-Za-z]+)\s+(bey|hanim|hanm|abi|abla)/gi,/(bey|hanim|hanm)\s+([A-Za-z]+)/gi,/([A-Za-z]+)\s+(?:0?5\d{2})/gi],Hl=new Set(["ahmet","mehmet","mustafa","ali","hasan","huseyin","ibrahim","ismail","osman","yusuf","murat","hakan","serkan","burak","emre","can","cem","kemal","selim","fatih","kadir","adem","omer","recep","suleyman","yasin","erkan","gokhan","volkan","ayse","fatma","emine","hatice","zeynep","elif","merve","esra","seda","aysel","sevgi","hulya","serap","nilay","deniz","umut","onur","baris","caner","enes","furkan"]);function nr(r){for(let e of Gl){e.lastIndex=0;let n=e.exec(r);if(n){let i,t,a=n[1].toLowerCase(),o=n[2]?.toLowerCase();No.includes(a)?(t=a,i=n[2]||""):o&&No.includes(o)?(i=n[1],t=o):i=n[1];let s=E(i).toLowerCase();if(s.length<2)continue;if(Hl.has(s)||/^[A-Z]/.test(i))return{name:Yl(i),title:t,originalText:n[0]}}}return null}function Yl(r){return r&&r.charAt(0).toUpperCase()+r.slice(1).toLowerCase()}var Wl=[{pattern:"acil",weight:1},{pattern:"acele",weight:.9},{pattern:"hemen",weight:.9},{pattern:"simdiki",weight:.8},{pattern:"\u015Fimdiki",weight:.8},{pattern:"bugun",weight:.8},{pattern:"bug\xFCn",weight:.8},{pattern:"yarin",weight:.6},{pattern:"yar\u0131n",weight:.6},{pattern:"asap",weight:1},{pattern:"ivedi",weight:.9},{pattern:"\u0441\u0440\u043E\u0447\u043D\u043E",weight:1},{pattern:"!!!",weight:.7},{pattern:"cok acil",weight:1},{pattern:"\xE7ok acil",weight:1}];function rr(r){let e=E(r).toLowerCase(),n=[],i=0;for(let{pattern:t,weight:a}of Wl){let o=E(t).toLowerCase();e.includes(o)&&(n.push(t),i=Math.max(i,a))}return{isUrgent:n.length>0,indicators:n,urgencyScore:i}}var Jl=[{key:"palet",patterns:["palet","paletli"]},{key:"makine",patterns:["makine","makina","ekipman","is makinesi","i\u015F makinesi"]},{key:"tekstil",patterns:["tekstil","kumas","kuma\u015F","giyim","konfeksiyon"]},{key:"parsiyel",patterns:["parsiyel","parsek","par\xE7a"]},{key:"komple",patterns:["komple","full","tam"]},{key:"gida",patterns:["gida","g\u0131da","yiyecek"]},{key:"meyve",patterns:["meyve","sebze","meyve-sebze"]},{key:"tahil",patterns:["tahil","tah\u0131l","bugday","bu\u011Fday","arpa","misir","m\u0131s\u0131r"]},{key:"pamuk",patterns:["pamuk"]},{key:"demir",patterns:["demir","celik","\xE7elik","profil","boru"]},{key:"cimento",patterns:["cimento","\xE7imento","beton"]},{key:"mermer",patterns:["mermer","granit"]},{key:"kum",patterns:["kum","cakil","\xE7ak\u0131l","agrega"]},{key:"insaat",patterns:["insaat","in\u015Faat","yapi","yap\u0131"]},{key:"mobilya",patterns:["mobilya","esya","e\u015Fya","ev esyasi"]},{key:"beyaz_esya",patterns:["beyaz esya","beyaz e\u015Fya","elektrikli"]},{key:"otomotiv",patterns:["otomotiv","yedek parca","yedek par\xE7a"]},{key:"kimyasal",patterns:["kimyasal","kimya","asit"]},{key:"sivi",patterns:["sivi","s\u0131v\u0131","tank"]},{key:"elektronik",patterns:["elektronik","elektrik","kablo"]},{key:"konteyner",patterns:["konteyner","container","20'","40'","20 feet","40 feet","hc"]}];function ir(r){let e=E(r).toLowerCase();for(let n of Jl)for(let i of n.patterns){let t=E(i).toLowerCase();if(e.includes(t))return n.key}}function tr(r){let e=E(r).toLowerCase();return["yuk var","y\xFCk var","yukumuz var","y\xFCk\xFCm\xFCz var","yukleme","y\xFCkleme","yuklenecek","y\xFCklenecek","hazir yuk","haz\u0131r y\xFCk"].some(i=>e.includes(E(i)))}var Xl=[/\bkomple\s*yuk\b/i,/\bkomple\b/i,/\btam\s*yuk\b/i,/\bfull\b/i,/\bdolu\s*yuk\b/i,/\bdolu\b/i],Zl=[/\bparsiyel\s*yuk\b/i,/\bparsiyel\b/i,/\bparti\s*yuk\b/i,/\bparti\b/i,/\bparca\s*yuk\b/i,/\bltl\b/i];function ei(r){let e=E(r);for(let n of Zl){let i=e.match(n);if(i)return{loadType:"LTL",originalText:i[0],confidence:n.source.includes("\\s")?1:.9}}for(let n of Xl){let i=e.match(n);if(i)return{loadType:"FTL",originalText:i[0],confidence:n.source.includes("\\s")?1:.9}}return null}var F={origin:.25,destination:.25,vehicleType:.15,phone:.15,weight:.05,contactName:.05,cargoType:.05,bodyType:.05,routeComplete:.1,completeContact:.05};function ar(r){let e={},n=0;r.origin&&(e.origin=F.origin,n+=F.origin),r.destination&&(e.destination=F.destination,n+=F.destination),r.origin&&r.destination&&(e.routeComplete=F.routeComplete,n+=F.routeComplete),r.vehicle?.vehicleType&&(e.vehicleType=F.vehicleType,n+=F.vehicleType),r.vehicle?.bodyType&&(e.bodyType=F.bodyType,n+=F.bodyType),r.phones.length>0&&(e.phone=F.phone,n+=F.phone),r.contact&&(e.contactName=F.contactName,n+=F.contactName),r.phones.length>0&&r.contact&&(e.completeContact=F.completeContact,n+=F.completeContact),r.weight&&(e.weight=F.weight,n+=F.weight),r.cargoType&&(e.cargoType=F.cargoType,n+=F.cargoType);let i=nm(n,e);return{score:Math.min(n,1),level:i,factors:e}}function nm(r,e){return e.origin&&e.destination&&(e.vehicleType||e.phone)||r>=.7?"HIGH":e.origin&&e.destination||e.vehicleType&&(e.origin||e.destination)||r>=.4?"MEDIUM":e.phone||e.origin||e.destination?"LOW":"VERY_LOW"}function or(r){let e=Fn(r);if(!r||r.trim().length===0)return e.warnings.push("Empty message"),e;let n=Gn(r);e.mentionedLocations=n;let{origin:i,destination:t}=Yn(n,r);e.origin=i,e.destination=t;let a=Wn(r);a&&(e.vehicle=a),e.phones=Zn(r);let o=er(r);o&&(e.weight=o);let s=nr(r);s&&(e.contact=s);let c=rr(r);e.isUrgent=c.isUrgent,e.urgencyIndicators=c.indicators;let m=ir(r);m&&(e.cargoType=m);let u=ei(r);u&&(e.loadType=u.loadType),e.messageType=rm(r);let p=ar(e);return e.confidenceScore=p.score,e.confidenceLevel=p.level,e.confidenceFactors=p.factors,e}function rm(r){return Jn(r)?"VEHICLE_WANTED":Xn(r)?"VEHICLE_AVAILABLE":tr(r)?"CARGO_AVAILABLE":"UNKNOWN"}function ni(r){let e=or(r);return e.mentionedLocations.length>0||e.vehicle!==void 0||e.phones.length>0}var ce=Ll(nt(),1),Zf=ce.default.Client,ev=ce.default.Pool,nv=ce.default.Connection,rv=ce.default.types,iv=ce.default.Query,tv=ce.default.DatabaseError,av=ce.default.escapeIdentifier,ov=ce.default.escapeLiteral,sv=ce.default.Result,cv=ce.default.TypeOverrides,lv=ce.default.defaults,Ee=ce.default;var l=Symbol.for("drizzle:entityKind"),uv=Symbol.for("drizzle:hasOwnEntityKind");function f(r,e){if(!r||typeof r!="object")return!1;if(r instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,l))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let n=Object.getPrototypeOf(r).constructor;if(n)for(;n;){if(l in n&&n[l]===e[l])return!0;n=Object.getPrototypeOf(n)}return!1}var at=class{static[l]="ConsoleLogWriter";write(e){console.log(e)}},br=class{static[l]="DefaultLogger";writer;constructor(e){this.writer=e?.writer??new at}logQuery(e,n){let i=n.map(a=>{try{return JSON.stringify(a)}catch{return String(a)}}),t=i.length?` -- params: [${i.join(", ")}]`:"";this.writer.write(`Query: ${e}${t}`)}},kr=class{static[l]="NoopLogger";logQuery(){}};var J=class{static[l]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(e){return this.then(void 0,e)}finally(e){return this.then(n=>(e?.(),n),n=>{throw e?.(),n})}then(e,n){return this.execute().then(e,n)}};var pe=Symbol.for("drizzle:Name");var wr=Symbol.for("drizzle:Schema"),Sr=Symbol.for("drizzle:Columns"),mc=Symbol.for("drizzle:ExtraConfigColumns"),ot=Symbol.for("drizzle:OriginalName"),st=Symbol.for("drizzle:BaseName"),Tr=Symbol.for("drizzle:IsAlias"),uc=Symbol.for("drizzle:ExtraConfigBuilder"),up=Symbol.for("drizzle:IsDrizzleTable"),y=class{static[l]="Table";static Symbol={Name:pe,Schema:wr,OriginalName:ot,Columns:Sr,ExtraConfigColumns:mc,BaseName:st,IsAlias:Tr,ExtraConfigBuilder:uc};[pe];[ot];[wr];[Sr];[mc];[st];[Tr]=!1;[up]=!0;[uc]=void 0;constructor(e,n,i){this[pe]=this[ot]=e,this[wr]=n,this[st]=i}};function Pe(r){return r[pe]}function Le(r){return`${r[wr]??"public"}.${r[pe]}`}function Ar(r,...e){return r(...e)}var dc="0.38.4";var ct,lt,M={startActiveSpan(r,e){return ct?(lt||(lt=ct.trace.getTracer("drizzle-orm",dc)),Ar((n,i)=>i.startActiveSpan(r,t=>{try{return e(t)}catch(a){throw t.setStatus({code:n.SpanStatusCode.ERROR,message:a instanceof Error?a.message:"Unknown error"}),a}finally{t.end()}}),ct,lt)):e()}};var I=class{constructor(e,n){this.table=e,this.config=n,this.name=n.name,this.keyAsName=n.keyAsName,this.notNull=n.notNull,this.default=n.default,this.defaultFn=n.defaultFn,this.onUpdateFn=n.onUpdateFn,this.hasDefault=n.hasDefault,this.primary=n.primaryKey,this.isUnique=n.isUnique,this.uniqueName=n.uniqueName,this.uniqueType=n.uniqueType,this.dataType=n.dataType,this.columnType=n.columnType,this.generated=n.generated,this.generatedIdentity=n.generatedIdentity}static[l]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}};var xr=class{static[l]="ColumnBuilder";config;constructor(e,n,i){this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:n,columnType:i,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}};var _r=class{static[l]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,n){this.reference=()=>{let{name:i,columns:t,foreignColumns:a}=e();return{name:i,columns:t,foreignTable:a[0].table,foreignColumns:a}},n&&(this._onUpdate=n.onUpdate,this._onDelete=n.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new mt(e,this)}},mt=class{constructor(e,n){this.table=e,this.reference=n.reference,this.onUpdate=n._onUpdate,this.onDelete=n._onDelete}static[l]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:e,columns:n,foreignColumns:i}=this.reference(),t=n.map(s=>s.name),a=i.map(s=>s.name),o=[this.table[pe],...t,i[0].table[pe],...a];return e??`${o.join("_")}_fk`}};function pt(r,e){return`${r[pe]}_${e.join("_")}_unique`}var ut=class{constructor(e,n){this.name=n,this.columns=e}static[l]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new dt(e,this.columns,this.nullsNotDistinctConfig,this.name)}},pc=class{static[l]="PgUniqueOnConstraintBuilder";name;constructor(e){this.name=e}on(...e){return new ut(e,this.name)}},dt=class{constructor(e,n,i,t){this.table=e,this.columns=n,this.name=t??pt(this.table,this.columns.map(a=>a.name)),this.nullsNotDistinct=i}static[l]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}};function hc(r,e,n){for(let i=e;i<r.length;i++){let t=r[i];if(t==="\\"){i++;continue}if(t==='"')return[r.slice(e,i).replace(/\\/g,""),i+1];if(!n&&(t===","||t==="}"))return[r.slice(e,i).replace(/\\/g,""),i]}return[r.slice(e).replace(/\\/g,""),r.length]}function fc(r,e=0){let n=[],i=e,t=!1;for(;i<r.length;){let a=r[i];if(a===","){(t||i===e)&&n.push(""),t=!0,i++;continue}if(t=!1,a==="\\"){i+=2;continue}if(a==='"'){let[c,m]=hc(r,i+1,!0);n.push(c),i=m;continue}if(a==="}")return[n,i+1];if(a==="{"){let[c,m]=fc(r,i+1);n.push(c),i=m;continue}let[o,s]=hc(r,i,!1);n.push(o),i=s}return[n,i]}function vc(r){let[e]=fc(r,1);return e}function ht(r){return`{${r.map(e=>Array.isArray(e)?ht(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var C=class extends xr{foreignKeyConfigs=[];static[l]="PgColumnBuilder";array(e){return new vt(this.config.name,this,e)}references(e,n={}){return this.foreignKeyConfigs.push({ref:e,actions:n}),this}unique(e,n){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=n?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,n){return this.foreignKeyConfigs.map(({ref:i,actions:t})=>Ar((a,o)=>{let s=new _r(()=>{let c=a();return{columns:[e],foreignColumns:[c]}});return o.onUpdate&&s.onUpdate(o.onUpdate),o.onDelete&&s.onDelete(o.onDelete),s.build(n)},i,t))}buildExtraConfigColumn(e){return new ft(e,this.config)}},v=class extends I{constructor(e,n){n.uniqueName||(n.uniqueName=pt(e,[n.name])),super(e,n),this.table=e}static[l]="PgColumn"},ft=class extends v{static[l]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}},en=class{static[l]="IndexedColumn";constructor(e,n,i,t){this.name=e,this.keyAsName=n,this.type=i,this.indexConfig=t}name;keyAsName;type;indexConfig},vt=class extends C{static[l]="PgArrayBuilder";constructor(e,n,i){super(e,"array","PgArray"),this.config.baseBuilder=n,this.config.size=i}build(e){let n=this.config.baseBuilder.build(e);return new yt(e,this.config,n)}},yt=class r extends v{constructor(e,n,i,t){super(e,n),this.baseColumn=i,this.range=t,this.size=n.size}size;static[l]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(e){return typeof e=="string"&&(e=vc(e)),e.map(n=>this.baseColumn.mapFromDriverValue(n))}mapToDriverValue(e,n=!1){let i=e.map(t=>t===null?null:f(this.baseColumn,r)?this.baseColumn.mapToDriverValue(t,!0):this.baseColumn.mapToDriverValue(t));return n?i:ht(i)}};var gt=Symbol.for("drizzle:isPgEnum");function yc(r){return!!r&&typeof r=="function"&&gt in r&&r[gt]===!0}var Ct=class extends C{static[l]="PgEnumColumnBuilder";constructor(e,n){super(e,"string","PgEnumColumn"),this.config.enum=n}build(e){return new zt(e,this.config)}},zt=class extends v{static[l]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(e,n){super(e,n),this.enum=n.enum}getSQLType(){return this.enum.enumName}};function gc(r,e){return dp(r,e,void 0)}function dp(r,e,n){let i=Object.assign(t=>new Ct(t??"",i),{enumName:r,enumValues:e,schema:n,[gt]:!0});return i}var j=class{static[l]="Subquery";constructor(e,n,i,t=!1){this._={brand:"Subquery",sql:e,selectedFields:n,alias:i,isWith:t}}},nn=class extends j{static[l]="WithSubquery"};var K=Symbol.for("drizzle:ViewBaseConfig");var Cc=class{static[l]="FakePrimitiveParam"};function Nt(r){return r!=null&&typeof r.getSQL=="function"}function pp(r){let e={sql:"",params:[]};for(let n of r)e.sql+=n.sql,e.params.push(...n.params),n.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...n.typings));return e}var V=class{static[l]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new g([this])}},g=class r{constructor(e){this.queryChunks=e}static[l]="SQL";decoder=Nc;shouldInlineParams=!1;append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return M.startActiveSpan("drizzle.buildSQL",n=>{let i=this.buildQueryFromSourceParams(this.queryChunks,e);return n?.setAttributes({"drizzle.query.text":i.sql,"drizzle.query.params":JSON.stringify(i.params)}),i})}buildQueryFromSourceParams(e,n){let i=Object.assign({},n,{inlineParams:n.inlineParams||this.shouldInlineParams,paramStartIndex:n.paramStartIndex||{value:0}}),{casing:t,escapeName:a,escapeParam:o,prepareTyping:s,inlineParams:c,paramStartIndex:m}=i;return pp(e.map(u=>{if(f(u,V))return{sql:u.value.join(""),params:[]};if(f(u,zn))return{sql:a(u.value),params:[]};if(u===void 0)return{sql:"",params:[]};if(Array.isArray(u)){let p=[new V("(")];for(let[h,z]of u.entries())p.push(z),h<u.length-1&&p.push(new V(", "));return p.push(new V(")")),this.buildQueryFromSourceParams(p,i)}if(f(u,r))return this.buildQueryFromSourceParams(u.queryChunks,{...i,inlineParams:c||u.shouldInlineParams});if(f(u,y)){let p=u[y.Symbol.Schema],h=u[y.Symbol.Name];return{sql:p===void 0?a(h):a(p)+"."+a(h),params:[]}}if(f(u,I)){let p=t.getColumnCasing(u);if(n.invokeSource==="indexes")return{sql:a(p),params:[]};let h=u.table[y.Symbol.Schema];return{sql:u.table[Tr]||h===void 0?a(u.table[y.Symbol.Name])+"."+a(p):a(h)+"."+a(u.table[y.Symbol.Name])+"."+a(p),params:[]}}if(f(u,ee)){let p=u[K].schema,h=u[K].name;return{sql:p===void 0?a(h):a(p)+"."+a(h),params:[]}}if(f(u,ae)){if(f(u.value,Ne))return{sql:o(m.value++,u),params:[u],typings:["none"]};let p=u.value===null?null:u.encoder.mapToDriverValue(u.value);if(f(p,r))return this.buildQueryFromSourceParams([p],i);if(c)return{sql:this.mapInlineParam(p,i),params:[]};let h=["none"];return s&&(h=[s(u.encoder)]),{sql:o(m.value++,p),params:[p],typings:h}}return f(u,Ne)?{sql:o(m.value++,u),params:[u],typings:["none"]}:f(u,r.Aliased)&&u.fieldAlias!==void 0?{sql:a(u.fieldAlias),params:[]}:f(u,j)?u._.isWith?{sql:a(u._.alias),params:[]}:this.buildQueryFromSourceParams([new V("("),u._.sql,new V(") "),new zn(u._.alias)],i):yc(u)?u.schema?{sql:a(u.schema)+"."+a(u.enumName),params:[]}:{sql:a(u.enumName),params:[]}:Nt(u)?u.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([u.getSQL()],i):this.buildQueryFromSourceParams([new V("("),u.getSQL(),new V(")")],i):c?{sql:this.mapInlineParam(u,i),params:[]}:{sql:o(m.value++,u),params:[u],typings:["none"]}}))}mapInlineParam(e,{escapeString:n}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return n(e);if(typeof e=="object"){let i=e.toString();return n(i==="[object Object]"?JSON.stringify(e):i)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new r.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}},zn=class{constructor(e){this.value=e}static[l]="Name";brand;getSQL(){return new g([this])}};function zc(r){return typeof r=="object"&&r!==null&&"mapToDriverValue"in r&&typeof r.mapToDriverValue=="function"}var Nc={mapFromDriverValue:r=>r},bc={mapToDriverValue:r=>r},ty={...Nc,...bc},ae=class{constructor(e,n=bc){this.value=e,this.encoder=n}static[l]="Param";brand;getSQL(){return new g([this])}};function d(r,...e){let n=[];(e.length>0||r.length>0&&r[0]!=="")&&n.push(new V(r[0]));for(let[i,t]of e.entries())n.push(t,new V(r[i+1]));return new g(n)}(r=>{function e(){return new g([])}r.empty=e;function n(c){return new g(c)}r.fromList=n;function i(c){return new g([new V(c)])}r.raw=i;function t(c,m){let u=[];for(let[p,h]of c.entries())p>0&&m!==void 0&&u.push(m),u.push(h);return new g(u)}r.join=t;function a(c){return new zn(c)}r.identifier=a;function o(c){return new Ne(c)}r.placeholder=o;function s(c,m){return new ae(c,m)}r.param=s})(d||(d={}));(r=>{class e{constructor(i,t){this.sql=i,this.fieldAlias=t}static[l]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}r.Aliased=e})(g||(g={}));var Ne=class{constructor(e){this.name=e}static[l]="Placeholder";getSQL(){return new g([this])}};function bt(r,e){return r.map(n=>{if(f(n,Ne)){if(!(n.name in e))throw new Error(`No value for placeholder "${n.name}" was provided`);return e[n.name]}if(f(n,ae)&&f(n.value,Ne)){if(!(n.value.name in e))throw new Error(`No value for placeholder "${n.value.name}" was provided`);return n.encoder.mapToDriverValue(e[n.value.name])}return n})}var hp=Symbol.for("drizzle:IsDrizzleView"),ee=class{static[l]="View";[K];[hp]=!0;constructor({name:e,schema:n,selectedFields:i,query:t}){this[K]={name:e,originalName:e,schema:n,selectedFields:i,query:t,isExisting:!t,isAlias:!1}}getSQL(){return new g([this])}};I.prototype.getSQL=function(){return new g([this])};y.prototype.getSQL=function(){return new g([this])};j.prototype.getSQL=function(){return new g([this])};function kc(r,e,n){let i={},t=r.reduce((a,{path:o,field:s},c)=>{let m;f(s,I)?m=s:f(s,g)?m=s.decoder:m=s.sql.decoder;let u=a;for(let[p,h]of o.entries())if(p<o.length-1)h in u||(u[h]={}),u=u[h];else{let z=e[c],S=u[h]=z===null?null:m.mapFromDriverValue(z);if(n&&f(s,I)&&o.length===2){let k=o[0];k in i?typeof i[k]=="string"&&i[k]!==Pe(s.table)&&(i[k]=!1):i[k]=S===null?Pe(s.table):!1}}return a},{});if(n&&Object.keys(i).length>0)for(let[a,o]of Object.entries(i))typeof o=="string"&&!n[o]&&(t[a]=null);return t}function de(r,e){return Object.entries(r).reduce((n,[i,t])=>{if(typeof i!="string")return n;let a=e?[...e,i]:[i];return f(t,I)||f(t,g)||f(t,g.Aliased)?n.push({path:a,field:t}):f(t,y)?n.push(...de(t[y.Symbol.Columns],a)):n.push(...de(t,a)),n},[])}function Nn(r,e){let n=Object.keys(r),i=Object.keys(e);if(n.length!==i.length)return!1;for(let[t,a]of n.entries())if(a!==i[t])return!1;return!0}function Er(r,e){let n=Object.entries(e).filter(([,i])=>i!==void 0).map(([i,t])=>f(t,g)||f(t,I)?[i,t]:[i,new ae(t,r[y.Symbol.Columns][i])]);if(n.length===0)throw new Error("No values to set");return Object.fromEntries(n)}function wc(r,e){for(let n of e)for(let i of Object.getOwnPropertyNames(n.prototype))i!=="constructor"&&Object.defineProperty(r.prototype,i,Object.getOwnPropertyDescriptor(n.prototype,i)||Object.create(null))}function Sc(r){return r[y.Symbol.Columns]}function be(r){return f(r,j)?r._.alias:f(r,ee)?r[K].name:f(r,g)?void 0:r[y.Symbol.IsAlias]?r[y.Symbol.Name]:r[y.Symbol.BaseName]}function A(r,e){return{name:typeof r=="string"&&r.length>0?r:"",config:typeof r=="object"?r:e}}function Tc(r){if(typeof r!="object"||r===null||r.constructor.name!=="Object")return!1;if("logger"in r){let e=typeof r.logger;return!(e!=="boolean"&&(e!=="object"||typeof r.logger.logQuery!="function")&&e!=="undefined")}if("schema"in r){let e=typeof r.logger;return!(e!=="object"&&e!=="undefined")}if("casing"in r){let e=typeof r.logger;return!(e!=="string"&&e!=="undefined")}if("mode"in r)return!(r.mode!=="default"||r.mode!=="planetscale"||r.mode!==void 0);if("connection"in r){let e=typeof r.connection;return!(e!=="string"&&e!=="object"&&e!=="undefined")}if("client"in r){let e=typeof r.client;return!(e!=="object"&&e!=="function"&&e!=="undefined")}return Object.keys(r).length===0}var bn=class extends J{constructor(e,n,i,t){super(),this.session=n,this.dialect=i,this.config={table:e,withList:t}}static[l]="PgDelete";config;where(e){return this.config.where=e,this}returning(e=this.config.table[y.Symbol.Columns]){return this.config.returning=de(e),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:e,...n}=this.dialect.sqlToQuery(this.getSQL());return n}_prepare(e){return M.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>M.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken));$dynamic(){return this}};var Oe=class{constructor(e){this.table=e}static[l]="ColumnAliasProxyHandler";get(e,n){return n==="table"?this.table:e[n]}},rn=class{constructor(e,n){this.alias=e,this.replaceOriginalName=n}static[l]="TableAliasProxyHandler";get(e,n){if(n===y.Symbol.IsAlias)return!0;if(n===y.Symbol.Name)return this.alias;if(this.replaceOriginalName&&n===y.Symbol.OriginalName)return this.alias;if(n===K)return{...e[K],name:this.alias,isAlias:!0};if(n===y.Symbol.Columns){let t=e[y.Symbol.Columns];if(!t)return t;let a={};return Object.keys(t).map(o=>{a[o]=new Proxy(t[o],new Oe(new Proxy(e,this)))}),a}let i=e[n];return f(i,I)?new Proxy(i,new Oe(new Proxy(e,this))):i}},Ac=class{constructor(e){this.alias=e}static[l]="RelationTableAliasProxyHandler";get(e,n){return n==="sourceTable"?kn(e.sourceTable,this.alias):e[n]}};function kn(r,e){return new Proxy(r,new rn(e,!1))}function fe(r,e){return new Proxy(r,new Oe(new Proxy(r.table,new rn(e,!1))))}function kt(r,e){return new g.Aliased(wn(r.sql,e),r.fieldAlias)}function wn(r,e){return d.join(r.queryChunks.map(n=>f(n,I)?fe(n,e):f(n,g)?wn(n,e):f(n,g.Aliased)?kt(n,e):n))}function fp(r){return(r.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map(n=>n.toLowerCase()).join("_")}function vp(r){return(r.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((n,i,t)=>{let a=t===0?i.toLowerCase():`${i[0].toUpperCase()}${i.slice(1)}`;return n+a},"")}function yp(r){return r}var Pr=class{static[l]="CasingCache";cache={};cachedTables={};convert;constructor(e){this.convert=e==="snake_case"?fp:e==="camelCase"?vp:yp}getColumnCasing(e){if(!e.keyAsName)return e.name;let n=e.table[y.Symbol.Schema]??"public",i=e.table[y.Symbol.OriginalName],t=`${n}.${i}.${e.name}`;return this.cache[t]||this.cacheTable(e.table),this.cache[t]}cacheTable(e){let n=e[y.Symbol.Schema]??"public",i=e[y.Symbol.OriginalName],t=`${n}.${i}`;if(!this.cachedTables[t]){for(let a of Object.values(e[y.Symbol.Columns])){let o=`${t}.${a.name}`;this.cache[o]=this.convert(a.name)}this.cachedTables[t]=!0}}clearCache(){this.cache={},this.cachedTables={}}};var Sn=class extends Error{static[l]="DrizzleError";constructor({message:e,cause:n}){super(e),this.name="DrizzleError",this.cause=n}},Ir=class extends Sn{static[l]="TransactionRollbackError";constructor(){super({message:"Rollback"})}};var ke=class extends C{static[l]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){let{name:n,...i}=e;this.config.generatedIdentity={type:"always",sequenceName:n,sequenceOptions:i}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){let{name:n,...i}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:n,sequenceOptions:i}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}};var wt=class extends ke{static[l]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new St(e,this.config)}},St=class extends v{static[l]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}},Tt=class extends ke{static[l]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new At(e,this.config)}},At=class extends v{static[l]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}};function xc(r,e){let{name:n,config:i}=A(r,e);return i.mode==="number"?new wt(n):new Tt(n)}var xt=class extends C{static[l]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new _t(e,this.config)}},_t=class extends v{static[l]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}},Et=class extends C{static[l]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new Pt(e,this.config)}},Pt=class extends v{static[l]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}};function _c(r,e){let{name:n,config:i}=A(r,e);return i.mode==="number"?new xt(n):new Et(n)}var It=class extends C{static[l]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new Mt(e,this.config)}},Mt=class extends v{static[l]="PgBoolean";getSQLType(){return"boolean"}};function he(r){return new It(r??"")}var Dt=class extends C{static[l]="PgCharBuilder";constructor(e,n){super(e,"string","PgChar"),this.config.length=n.length,this.config.enumValues=n.enum}build(e){return new Bt(e,this.config)}},Bt=class extends v{static[l]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"char":`char(${this.length})`}};function Ec(r,e={}){let{name:n,config:i}=A(r,e);return new Dt(n,i)}var Kt=class extends C{static[l]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new Lt(e,this.config)}},Lt=class extends v{static[l]="PgCidr";getSQLType(){return"cidr"}};function Pc(r){return new Kt(r??"")}var Ot=class extends C{static[l]="PgCustomColumnBuilder";constructor(e,n,i){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=n,this.config.customTypeParams=i}build(e){return new qt(e,this.config)}},qt=class extends v{static[l]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,n){super(e,n),this.sqlName=n.customTypeParams.dataType(n.fieldConfig),this.mapTo=n.customTypeParams.toDriver,this.mapFrom=n.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return typeof this.mapFrom=="function"?this.mapFrom(e):e}mapToDriverValue(e){return typeof this.mapTo=="function"?this.mapTo(e):e}};function Ic(r){return(e,n)=>{let{name:i,config:t}=A(e,n);return new Ot(i,t,r)}}var ve=class extends C{static[l]="PgDateColumnBaseBuilder";defaultNow(){return this.default(d`now()`)}};var Rt=class extends ve{static[l]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new Tn(e,this.config)}},Tn=class extends v{static[l]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}},$t=class extends ve{static[l]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new An(e,this.config)}},An=class extends v{static[l]="PgDateString";getSQLType(){return"date"}};function Mc(r,e){let{name:n,config:i}=A(r,e);return i?.mode==="date"?new Rt(n):new $t(n)}var Qt=class extends C{static[l]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Ft(e,this.config)}},Ft=class extends v{static[l]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}};function Dc(r){return new Qt(r??"")}var jt=class extends C{static[l]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new Vt(e,this.config)}},Vt=class extends v{static[l]="PgInet";getSQLType(){return"inet"}};function Bc(r){return new jt(r??"")}var Ut=class extends ke{static[l]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new Gt(e,this.config)}},Gt=class extends v{static[l]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}};function H(r){return new Ut(r??"")}var Ht=class extends C{static[l]="PgIntervalBuilder";constructor(e,n){super(e,"string","PgInterval"),this.config.intervalConfig=n}build(e){return new Yt(e,this.config)}},Yt=class extends v{static[l]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let e=this.fields?` ${this.fields}`:"",n=this.precision?`(${this.precision})`:"";return`interval${e}${n}`}};function Kc(r,e={}){let{name:n,config:i}=A(r,e);return new Ht(n,i)}var Wt=class extends C{static[l]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new xn(e,this.config)}},xn=class extends v{static[l]="PgJson";constructor(e,n){super(e,n)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};function Lc(r){return new Wt(r??"")}var Jt=class extends C{static[l]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new _n(e,this.config)}},_n=class extends v{static[l]="PgJsonb";constructor(e,n){super(e,n)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};function we(r){return new Jt(r??"")}var Xt=class extends C{static[l]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new Zt(e,this.config)}},Zt=class extends v{static[l]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){let[n,i,t]=e.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(i),Number.parseFloat(t)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}},ea=class extends C{static[l]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new na(e,this.config)}},na=class extends v{static[l]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){let[n,i,t]=e.slice(1,-1).split(",");return{a:Number.parseFloat(n),b:Number.parseFloat(i),c:Number.parseFloat(t)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}};function Oc(r,e){let{name:n,config:i}=A(r,e);return!i?.mode||i.mode==="tuple"?new Xt(n):new ea(n)}var ra=class extends C{static[l]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new ia(e,this.config)}},ia=class extends v{static[l]="PgMacaddr";getSQLType(){return"macaddr"}};function qc(r){return new ra(r??"")}var ta=class extends C{static[l]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new aa(e,this.config)}},aa=class extends v{static[l]="PgMacaddr8";getSQLType(){return"macaddr8"}};function Rc(r){return new ta(r??"")}var oa=class extends C{static[l]="PgNumericBuilder";constructor(e,n,i){super(e,"string","PgNumeric"),this.config.precision=n,this.config.scale=i}build(e){return new En(e,this.config)}},En=class extends v{static[l]="PgNumeric";precision;scale;constructor(e,n){super(e,n),this.precision=n.precision,this.scale=n.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}};function sa(r,e){let{name:n,config:i}=A(r,e);return new oa(n,i?.precision,i?.scale)}var ca=sa;var la=class extends C{static[l]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new ma(e,this.config)}},ma=class extends v{static[l]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){let[n,i]=e.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(i)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}},ua=class extends C{static[l]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new da(e,this.config)}},da=class extends v{static[l]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){let[n,i]=e.slice(1,-1).split(",");return{x:Number.parseFloat(n),y:Number.parseFloat(i)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}};function $c(r,e){let{name:n,config:i}=A(r,e);return!i?.mode||i.mode==="tuple"?new la(n):new ua(n)}function gp(r){let e=[];for(let n=0;n<r.length;n+=2)e.push(Number.parseInt(r.slice(n,n+2),16));return new Uint8Array(e)}function Qc(r,e){let n=new ArrayBuffer(8),i=new DataView(n);for(let t=0;t<8;t++)i.setUint8(t,r[e+t]);return i.getFloat64(0,!0)}function pa(r){let e=gp(r),n=0,i=e[n];n+=1;let t=new DataView(e.buffer),a=t.getUint32(n,i===1);n+=4;let o;if(a&536870912&&(o=t.getUint32(n,i===1),n+=4),(a&65535)===1){let s=Qc(e,n);n+=8;let c=Qc(e,n);return n+=8,[s,c]}throw new Error("Unsupported geometry type")}var ha=class extends C{static[l]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new fa(e,this.config)}},fa=class extends v{static[l]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return pa(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}},va=class extends C{static[l]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new ya(e,this.config)}},ya=class extends v{static[l]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){let n=pa(e);return{x:n[0],y:n[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}};function Fc(r,e){let{name:n,config:i}=A(r,e);return!i?.mode||i.mode==="tuple"?new ha(n):new va(n)}var ga=class extends C{static[l]="PgRealBuilder";constructor(e,n){super(e,"number","PgReal"),this.config.length=n}build(e){return new Ca(e,this.config)}},Ca=class extends v{static[l]="PgReal";constructor(e,n){super(e,n)}getSQLType(){return"real"}mapFromDriverValue=e=>typeof e=="string"?Number.parseFloat(e):e};function jc(r){return new ga(r??"")}var za=class extends C{static[l]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Na(e,this.config)}},Na=class extends v{static[l]="PgSerial";getSQLType(){return"serial"}};function Vc(r){return new za(r??"")}var ba=class extends ke{static[l]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new ka(e,this.config)}},ka=class extends v{static[l]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=e=>typeof e=="string"?Number(e):e};function Uc(r){return new ba(r??"")}var wa=class extends C{static[l]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Sa(e,this.config)}},Sa=class extends v{static[l]="PgSmallSerial";getSQLType(){return"smallserial"}};function Gc(r){return new wa(r??"")}var Ta=class extends C{static[l]="PgTextBuilder";constructor(e,n){super(e,"string","PgText"),this.config.enumValues=n.enum}build(e){return new Aa(e,this.config)}},Aa=class extends v{static[l]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}};function N(r,e={}){let{name:n,config:i}=A(r,e);return new Ta(n,i)}var xa=class extends ve{constructor(e,n,i){super(e,"string","PgTime"),this.withTimezone=n,this.precision=i,this.config.withTimezone=n,this.config.precision=i}static[l]="PgTimeBuilder";build(e){return new Pn(e,this.config)}},Pn=class extends v{static[l]="PgTime";withTimezone;precision;constructor(e,n){super(e,n),this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};function Hc(r,e={}){let{name:n,config:i}=A(r,e);return new xa(n,i.withTimezone??!1,i.precision)}var _a=class extends ve{static[l]="PgTimestampBuilder";constructor(e,n,i){super(e,"date","PgTimestamp"),this.config.withTimezone=n,this.config.precision=i}build(e){return new In(e,this.config)}},In=class extends v{static[l]="PgTimestamp";withTimezone;precision;constructor(e,n){super(e,n),this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=e=>new Date(this.withTimezone?e:e+"+0000");mapToDriverValue=e=>e.toISOString()},Ea=class extends ve{static[l]="PgTimestampStringBuilder";constructor(e,n,i){super(e,"string","PgTimestampString"),this.config.withTimezone=n,this.config.precision=i}build(e){return new Mn(e,this.config)}},Mn=class extends v{static[l]="PgTimestampString";withTimezone;precision;constructor(e,n){super(e,n),this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};function Q(r,e={}){let{name:n,config:i}=A(r,e);return i?.mode==="string"?new Ea(n,i.withTimezone??!1,i.precision):new _a(n,i?.withTimezone??!1,i?.precision)}var Pa=class extends C{static[l]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(d`gen_random_uuid()`)}build(e){return new Dn(e,this.config)}},Dn=class extends v{static[l]="PgUUID";getSQLType(){return"uuid"}};function ne(r){return new Pa(r??"")}var Ia=class extends C{static[l]="PgVarcharBuilder";constructor(e,n){super(e,"string","PgVarchar"),this.config.length=n.length,this.config.enumValues=n.enum}build(e){return new Ma(e,this.config)}},Ma=class extends v{static[l]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}};function Yc(r,e={}){let{name:n,config:i}=A(r,e);return new Ia(n,i)}var Da=class extends C{static[l]="PgBinaryVectorBuilder";constructor(e,n){super(e,"string","PgBinaryVector"),this.config.dimensions=n.dimensions}build(e){return new Ba(e,this.config)}},Ba=class extends v{static[l]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}};function Wc(r,e){let{name:n,config:i}=A(r,e);return new Da(n,i)}var Ka=class extends C{static[l]="PgHalfVectorBuilder";constructor(e,n){super(e,"array","PgHalfVector"),this.config.dimensions=n.dimensions}build(e){return new La(e,this.config)}},La=class extends v{static[l]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}};function Jc(r,e){let{name:n,config:i}=A(r,e);return new Ka(n,i)}var Oa=class extends C{static[l]="PgSparseVectorBuilder";constructor(e,n){super(e,"string","PgSparseVector"),this.config.dimensions=n.dimensions}build(e){return new qa(e,this.config)}},qa=class extends v{static[l]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}};function Xc(r,e){let{name:n,config:i}=A(r,e);return new Oa(n,i)}var Ra=class extends C{static[l]="PgVectorBuilder";constructor(e,n){super(e,"array","PgVector"),this.config.dimensions=n.dimensions}build(e){return new $a(e,this.config)}},$a=class extends v{static[l]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}};function Zc(r,e){let{name:n,config:i}=A(r,e);return new Ra(n,i)}function el(){return{bigint:xc,bigserial:_c,boolean:he,char:Ec,cidr:Pc,customType:Ic,date:Mc,doublePrecision:Dc,inet:Bc,integer:H,interval:Kc,json:Lc,jsonb:we,line:Oc,macaddr:qc,macaddr8:Rc,numeric:sa,point:$c,geometry:Fc,real:jc,serial:Vc,smallint:Uc,smallserial:Gc,text:N,time:Hc,timestamp:Q,uuid:ne,varchar:Yc,bit:Wc,halfvec:Jc,sparsevec:Xc,vector:Zc}}var Qa=Symbol.for("drizzle:PgInlineForeignKeys"),nl=Symbol.for("drizzle:EnableRLS"),G=class extends y{static[l]="PgTable";static Symbol=Object.assign({},y.Symbol,{InlineForeignKeys:Qa,EnableRLS:nl});[Qa]=[];[nl]=!1;[y.Symbol.ExtraConfigBuilder]=void 0};function Cp(r,e,n,i,t=r){let a=new G(r,i,t),o=typeof e=="function"?e(el()):e,s=Object.fromEntries(Object.entries(o).map(([u,p])=>{let h=p;h.setName(u);let z=h.build(a);return a[Qa].push(...h.buildForeignKeys(z,a)),[u,z]})),c=Object.fromEntries(Object.entries(o).map(([u,p])=>{let h=p;h.setName(u);let z=h.buildExtraConfigColumn(a);return[u,z]})),m=Object.assign(a,s);return m[y.Symbol.Columns]=s,m[y.Symbol.ExtraConfigColumns]=c,n&&(m[G.Symbol.ExtraConfigBuilder]=n),Object.assign(m,{enableRLS:()=>(m[G.Symbol.EnableRLS]=!0,m)})}var le=(r,e,n)=>Cp(r,e,n,void 0);var Mr=class{static[l]="PgPrimaryKeyBuilder";columns;name;constructor(e,n){this.columns=e,this.name=n}build(e){return new Fa(e,this.columns,this.name)}},Fa=class{constructor(e,n,i){this.table=e,this.columns=n,this.name=i}static[l]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[G.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}};function oe(r,e){return zc(e)&&!Nt(r)&&!f(r,ae)&&!f(r,Ne)&&!f(r,I)&&!f(r,y)&&!f(r,ee)?new ae(r,e):r}var qe=(r,e)=>d`${r} = ${oe(e,r)}`,rl=(r,e)=>d`${r} <> ${oe(e,r)}`;function tn(...r){let e=r.filter(n=>n!==void 0);if(e.length!==0)return e.length===1?new g(e):new g([new V("("),d.join(e,new V(" and ")),new V(")")])}function ja(...r){let e=r.filter(n=>n!==void 0);if(e.length!==0)return e.length===1?new g(e):new g([new V("("),d.join(e,new V(" or ")),new V(")")])}function il(r){return d`not ${r}`}var tl=(r,e)=>d`${r} > ${oe(e,r)}`,al=(r,e)=>d`${r} >= ${oe(e,r)}`,ol=(r,e)=>d`${r} < ${oe(e,r)}`,sl=(r,e)=>d`${r} <= ${oe(e,r)}`;function cl(r,e){return Array.isArray(e)?e.length===0?d`false`:d`${r} in ${e.map(n=>oe(n,r))}`:d`${r} in ${oe(e,r)}`}function ll(r,e){return Array.isArray(e)?e.length===0?d`true`:d`${r} not in ${e.map(n=>oe(n,r))}`:d`${r} not in ${oe(e,r)}`}function ml(r){return d`${r} is null`}function ul(r){return d`${r} is not null`}function dl(r){return d`exists ${r}`}function pl(r){return d`not exists ${r}`}function hl(r,e,n){return d`${r} between ${oe(e,r)} and ${oe(n,r)}`}function fl(r,e,n){return d`${r} not between ${oe(e,r)} and ${oe(n,r)}`}function vl(r,e){return d`${r} like ${e}`}function yl(r,e){return d`${r} not like ${e}`}function gl(r,e){return d`${r} ilike ${e}`}function Cl(r,e){return d`${r} not ilike ${e}`}function Va(r){return d`${r} asc`}function Ua(r){return d`${r} desc`}var Dr=class{constructor(e,n,i){this.sourceTable=e,this.referencedTable=n,this.relationName=i,this.referencedTableName=n[y.Symbol.Name]}static[l]="Relation";referencedTableName;fieldName},Ga=class{constructor(e,n){this.table=e,this.config=n}static[l]="Relations"},Ie=class r extends Dr{constructor(e,n,i,t){super(e,n,i?.relationName),this.config=i,this.isNullable=t}static[l]="One";withFieldName(e){let n=new r(this.sourceTable,this.referencedTable,this.config,this.isNullable);return n.fieldName=e,n}},Bn=class r extends Dr{constructor(e,n,i){super(e,n,i?.relationName),this.config=i}static[l]="Many";withFieldName(e){let n=new r(this.sourceTable,this.referencedTable,this.config);return n.fieldName=e,n}};function zl(){return{and:tn,between:hl,eq:qe,exists:dl,gt:tl,gte:al,ilike:gl,inArray:cl,isNull:ml,isNotNull:ul,like:vl,lt:ol,lte:sl,ne:rl,not:il,notBetween:fl,notExists:pl,notLike:yl,notIlike:Cl,notInArray:ll,or:ja,sql:d}}function Nl(){return{sql:d,asc:Va,desc:Ua}}function bl(r,e){Object.keys(r).length===1&&"default"in r&&!f(r.default,y)&&(r=r.default);let n={},i={},t={};for(let[a,o]of Object.entries(r))if(f(o,y)){let s=Le(o),c=i[s];n[s]=a,t[a]={tsName:a,dbName:o[y.Symbol.Name],schema:o[y.Symbol.Schema],columns:o[y.Symbol.Columns],relations:c?.relations??{},primaryKey:c?.primaryKey??[]};for(let u of Object.values(o[y.Symbol.Columns]))u.primary&&t[a].primaryKey.push(u);let m=o[y.Symbol.ExtraConfigBuilder]?.(o[y.Symbol.ExtraConfigColumns]);if(m)for(let u of Object.values(m))f(u,Mr)&&t[a].primaryKey.push(...u.columns)}else if(f(o,Ga)){let s=Le(o.table),c=n[s],m=o.config(e(o.table)),u;for(let[p,h]of Object.entries(m))if(c){let z=t[c];z.relations[p]=h,u&&z.primaryKey.push(...u)}else s in i||(i[s]={relations:{},primaryKey:u}),i[s].relations[p]=h}return{tables:t,tableNamesMap:n}}function zp(r){return function(n,i){return new Ie(r,n,i,i?.fields.reduce((t,a)=>t&&a.notNull,!0)??!1)}}function Np(r){return function(n,i){return new Bn(r,n,i)}}function kl(r,e,n){if(f(n,Ie)&&n.config)return{fields:n.config.fields,references:n.config.references};let i=e[Le(n.referencedTable)];if(!i)throw new Error(`Table "${n.referencedTable[y.Symbol.Name]}" not found in schema`);let t=r[i];if(!t)throw new Error(`Table "${i}" not found in schema`);let a=n.sourceTable,o=e[Le(a)];if(!o)throw new Error(`Table "${a[y.Symbol.Name]}" not found in schema`);let s=[];for(let c of Object.values(t.relations))(n.relationName&&n!==c&&c.relationName===n.relationName||!n.relationName&&c.referencedTable===n.sourceTable)&&s.push(c);if(s.length>1)throw n.relationName?new Error(`There are multiple relations with name "${n.relationName}" in table "${i}"`):new Error(`There are multiple relations between "${i}" and "${n.sourceTable[y.Symbol.Name]}". Please specify relation name`);if(s[0]&&f(s[0],Ie)&&s[0].config)return{fields:s[0].config.references,references:s[0].config.fields};throw new Error(`There is not enough information to infer relation "${o}.${n.fieldName}"`)}function wl(r){return{one:zp(r),many:Np(r)}}function Br(r,e,n,i,t=a=>a){let a={};for(let[o,s]of i.entries())if(s.isJson){let c=e.relations[s.tsKey],m=n[o],u=typeof m=="string"?JSON.parse(m):m;a[s.tsKey]=f(c,Ie)?u&&Br(r,r[s.relationTableTsKey],u,s.selection,t):u.map(p=>Br(r,r[s.relationTableTsKey],p,s.selection,t))}else{let c=t(n[o]),m=s.field,u;f(m,I)?u=m:f(m,g)?u=m.decoder:u=m.sql.decoder,a[s.tsKey]=c===null?null:u.mapFromDriverValue(c)}return a}var an=class extends ee{static[l]="PgViewBase"};var Me=class{static[l]="PgDialect";casing;constructor(e){this.casing=new Pr(e?.casing)}async migrate(e,n,i){let t=typeof i=="string"?"__drizzle_migrations":i.migrationsTable??"__drizzle_migrations",a=typeof i=="string"?"drizzle":i.migrationsSchema??"drizzle",o=d`
			CREATE TABLE IF NOT EXISTS ${d.identifier(a)}.${d.identifier(t)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await n.execute(d`CREATE SCHEMA IF NOT EXISTS ${d.identifier(a)}`),await n.execute(o);let c=(await n.all(d`select id, hash, created_at from ${d.identifier(a)}.${d.identifier(t)} order by created_at desc limit 1`))[0];await n.transaction(async m=>{for await(let u of e)if(!c||Number(c.created_at)<u.folderMillis){for(let p of u.sql)await m.execute(d.raw(p));await m.execute(d`insert into ${d.identifier(a)}.${d.identifier(t)} ("hash", "created_at") values(${u.hash}, ${u.folderMillis})`)}})}escapeName(e){return`"${e}"`}escapeParam(e){return`$${e+1}`}escapeString(e){return`'${e.replace(/'/g,"''")}'`}buildWithCTE(e){if(!e?.length)return;let n=[d`with `];for(let[i,t]of e.entries())n.push(d`${d.identifier(t._.alias)} as (${t._.sql})`),i<e.length-1&&n.push(d`, `);return n.push(d` `),d.join(n)}buildDeleteQuery({table:e,where:n,returning:i,withList:t}){let a=this.buildWithCTE(t),o=i?d` returning ${this.buildSelection(i,{isSingleTable:!0})}`:void 0,s=n?d` where ${n}`:void 0;return d`${a}delete from ${e}${s}${o}`}buildUpdateSet(e,n){let i=e[y.Symbol.Columns],t=Object.keys(i).filter(o=>n[o]!==void 0||i[o]?.onUpdateFn!==void 0),a=t.length;return d.join(t.flatMap((o,s)=>{let c=i[o],m=n[o]??d.param(c.onUpdateFn(),c),u=d`${d.identifier(this.casing.getColumnCasing(c))} = ${m}`;return s<a-1?[u,d.raw(", ")]:[u]}))}buildUpdateQuery({table:e,set:n,where:i,returning:t,withList:a,from:o,joins:s}){let c=this.buildWithCTE(a),m=e[G.Symbol.Name],u=e[G.Symbol.Schema],p=e[G.Symbol.OriginalName],h=m===p?void 0:m,z=d`${u?d`${d.identifier(u)}.`:void 0}${d.identifier(p)}${h&&d` ${d.identifier(h)}`}`,S=this.buildUpdateSet(e,n),k=o&&d.join([d.raw(" from "),this.buildFromTable(o)]),B=this.buildJoins(s),_=t?d` returning ${this.buildSelection(t,{isSingleTable:!o})}`:void 0,O=i?d` where ${i}`:void 0;return d`${c}update ${z} set ${S}${k}${B}${O}${_}`}buildSelection(e,{isSingleTable:n=!1}={}){let i=e.length,t=e.flatMap(({field:a},o)=>{let s=[];if(f(a,g.Aliased)&&a.isSelectionField)s.push(d.identifier(a.fieldAlias));else if(f(a,g.Aliased)||f(a,g)){let c=f(a,g.Aliased)?a.sql:a;n?s.push(new g(c.queryChunks.map(m=>f(m,v)?d.identifier(this.casing.getColumnCasing(m)):m))):s.push(c),f(a,g.Aliased)&&s.push(d` as ${d.identifier(a.fieldAlias)}`)}else f(a,I)&&(n?s.push(d.identifier(this.casing.getColumnCasing(a))):s.push(a));return o<i-1&&s.push(d`, `),s});return d.join(t)}buildJoins(e){if(!e||e.length===0)return;let n=[];for(let[i,t]of e.entries()){i===0&&n.push(d` `);let a=t.table,o=t.lateral?d` lateral`:void 0;if(f(a,G)){let s=a[G.Symbol.Name],c=a[G.Symbol.Schema],m=a[G.Symbol.OriginalName],u=s===m?void 0:t.alias;n.push(d`${d.raw(t.joinType)} join${o} ${c?d`${d.identifier(c)}.`:void 0}${d.identifier(m)}${u&&d` ${d.identifier(u)}`} on ${t.on}`)}else if(f(a,ee)){let s=a[K].name,c=a[K].schema,m=a[K].originalName,u=s===m?void 0:t.alias;n.push(d`${d.raw(t.joinType)} join${o} ${c?d`${d.identifier(c)}.`:void 0}${d.identifier(m)}${u&&d` ${d.identifier(u)}`} on ${t.on}`)}else n.push(d`${d.raw(t.joinType)} join${o} ${a} on ${t.on}`);i<e.length-1&&n.push(d` `)}return d.join(n)}buildFromTable(e){if(f(e,y)&&e[y.Symbol.OriginalName]!==e[y.Symbol.Name]){let n=d`${d.identifier(e[y.Symbol.OriginalName])}`;return e[y.Symbol.Schema]&&(n=d`${d.identifier(e[y.Symbol.Schema])}.${n}`),d`${n} ${d.identifier(e[y.Symbol.Name])}`}return e}buildSelectQuery({withList:e,fields:n,fieldsFlat:i,where:t,having:a,table:o,joins:s,orderBy:c,groupBy:m,limit:u,offset:p,lockingClause:h,distinct:z,setOperators:S}){let k=i??de(n);for(let se of k)if(f(se.field,I)&&Pe(se.field.table)!==(f(o,j)?o._.alias:f(o,an)?o[K].name:f(o,g)?void 0:Pe(o))&&!(Ce=>s?.some(({alias:Wr})=>Wr===(Ce[y.Symbol.IsAlias]?Pe(Ce):Ce[y.Symbol.BaseName])))(se.field.table)){let Ce=Pe(se.field.table);throw new Error(`Your "${se.path.join("->")}" field references a column "${Ce}"."${se.field.name}", but the table "${Ce}" is not part of the query! Did you forget to join it?`)}let B=!s||s.length===0,_=this.buildWithCTE(e),O;z&&(O=z===!0?d` distinct`:d` distinct on (${d.join(z.on,d`, `)})`);let $=this.buildSelection(k,{isSingleTable:B}),D=this.buildFromTable(o),ge=this.buildJoins(s),W=t?d` where ${t}`:void 0,T=a?d` having ${a}`:void 0,x;c&&c.length>0&&(x=d` order by ${d.join(c,d`, `)}`);let re;m&&m.length>0&&(re=d` group by ${d.join(m,d`, `)}`);let $n=typeof u=="object"||typeof u=="number"&&u>=0?d` limit ${u}`:void 0,Yr=p?d` offset ${p}`:void 0,Re=d.empty();if(h){let se=d` for ${d.raw(h.strength)}`;h.config.of&&se.append(d` of ${d.join(Array.isArray(h.config.of)?h.config.of:[h.config.of],d`, `)}`),h.config.noWait?se.append(d` no wait`):h.config.skipLocked&&se.append(d` skip locked`),Re.append(se)}let Te=d`${_}select${O} ${$} from ${D}${ge}${W}${re}${T}${x}${$n}${Yr}${Re}`;return S.length>0?this.buildSetOperations(Te,S):Te}buildSetOperations(e,n){let[i,...t]=n;if(!i)throw new Error("Cannot pass undefined values to any set operator");return t.length===0?this.buildSetOperationQuery({leftSelect:e,setOperator:i}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:e,setOperator:i}),t)}buildSetOperationQuery({leftSelect:e,setOperator:{type:n,isAll:i,rightSelect:t,limit:a,orderBy:o,offset:s}}){let c=d`(${e.getSQL()}) `,m=d`(${t.getSQL()})`,u;if(o&&o.length>0){let S=[];for(let k of o)if(f(k,v))S.push(d.identifier(k.name));else if(f(k,g)){for(let B=0;B<k.queryChunks.length;B++){let _=k.queryChunks[B];f(_,v)&&(k.queryChunks[B]=d.identifier(_.name))}S.push(d`${k}`)}else S.push(d`${k}`);u=d` order by ${d.join(S,d`, `)} `}let p=typeof a=="object"||typeof a=="number"&&a>=0?d` limit ${a}`:void 0,h=d.raw(`${n} ${i?"all ":""}`),z=s?d` offset ${s}`:void 0;return d`${c}${h}${m}${u}${p}${z}`}buildInsertQuery({table:e,values:n,onConflict:i,returning:t,withList:a,select:o,overridingSystemValue_:s}){let c=[],m=e[y.Symbol.Columns],u=Object.entries(m).filter(([_,O])=>!O.shouldDisableInsert()),p=u.map(([,_])=>d.identifier(this.casing.getColumnCasing(_)));if(o){let _=n;f(_,g)?c.push(_):c.push(_.getSQL())}else{let _=n;c.push(d.raw("values "));for(let[O,$]of _.entries()){let D=[];for(let[ge,W]of u){let T=$[ge];if(T===void 0||f(T,ae)&&T.value===void 0)if(W.defaultFn!==void 0){let x=W.defaultFn(),re=f(x,g)?x:d.param(x,W);D.push(re)}else if(!W.default&&W.onUpdateFn!==void 0){let x=W.onUpdateFn(),re=f(x,g)?x:d.param(x,W);D.push(re)}else D.push(d`default`);else D.push(T)}c.push(D),O<_.length-1&&c.push(d`, `)}}let h=this.buildWithCTE(a),z=d.join(c),S=t?d` returning ${this.buildSelection(t,{isSingleTable:!0})}`:void 0,k=i?d` on conflict ${i}`:void 0,B=s===!0?d`overriding system value `:void 0;return d`${h}insert into ${e} ${p} ${B}${z}${k}${S}`}buildRefreshMaterializedViewQuery({view:e,concurrently:n,withNoData:i}){let t=n?d` concurrently`:void 0,a=i?d` with no data`:void 0;return d`refresh materialized view${t} ${e}${a}`}prepareTyping(e){return f(e,_n)||f(e,xn)?"json":f(e,En)?"decimal":f(e,Pn)?"time":f(e,In)||f(e,Mn)?"timestamp":f(e,Tn)||f(e,An)?"date":f(e,Dn)?"uuid":"none"}sqlToQuery(e,n){return e.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:n})}buildRelationalQueryWithoutPK({fullSchema:e,schema:n,tableNamesMap:i,table:t,tableConfig:a,queryConfig:o,tableAlias:s,nestedQueryRelation:c,joinOn:m}){let u=[],p,h,z=[],S,k=[];if(o===!0)u=Object.entries(a.columns).map(([O,$])=>({dbKey:$.name,tsKey:O,field:fe($,s),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let _=Object.fromEntries(Object.entries(a.columns).map(([T,x])=>[T,fe(x,s)]));if(o.where){let T=typeof o.where=="function"?o.where(_,zl()):o.where;S=T&&wn(T,s)}let O=[],$=[];if(o.columns){let T=!1;for(let[x,re]of Object.entries(o.columns))re!==void 0&&x in a.columns&&(!T&&re===!0&&(T=!0),$.push(x));$.length>0&&($=T?$.filter(x=>o.columns?.[x]===!0):Object.keys(a.columns).filter(x=>!$.includes(x)))}else $=Object.keys(a.columns);for(let T of $){let x=a.columns[T];O.push({tsKey:T,value:x})}let D=[];o.with&&(D=Object.entries(o.with).filter(T=>!!T[1]).map(([T,x])=>({tsKey:T,queryConfig:x,relation:a.relations[T]})));let ge;if(o.extras){ge=typeof o.extras=="function"?o.extras(_,{sql:d}):o.extras;for(let[T,x]of Object.entries(ge))O.push({tsKey:T,value:kt(x,s)})}for(let{tsKey:T,value:x}of O)u.push({dbKey:f(x,g.Aliased)?x.fieldAlias:a.columns[T].name,tsKey:T,field:f(x,I)?fe(x,s):x,relationTableTsKey:void 0,isJson:!1,selection:[]});let W=typeof o.orderBy=="function"?o.orderBy(_,Nl()):o.orderBy??[];Array.isArray(W)||(W=[W]),z=W.map(T=>f(T,I)?fe(T,s):wn(T,s)),p=o.limit,h=o.offset;for(let{tsKey:T,queryConfig:x,relation:re}of D){let $n=kl(n,i,re),Yr=Le(re.referencedTable),Re=i[Yr],Te=`${s}_${T}`,se=tn(...$n.fields.map((El,Pl)=>qe(fe($n.references[Pl],Te),fe(El,s)))),Ce=this.buildRelationalQueryWithoutPK({fullSchema:e,schema:n,tableNamesMap:i,table:e[Re],tableConfig:n[Re],queryConfig:f(re,Ie)?x===!0?{limit:1}:{...x,limit:1}:x,tableAlias:Te,joinOn:se,nestedQueryRelation:re}),Wr=d`${d.identifier(Te)}.${d.identifier("data")}`.as(T);k.push({on:d`true`,table:new j(Ce.sql,{},Te),alias:Te,joinType:"left",lateral:!0}),u.push({dbKey:T,tsKey:T,field:Wr,relationTableTsKey:Re,isJson:!0,selection:Ce.selection})}}if(u.length===0)throw new Sn({message:`No fields selected for table "${a.tsName}" ("${s}")`});let B;if(S=tn(m,S),c){let _=d`json_build_array(${d.join(u.map(({field:D,tsKey:ge,isJson:W})=>W?d`${d.identifier(`${s}_${ge}`)}.${d.identifier("data")}`:f(D,g.Aliased)?D.sql:D),d`, `)})`;f(c,Bn)&&(_=d`coalesce(json_agg(${_}${z.length>0?d` order by ${d.join(z,d`, `)}`:void 0}), '[]'::json)`);let O=[{dbKey:"data",tsKey:"data",field:_.as("data"),isJson:!0,relationTableTsKey:a.tsName,selection:u}];p!==void 0||h!==void 0||z.length>0?(B=this.buildSelectQuery({table:kn(t,s),fields:{},fieldsFlat:[{path:[],field:d.raw("*")}],where:S,limit:p,offset:h,orderBy:z,setOperators:[]}),S=void 0,p=void 0,h=void 0,z=[]):B=kn(t,s),B=this.buildSelectQuery({table:f(B,G)?B:new j(B,{},s),fields:{},fieldsFlat:O.map(({field:D})=>({path:[],field:f(D,I)?fe(D,s):D})),joins:k,where:S,limit:p,offset:h,orderBy:z,setOperators:[]})}else B=this.buildSelectQuery({table:kn(t,s),fields:{},fieldsFlat:u.map(({field:_})=>({path:[],field:f(_,I)?fe(_,s):_})),joins:k,where:S,limit:p,offset:h,orderBy:z,setOperators:[]});return{tableTsKey:a.tsName,sql:B,selection:u}}};var Y=class r{static[l]="SelectionProxyHandler";config;constructor(e){this.config={...e}}get(e,n){if(n==="_")return{...e._,selectedFields:new Proxy(e._.selectedFields,this)};if(n===K)return{...e[K],selectedFields:new Proxy(e[K].selectedFields,this)};if(typeof n=="symbol")return e[n];let t=(f(e,j)?e._.selectedFields:f(e,ee)?e[K].selectedFields:e)[n];if(f(t,g.Aliased)){if(this.config.sqlAliasedBehavior==="sql"&&!t.isSelectionField)return t.sql;let a=t.clone();return a.isSelectionField=!0,a}if(f(t,g)){if(this.config.sqlBehavior==="sql")return t;throw new Error(`You tried to reference "${n}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return f(t,I)?this.config.alias?new Proxy(t,new Oe(new Proxy(t.table,new rn(this.config.alias,this.config.replaceOriginalName??!1)))):t:typeof t!="object"||t===null?t:new Proxy(t,new r(this.config))}};var Kr=class{static[l]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}};var X=class{static[l]="PgSelectBuilder";fields;session;dialect;withList=[];distinct;constructor(e){this.fields=e.fields,this.session=e.session,this.dialect=e.dialect,e.withList&&(this.withList=e.withList),this.distinct=e.distinct}authToken;setToken(e){return this.authToken=e,this}from(e){let n=!!this.fields,i;return this.fields?i=this.fields:f(e,j)?i=Object.fromEntries(Object.keys(e._.selectedFields).map(t=>[t,e[t]])):f(e,an)?i=e[K].selectedFields:f(e,g)?i={}:i=Sc(e),new Lr({table:e,fields:i,isPartialSelect:n,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}},Ha=class extends Kr{static[l]="PgSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;constructor({table:e,fields:n,isPartialSelect:i,session:t,dialect:a,withList:o,distinct:s}){super(),this.config={withList:o,table:e,fields:{...n},distinct:s,setOperators:[]},this.isPartialSelect=i,this.session=t,this.dialect=a,this._={selectedFields:n},this.tableName=be(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{}}createJoin(e){return(n,i)=>{let t=this.tableName,a=be(n);if(typeof a=="string"&&this.config.joins?.some(o=>o.alias===a))throw new Error(`Alias "${a}" is already used in this query`);if(!this.isPartialSelect&&(Object.keys(this.joinsNotNullableMap).length===1&&typeof t=="string"&&(this.config.fields={[t]:this.config.fields}),typeof a=="string"&&!f(n,g))){let o=f(n,j)?n._.selectedFields:f(n,ee)?n[K].selectedFields:n[y.Symbol.Columns];this.config.fields[a]=o}if(typeof i=="function"&&(i=i(new Proxy(this.config.fields,new Y({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:i,table:n,joinType:e,alias:a}),typeof a=="string")switch(e){case"left":{this.joinsNotNullableMap[a]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([o])=>[o,!1])),this.joinsNotNullableMap[a]=!0;break}case"inner":{this.joinsNotNullableMap[a]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([o])=>[o,!1])),this.joinsNotNullableMap[a]=!1;break}}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");createSetOperator(e,n){return i=>{let t=typeof i=="function"?i(bp()):i;if(!Nn(this.getSelectedFields(),t.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:e,isAll:n,rightSelect:t}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(e){return this.config.setOperators.push(...e),this}where(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new Y({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=e,this}having(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new Y({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=e,this}groupBy(...e){if(typeof e[0]=="function"){let n=e[0](new Proxy(this.config.fields,new Y({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(n)?n:[n]}else this.config.groupBy=e;return this}orderBy(...e){if(typeof e[0]=="function"){let n=e[0](new Proxy(this.config.fields,new Y({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),i=Array.isArray(n)?n:[n];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=i:this.config.orderBy=i}else{let n=e;this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=n:this.config.orderBy=n}return this}limit(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=e:this.config.limit=e,this}offset(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=e:this.config.offset=e,this}for(e,n={}){return this.config.lockingClause={strength:e,config:n},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:e,...n}=this.dialect.sqlToQuery(this.getSQL());return n}as(e){return new Proxy(new j(this.getSQL(),this.config.fields,e),new Y({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new Y({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}},Lr=class extends Ha{static[l]="PgSelect";_prepare(e){let{session:n,config:i,dialect:t,joinsNotNullableMap:a,authToken:o}=this;if(!n)throw new Error("Cannot execute a query on a query builder. Please use a database instance instead.");return M.startActiveSpan("drizzle.prepareQuery",()=>{let s=de(i.fields),c=n.prepareQuery(t.sqlToQuery(this.getSQL()),s,e,!0);return c.joinsNotNullableMap=a,c.setToken(o)})}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>M.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken))};wc(Lr,[J]);function on(r,e){return(n,i,...t)=>{let a=[i,...t].map(o=>({type:r,isAll:e,rightSelect:o}));for(let o of a)if(!Nn(n.getSelectedFields(),o.rightSelect.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return n.addSetOperators(a)}}var bp=()=>({union:kp,unionAll:wp,intersect:Sp,intersectAll:Tp,except:Ap,exceptAll:xp}),kp=on("union",!1),wp=on("union",!0),Sp=on("intersect",!1),Tp=on("intersect",!0),Ap=on("except",!1),xp=on("except",!0);var sn=class{static[l]="PgQueryBuilder";dialect;dialectConfig;constructor(e){this.dialect=f(e,Me)?e:void 0,this.dialectConfig=f(e,Me)?void 0:e}$with(e){let n=this;return{as(i){return typeof i=="function"&&(i=i(n)),new Proxy(new nn(i.getSQL(),i.getSelectedFields(),e,!0),new Y({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}}}with(...e){let n=this;function i(o){return new X({fields:o??void 0,session:void 0,dialect:n.getDialect(),withList:e})}function t(o){return new X({fields:o??void 0,session:void 0,dialect:n.getDialect(),distinct:!0})}function a(o,s){return new X({fields:s??void 0,session:void 0,dialect:n.getDialect(),distinct:{on:o}})}return{select:i,selectDistinct:t,selectDistinctOn:a}}select(e){return new X({fields:e??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(e){return new X({fields:e??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(e,n){return new X({fields:n??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:e}})}getDialect(){return this.dialect||(this.dialect=new Me(this.dialectConfig)),this.dialect}};var Kn=class{constructor(e,n,i,t,a){this.table=e,this.session=n,this.dialect=i,this.withList=t,this.overridingSystemValue_=a}static[l]="PgInsertBuilder";authToken;setToken(e){return this.authToken=e,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values(e){if(e=Array.isArray(e)?e:[e],e.length===0)throw new Error("values() must be called with at least one value");let n=e.map(i=>{let t={},a=this.table[y.Symbol.Columns];for(let o of Object.keys(i)){let s=i[o];t[o]=f(s,g)?s:new ae(s,a[o])}return t});return new Or(this.table,n,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select(e){let n=typeof e=="function"?e(new sn):e;if(!f(n,g)&&!Nn(this.table[Sr],n._.selectedFields))throw new Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new Or(this.table,n,this.session,this.dialect,this.withList,!0)}},Or=class extends J{constructor(e,n,i,t,a,o,s){super(),this.session=i,this.dialect=t,this.config={table:e,values:n,withList:a,select:o,overridingSystemValue_:s}}static[l]="PgInsert";config;returning(e=this.config.table[y.Symbol.Columns]){return this.config.returning=de(e),this}onConflictDoNothing(e={}){if(e.target===void 0)this.config.onConflict=d`do nothing`;else{let n="";n=Array.isArray(e.target)?e.target.map(t=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(t))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target));let i=e.where?d` where ${e.where}`:void 0;this.config.onConflict=d`(${d.raw(n)})${i} do nothing`}return this}onConflictDoUpdate(e){if(e.where&&(e.targetWhere||e.setWhere))throw new Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');let n=e.where?d` where ${e.where}`:void 0,i=e.targetWhere?d` where ${e.targetWhere}`:void 0,t=e.setWhere?d` where ${e.setWhere}`:void 0,a=this.dialect.buildUpdateSet(this.config.table,Er(this.config.table,e.set)),o="";return o=Array.isArray(e.target)?e.target.map(s=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(s))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target)),this.config.onConflict=d`(${d.raw(o)})${i} do update set ${a}${n}${t}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:e,...n}=this.dialect.sqlToQuery(this.getSQL());return n}_prepare(e){return M.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>M.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken));$dynamic(){return this}};var qr=class extends J{constructor(e,n,i){super(),this.session=n,this.dialect=i,this.config={view:e}}static[l]="PgRefreshMaterializedView";config;concurrently(){if(this.config.withNoData!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(this.config.concurrently!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:e,...n}=this.dialect.sqlToQuery(this.getSQL());return n}_prepare(e){return M.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,e,!0))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>M.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken))};var Ln=class{constructor(e,n,i,t){this.table=e,this.session=n,this.dialect=i,this.withList=t}static[l]="PgUpdateBuilder";authToken;setToken(e){return this.authToken=e,this}set(e){return new Ya(this.table,Er(this.table,e),this.session,this.dialect,this.withList).setToken(this.authToken)}},Ya=class extends J{constructor(e,n,i,t,a){super(),this.session=i,this.dialect=t,this.config={set:n,table:e,withList:a,joins:[]},this.tableName=be(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{}}static[l]="PgUpdate";config;tableName;joinsNotNullableMap;from(e){let n=be(e);return typeof n=="string"&&(this.joinsNotNullableMap[n]=!0),this.config.from=e,this}getTableLikeFields(e){return f(e,G)?e[y.Symbol.Columns]:f(e,j)?e._.selectedFields:e[K].selectedFields}createJoin(e){return(n,i)=>{let t=be(n);if(typeof t=="string"&&this.config.joins.some(a=>a.alias===t))throw new Error(`Alias "${t}" is already used in this query`);if(typeof i=="function"){let a=this.config.from&&!f(this.config.from,g)?this.getTableLikeFields(this.config.from):void 0;i=i(new Proxy(this.config.table[y.Symbol.Columns],new Y({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),a&&new Proxy(a,new Y({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}if(this.config.joins.push({on:i,table:n,joinType:e,alias:t}),typeof t=="string")switch(e){case"left":{this.joinsNotNullableMap[t]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[t]=!0;break}case"inner":{this.joinsNotNullableMap[t]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[t]=!1;break}}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(e){return this.config.where=e,this}returning(e){if(!e&&(e=Object.assign({},this.config.table[y.Symbol.Columns]),this.config.from)){let n=be(this.config.from);if(typeof n=="string"&&this.config.from&&!f(this.config.from,g)){let i=this.getTableLikeFields(this.config.from);e[n]=i}for(let i of this.config.joins){let t=be(i.table);if(typeof t=="string"&&!f(i.table,g)){let a=this.getTableLikeFields(i.table);e[t]=a}}}return this.config.returning=de(e),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:e,...n}=this.dialect.sqlToQuery(this.getSQL());return n}_prepare(e){let n=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0);return n.joinsNotNullableMap=this.joinsNotNullableMap,n}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>this._prepare().execute(e,this.authToken);$dynamic(){return this}};var Rr=class r extends g{constructor(e){super(r.buildEmbeddedCount(e.source,e.filters).queryChunks),this.params=e,this.mapWith(Number),this.session=e.session,this.sql=r.buildCount(e.source,e.filters)}sql;token;static[l]="PgCountBuilder";[Symbol.toStringTag]="PgCountBuilder";session;static buildEmbeddedCount(e,n){return d`(select count(*) from ${e}${d.raw(" where ").if(n)}${n})`}static buildCount(e,n){return d`select count(*) as count from ${e}${d.raw(" where ").if(n)}${n};`}setToken(e){return this.token=e,this}then(e,n){return Promise.resolve(this.session.count(this.sql,this.token)).then(e,n)}catch(e){return this.then(void 0,e)}finally(e){return this.then(n=>(e?.(),n),n=>{throw e?.(),n})}};var $r=class{constructor(e,n,i,t,a,o,s){this.fullSchema=e,this.schema=n,this.tableNamesMap=i,this.table=t,this.tableConfig=a,this.dialect=o,this.session=s}static[l]="PgRelationalQueryBuilder";findMany(e){return new Qr(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many")}findFirst(e){return new Qr(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first")}},Qr=class extends J{constructor(e,n,i,t,a,o,s,c,m){super(),this.fullSchema=e,this.schema=n,this.tableNamesMap=i,this.table=t,this.tableConfig=a,this.dialect=o,this.session=s,this.config=c,this.mode=m}static[l]="PgRelationalQuery";_prepare(e){return M.startActiveSpan("drizzle.prepareQuery",()=>{let{query:n,builtQuery:i}=this._toSQL();return this.session.prepareQuery(i,void 0,e,!0,(t,a)=>{let o=t.map(s=>Br(this.schema,this.tableConfig,s,n.selection,a));return this.mode==="first"?o[0]:o})})}prepare(e){return this._prepare(e)}_getQuery(){return this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){let e=this._getQuery(),n=this.dialect.sqlToQuery(e.sql);return{query:e,builtQuery:n}}toSQL(){return this._toSQL().builtQuery}authToken;setToken(e){return this.authToken=e,this}execute(){return M.startActiveSpan("drizzle.operation",()=>this._prepare().execute(void 0,this.authToken))}};var Fr=class extends J{constructor(e,n,i,t){super(),this.execute=e,this.sql=n,this.query=i,this.mapBatchResult=t}static[l]="PgRaw";getSQL(){return this.sql}getQuery(){return this.query}mapResult(e,n){return n?this.mapBatchResult(e):e}_prepare(){return this}isResponseInArrayMode(){return!1}};var cn=class{constructor(e,n,i){if(this.dialect=e,this.session=n,this._=i?{schema:i.schema,fullSchema:i.fullSchema,tableNamesMap:i.tableNamesMap,session:n}:{schema:void 0,fullSchema:{},tableNamesMap:{},session:n},this.query={},this._.schema)for(let[t,a]of Object.entries(this._.schema))this.query[t]=new $r(i.fullSchema,this._.schema,this._.tableNamesMap,i.fullSchema[t],a,e,n)}static[l]="PgDatabase";query;$with(e){let n=this;return{as(i){return typeof i=="function"&&(i=i(new sn(n.dialect))),new Proxy(new nn(i.getSQL(),i.getSelectedFields(),e,!0),new Y({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}}}$count(e,n){return new Rr({source:e,filters:n,session:this.session})}with(...e){let n=this;function i(m){return new X({fields:m??void 0,session:n.session,dialect:n.dialect,withList:e})}function t(m){return new X({fields:m??void 0,session:n.session,dialect:n.dialect,withList:e,distinct:!0})}function a(m,u){return new X({fields:u??void 0,session:n.session,dialect:n.dialect,withList:e,distinct:{on:m}})}function o(m){return new Ln(m,n.session,n.dialect,e)}function s(m){return new Kn(m,n.session,n.dialect,e)}function c(m){return new bn(m,n.session,n.dialect,e)}return{select:i,selectDistinct:t,selectDistinctOn:a,update:o,insert:s,delete:c}}select(e){return new X({fields:e??void 0,session:this.session,dialect:this.dialect})}selectDistinct(e){return new X({fields:e??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(e,n){return new X({fields:n??void 0,session:this.session,dialect:this.dialect,distinct:{on:e}})}update(e){return new Ln(e,this.session,this.dialect)}insert(e){return new Kn(e,this.session,this.dialect)}delete(e){return new bn(e,this.session,this.dialect)}refreshMaterializedView(e){return new qr(e,this.session,this.dialect)}authToken;execute(e){let n=typeof e=="string"?d.raw(e):e.getSQL(),i=this.dialect.sqlToQuery(n),t=this.session.prepareQuery(i,void 0,void 0,!1);return new Fr(()=>t.execute(void 0,this.authToken),n,i,a=>t.mapResult(a,!0))}transaction(e,n){return this.session.transaction(e,n)}};var Wa=class{constructor(e,n){this.unique=e,this.name=n}static[l]="PgIndexBuilderOn";on(...e){return new On(e.map(n=>{if(f(n,g))return n;n=n;let i=new en(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=JSON.parse(JSON.stringify(n.defaultConfig)),i}),this.unique,!1,this.name)}onOnly(...e){return new On(e.map(n=>{if(f(n,g))return n;n=n;let i=new en(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=n.defaultConfig,i}),this.unique,!0,this.name)}using(e,...n){return new On(n.map(i=>{if(f(i,g))return i;i=i;let t=new en(i.name,!!i.keyAsName,i.columnType,i.indexConfig);return i.indexConfig=JSON.parse(JSON.stringify(i.defaultConfig)),t}),this.unique,!0,this.name,e)}},On=class{static[l]="PgIndexBuilder";config;constructor(e,n,i,t,a="btree"){this.config={name:t,columns:e,unique:n,only:i,method:a}}concurrently(){return this.config.concurrently=!0,this}with(e){return this.config.with=e,this}where(e){return this.config.where=e,this}build(e){return new Ja(this.config,e)}},Ja=class{static[l]="PgIndex";config;constructor(e,n){this.config={...e,table:n}}};function P(r){return new Wa(!1,r)}var jr=class{constructor(e){this.query=e}authToken;getQuery(){return this.query}mapResult(e,n){return e}setToken(e){return this.authToken=e,this}static[l]="PgPreparedQuery";joinsNotNullableMap},Vr=class{constructor(e){this.dialect=e}static[l]="PgSession";execute(e,n){return M.startActiveSpan("drizzle.operation",()=>M.startActiveSpan("drizzle.prepareQuery",()=>this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1)).setToken(n).execute(void 0,n))}all(e){return this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1).all()}async count(e,n){let i=await this.execute(e,n);return Number(i[0].count)}},Ur=class extends cn{constructor(e,n,i,t=0){super(e,n,i),this.schema=i,this.nestedIndex=t}static[l]="PgTransaction";rollback(){throw new Ir}getTransactionConfigSQL(e){let n=[];return e.isolationLevel&&n.push(`isolation level ${e.isolationLevel}`),e.accessMode&&n.push(e.accessMode),typeof e.deferrable=="boolean"&&n.push(e.deferrable?"deferrable":"not deferrable"),d.raw(n.join(" "))}setTransaction(e){return this.session.execute(d`set transaction ${this.getTransactionConfigSQL(e)}`)}};var{Pool:Sl,types:ye}=Ee,Xa=class extends jr{constructor(e,n,i,t,a,o,s,c){super({sql:n,params:i}),this.client=e,this.params=i,this.logger=t,this.fields=a,this._isResponseInArrayMode=s,this.customResultMapper=c,this.rawQueryConfig={name:o,text:n,types:{getTypeParser:(m,u)=>m===ye.builtins.TIMESTAMPTZ?p=>p:m===ye.builtins.TIMESTAMP?p=>p:m===ye.builtins.DATE?p=>p:m===ye.builtins.INTERVAL?p=>p:ye.getTypeParser(m,u)}},this.queryConfig={name:o,text:n,rowMode:"array",types:{getTypeParser:(m,u)=>m===ye.builtins.TIMESTAMPTZ?p=>p:m===ye.builtins.TIMESTAMP?p=>p:m===ye.builtins.DATE?p=>p:m===ye.builtins.INTERVAL?p=>p:ye.getTypeParser(m,u)}}}static[l]="NodePgPreparedQuery";rawQueryConfig;queryConfig;async execute(e={}){return M.startActiveSpan("drizzle.execute",async()=>{let n=bt(this.params,e);this.logger.logQuery(this.rawQueryConfig.text,n);let{fields:i,rawQueryConfig:t,client:a,queryConfig:o,joinsNotNullableMap:s,customResultMapper:c}=this;if(!i&&!c)return M.startActiveSpan("drizzle.driver.execute",async u=>(u?.setAttributes({"drizzle.query.name":t.name,"drizzle.query.text":t.text,"drizzle.query.params":JSON.stringify(n)}),a.query(t,n)));let m=await M.startActiveSpan("drizzle.driver.execute",u=>(u?.setAttributes({"drizzle.query.name":o.name,"drizzle.query.text":o.text,"drizzle.query.params":JSON.stringify(n)}),a.query(o,n)));return M.startActiveSpan("drizzle.mapResponse",()=>c?c(m.rows):m.rows.map(u=>kc(i,u,s)))})}all(e={}){return M.startActiveSpan("drizzle.execute",()=>{let n=bt(this.params,e);return this.logger.logQuery(this.rawQueryConfig.text,n),M.startActiveSpan("drizzle.driver.execute",i=>(i?.setAttributes({"drizzle.query.name":this.rawQueryConfig.name,"drizzle.query.text":this.rawQueryConfig.text,"drizzle.query.params":JSON.stringify(n)}),this.client.query(this.rawQueryConfig,n).then(t=>t.rows)))})}isResponseInArrayMode(){return this._isResponseInArrayMode}},Gr=class r extends Vr{constructor(e,n,i,t={}){super(n),this.client=e,this.schema=i,this.options=t,this.logger=t.logger??new kr}static[l]="NodePgSession";logger;prepareQuery(e,n,i,t,a){return new Xa(this.client,e.sql,e.params,this.logger,n,i,t,a)}async transaction(e,n){let i=this.client instanceof Sl?new r(await this.client.connect(),this.dialect,this.schema,this.options):this,t=new Za(this.dialect,i,this.schema);await t.execute(d`begin${n?d` ${t.getTransactionConfigSQL(n)}`:void 0}`);try{let a=await e(t);return await t.execute(d`commit`),a}catch(a){throw await t.execute(d`rollback`),a}finally{this.client instanceof Sl&&i.client.release()}}async count(e){let n=await this.execute(e);return Number(n.rows[0].count)}},Za=class r extends Ur{static[l]="NodePgTransaction";async transaction(e){let n=`sp${this.nestedIndex+1}`,i=new r(this.dialect,this.session,this.schema,this.nestedIndex+1);await i.execute(d.raw(`savepoint ${n}`));try{let t=await e(i);return await i.execute(d.raw(`release savepoint ${n}`)),t}catch(t){throw await i.execute(d.raw(`rollback to savepoint ${n}`)),t}}};var eo=class{constructor(e,n,i={}){this.client=e,this.dialect=n,this.options=i}static[l]="NodePgDriver";createSession(e){return new Gr(this.client,this.dialect,e,{logger:this.options.logger})}},no=class extends cn{static[l]="NodePgDatabase"};function qn(r,e={}){let n=new Me({casing:e.casing}),i;e.logger===!0?i=new br:e.logger!==!1&&(i=e.logger);let t;if(e.schema){let c=bl(e.schema,wl);t={fullSchema:e.schema,schema:c.tables,tableNamesMap:c.tableNamesMap}}let o=new eo(r,n,{logger:i}).createSession(t),s=new no(n,o,t);return s.$client=r,s}function Hr(...r){if(typeof r[0]=="string"){let e=new Ee.Pool({connectionString:r[0]});return qn(e,r[1])}if(Tc(r[0])){let{connection:e,client:n,...i}=r[0];if(n)return qn(n,i);let t=typeof e=="string"?new Ee.Pool({connectionString:e}):new Ee.Pool(e);return qn(t,i)}return qn(r[0],r[1])}(r=>{function e(n){return qn({},n)}r.mock=e})(Hr||(Hr={}));var to={};so(to,{contacts:()=>xl,districts:()=>Al,jobs:()=>Rn,processingLogs:()=>_l,processingStatusEnum:()=>io,provinces:()=>ro,rawMessages:()=>Se,sourceGroups:()=>Tl});var Se=le("raw_messages",{id:ne("id").primaryKey().defaultRandom(),messageId:N("message_id").notNull().unique(),instanceName:N("instance_name").notNull(),remoteJid:N("remote_jid").notNull(),senderJid:N("sender_jid"),messageType:N("message_type").notNull(),content:N("content"),rawPayload:we("raw_payload").notNull(),s3Bucket:N("s3_bucket").notNull(),s3Key:N("s3_key").notNull(),isProcessed:he("is_processed").default(!1).notNull(),processedAt:Q("processed_at",{withTimezone:!0}),processingError:N("processing_error"),receivedAt:Q("received_at",{withTimezone:!0}).defaultNow().notNull(),messageTimestamp:Q("message_timestamp",{withTimezone:!0}),createdAt:Q("created_at",{withTimezone:!0}).defaultNow().notNull()},r=>({messageIdIdx:P("raw_messages_message_id_idx").on(r.messageId),remoteJidIdx:P("raw_messages_remote_jid_idx").on(r.remoteJid),processedIdx:P("raw_messages_processed_idx").on(r.isProcessed),receivedAtIdx:P("raw_messages_received_at_idx").on(r.receivedAt)}));var Rn=le("jobs",{id:ne("id").primaryKey().defaultRandom(),messageId:N("message_id").notNull().unique().references(()=>Se.messageId),sourceGroupJid:N("source_group_jid").notNull(),rawText:N("raw_text").notNull(),originMentioned:N("origin_mentioned"),originProvince:N("origin_province"),originProvinceCode:H("origin_province_code"),originDistrict:N("origin_district"),destinationMentioned:N("destination_mentioned"),destinationProvince:N("destination_province"),destinationProvinceCode:H("destination_province_code"),destinationDistrict:N("destination_district"),vehicleType:N("vehicle_type"),bodyType:N("body_type"),isRefrigerated:he("is_refrigerated").default(!1).notNull(),contactPhone:N("contact_phone"),contactPhoneNormalized:N("contact_phone_normalized"),contactName:N("contact_name"),senderJid:N("sender_jid"),senderPhone:N("sender_phone"),weight:ca("weight",{precision:10,scale:2}),weightUnit:N("weight_unit").default("ton"),cargoType:N("cargo_type"),loadType:N("load_type"),isUrgent:he("is_urgent").default(!1).notNull(),confidenceScore:ca("confidence_score",{precision:3,scale:2}),confidenceLevel:N("confidence_level"),parsedFields:we("parsed_fields"),routes:we("routes").$type(),messageType:N("message_type"),postedAt:Q("posted_at",{withTimezone:!0}),createdAt:Q("created_at",{withTimezone:!0}).defaultNow().notNull(),updatedAt:Q("updated_at",{withTimezone:!0}).defaultNow().notNull(),isActive:he("is_active").default(!0).notNull()},r=>({messageIdIdx:P("jobs_message_id_idx").on(r.messageId),sourceGroupIdx:P("jobs_source_group_idx").on(r.sourceGroupJid),originProvinceIdx:P("jobs_origin_province_idx").on(r.originProvince),destProvinceIdx:P("jobs_dest_province_idx").on(r.destinationProvince),routeIdx:P("jobs_route_idx").on(r.originProvince,r.destinationProvince),vehicleTypeIdx:P("jobs_vehicle_type_idx").on(r.vehicleType),postedAtIdx:P("jobs_posted_at_idx").on(r.postedAt),isActiveIdx:P("jobs_is_active_idx").on(r.isActive),contactPhoneIdx:P("jobs_contact_phone_idx").on(r.contactPhoneNormalized),routesIdx:P("jobs_routes_idx").using("gin",r.routes)}));var Tl=le("source_groups",{id:ne("id").primaryKey().defaultRandom(),jid:N("jid").notNull().unique(),displayName:N("display_name"),isActive:he("is_active").default(!0).notNull(),isMonitored:he("is_monitored").default(!0).notNull(),messageCount:H("message_count").default(0).notNull(),jobCount:H("job_count").default(0).notNull(),lastMessageAt:Q("last_message_at",{withTimezone:!0}),createdAt:Q("created_at",{withTimezone:!0}).defaultNow().notNull(),updatedAt:Q("updated_at",{withTimezone:!0}).defaultNow().notNull()},r=>({jidIdx:P("source_groups_jid_idx").on(r.jid),isActiveIdx:P("source_groups_is_active_idx").on(r.isActive),isMonitoredIdx:P("source_groups_is_monitored_idx").on(r.isMonitored)}));var ro=le("provinces",{code:H("code").primaryKey(),name:N("name").notNull(),normalized:N("normalized").notNull(),region:N("region").notNull()}),Al=le("districts",{id:ne("id").primaryKey().defaultRandom(),name:N("name").notNull(),normalized:N("normalized").notNull(),provinceCode:H("province_code").notNull().references(()=>ro.code),isLogisticsHub:H("is_logistics_hub").default(0).notNull()},r=>({provinceCodeIdx:P("districts_province_code_idx").on(r.provinceCode),normalizedIdx:P("districts_normalized_idx").on(r.normalized)}));var xl=le("contacts",{id:ne("id").primaryKey().defaultRandom(),phoneNormalized:N("phone_normalized").notNull().unique(),phoneDisplay:N("phone_display"),primaryName:N("primary_name"),allNames:N("all_names").array(),messageCount:H("message_count").default(0).notNull(),jobCount:H("job_count").default(0).notNull(),firstSeen:Q("first_seen",{withTimezone:!0}).defaultNow().notNull(),lastSeen:Q("last_seen",{withTimezone:!0}).defaultNow().notNull(),createdAt:Q("created_at",{withTimezone:!0}).defaultNow().notNull(),updatedAt:Q("updated_at",{withTimezone:!0}).defaultNow().notNull()},r=>({phoneIdx:P("contacts_phone_idx").on(r.phoneNormalized),lastSeenIdx:P("contacts_last_seen_idx").on(r.lastSeen)}));var io=gc("processing_status",["received","queued","processing","parsed","stored","failed","skipped"]),_l=le("processing_logs",{id:ne("id").primaryKey().defaultRandom(),rawMessageId:ne("raw_message_id").notNull(),messageId:N("message_id"),status:io("status").notNull(),stage:N("stage").notNull(),errorCode:N("error_code"),errorMessage:N("error_message"),errorStack:N("error_stack"),durationMs:H("duration_ms"),metadata:we("metadata"),lambdaRequestId:N("lambda_request_id"),createdAt:Q("created_at",{withTimezone:!0}).defaultNow().notNull()},r=>({rawMessageIdIdx:P("processing_logs_raw_message_id_idx").on(r.rawMessageId),statusIdx:P("processing_logs_status_idx").on(r.status),createdAtIdx:P("processing_logs_created_at_idx").on(r.createdAt)}));var{Pool:_p}=Ee;function ao(r){let e=r?.connectionString||process.env.DATABASE_URL,n=e?{connectionString:e,ssl:r?.ssl?{rejectUnauthorized:!1}:void 0,max:r?.max??10,idleTimeoutMillis:r?.idleTimeoutMillis??3e4,connectionTimeoutMillis:r?.connectionTimeoutMillis??5e3}:{host:r?.host??process.env.DB_HOST??"localhost",port:r?.port??parseInt(process.env.DB_PORT??"5432",10),database:r?.database??process.env.DB_NAME??"logistics",user:r?.user??process.env.DB_USER??"logistics_user",password:r?.password??process.env.DB_PASSWORD??"logistics_dev",ssl:r?.ssl?{rejectUnauthorized:!1}:void 0,max:r?.max??10,idleTimeoutMillis:r?.idleTimeoutMillis??3e4,connectionTimeoutMillis:r?.connectionTimeoutMillis??5e3},i=new _p(n);return{db:Hr(i,{schema:to}),pool:i,async close(){await i.end()},async healthCheck(){try{let a=await i.connect();return await a.query("SELECT 1"),a.release(),!0}catch{return!1}}}}function Ep(r){if(!r||r.endsWith("@lid"))return null;let e=r.match(/^(\d+)@/);if(!e?.[1])return null;let n=e[1];return n.startsWith("90")&&n.length>=12&&(n="0"+n.slice(2)),n}var oo=null;function Pp(){return oo||(oo=ao({connectionString:process.env.DATABASE_URL,ssl:process.env.DB_SSL==="true",max:1,idleTimeoutMillis:12e4,connectionTimeoutMillis:5e3})),oo}async function Ip(r){let e=JSON.parse(r.body);console.log(`Processing message: ${e.messageId}`);let{text:n,remoteJid:i,messageId:t,pushName:a,senderJid:o,instanceName:s,s3Bucket:c,s3Key:m,timestamp:u}=e,p=Ep(o);if(!ni(n)){console.log(`Skipping non-logistics message: ${t}`);return}let h=or(n);console.log(`Parsed message with confidence: ${h.confidenceLevel}`);let z=Hn(n);z.length>0&&console.log(`Extracted ${z.length} routes from message`);let{db:S}=Pp(),[k]=await S.insert(Se).values({messageId:t,instanceName:s,remoteJid:i,senderJid:o||null,messageType:"text",content:n,rawPayload:{pushName:a,timestamp:u,senderPhone:p},s3Bucket:c,s3Key:m,isProcessed:!1,messageTimestamp:u?new Date(u*1e3):null}).returning();console.log(`Stored raw message: ${k?.id}`);let B=h.phones[0]?.original||p||null,_=h.phones[0]?.normalized||p||null,O=h.confidenceLevel==="HIGH"||h.confidenceLevel==="MEDIUM";if(O&&!B&&console.log(`Skipped job creation: no valid phone number for message ${t}`),O&&B){let[$]=await S.insert(Rn).values({messageId:t,sourceGroupJid:i,rawText:n,messageType:h.messageType,originMentioned:h.origin?.originalText||null,originProvince:h.origin?.provinceName||null,originProvinceCode:h.origin?.provinceCode||null,originDistrict:h.origin?.districtName||null,destinationMentioned:h.destination?.originalText||null,destinationProvince:h.destination?.provinceName||null,destinationProvinceCode:h.destination?.provinceCode||null,destinationDistrict:h.destination?.districtName||null,vehicleType:h.vehicle?.vehicleType||null,bodyType:h.vehicle?.bodyType||null,isRefrigerated:h.vehicle?.isRefrigerated||!1,contactPhone:B,contactPhoneNormalized:_,contactName:h.contact?.name||null,senderJid:o||null,senderPhone:p||null,weight:h.weight?.value?.toString()||null,weightUnit:h.weight?.unit||"ton",cargoType:h.cargoType||null,loadType:h.loadType||null,isUrgent:h.isUrgent,confidenceScore:h.confidenceScore.toFixed(2),confidenceLevel:h.confidenceLevel,parsedFields:{allPhones:h.phones.map(D=>D.normalized),urgencyIndicators:h.urgencyIndicators,confidenceFactors:h.confidenceFactors,mentionedLocations:h.mentionedLocations.map(D=>({provinceName:D.provinceName,provinceCode:D.provinceCode,districtName:D.districtName}))},routes:z.length>0?z:null,postedAt:u?new Date(u*1e3):new Date}).returning();console.log(`Created job: ${$?.id} (type: ${h.messageType})`)}else O||console.log(`Skipped job creation: confidence too low (${h.confidenceLevel})`);await S.update(Se).set({isProcessed:!0,processedAt:new Date}).where(qe(Se.messageId,t))}async function Mp(r,e){console.log(`Processing ${r.Records.length} messages`);let n=await Promise.allSettled(r.Records.map(t=>Ip(t))),i=n.filter(t=>t.status==="rejected");if(i.length>0&&(console.error(`${i.length} messages failed processing:`),i.forEach((t,a)=>console.error(`  ${a+1}: ${t.reason}`)),i.length===n.length))throw new Error("All messages failed processing");console.log(`Processed ${n.length-i.length}/${n.length} messages successfully`)}0&&(module.exports={handler});
//# sourceMappingURL=index.js.map
